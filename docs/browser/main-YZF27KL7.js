var jD=Object.defineProperty,BD=Object.defineProperties;var qD=Object.getOwnPropertyDescriptors;var wu=Object.getOwnPropertySymbols;var mg=Object.prototype.hasOwnProperty,gg=Object.prototype.propertyIsEnumerable;var Bh=(t,n)=>(n=Symbol[t])?n:Symbol.for("Symbol."+t);var pg=(t,n,i)=>n in t?jD(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i,F=(t,n)=>{for(var i in n||={})mg.call(n,i)&&pg(t,i,n[i]);if(wu)for(var i of wu(n))gg.call(n,i)&&pg(t,i,n[i]);return t},ie=(t,n)=>BD(t,qD(n));var oa=(t,n)=>{var i={};for(var s in t)mg.call(t,s)&&n.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&wu)for(var s of wu(t))n.indexOf(s)<0&&gg.call(t,s)&&(i[s]=t[s]);return i};var Re=(t,n,i)=>new Promise((s,o)=>{var c=m=>{try{f(i.next(m))}catch(_){o(_)}},h=m=>{try{f(i.throw(m))}catch(_){o(_)}},f=m=>m.done?s(m.value):Promise.resolve(m.value).then(c,h);f((i=i.apply(t,n)).next())}),$D=function(t,n){this[0]=t,this[1]=n};var as=t=>{var n=t[Bh("asyncIterator")],i=!1,s,o={};return n==null?(n=t[Bh("iterator")](),s=c=>o[c]=h=>n[c](h)):(n=n.call(t),s=c=>o[c]=h=>{if(i){if(i=!1,c==="throw")throw h;return h}return i=!0,{done:!1,value:new $D(new Promise(f=>{var m=n[c](h);if(!(m instanceof Object))throw TypeError("Object expected");f(m)}),1)}}),o[Bh("iterator")]=()=>o,s("next"),"throw"in n?s("throw"):o.throw=c=>{throw c},"return"in n&&s("return"),o};var vg=null;var qh=1,yg=Symbol("SIGNAL");function Pe(t){let n=vg;return vg=t,n}var _g={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function UD(t){if(!(Hh(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===qh)){if(!t.producerMustRecompute(t)&&!$h(t)){t.dirty=!1,t.lastCleanEpoch=qh;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=qh}}function wg(t){return t&&(t.nextProducerIndex=0),Pe(t)}function bg(t,n){if(Pe(n),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Hh(t))for(let i=t.nextProducerIndex;i<t.producerNode.length;i++)Uh(t.producerNode[i],t.producerIndexOfThis[i]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function $h(t){bu(t);for(let n=0;n<t.producerNode.length;n++){let i=t.producerNode[n],s=t.producerLastReadVersion[n];if(s!==i.version||(UD(i),s!==i.version))return!0}return!1}function Dg(t){if(bu(t),Hh(t))for(let n=0;n<t.producerNode.length;n++)Uh(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Uh(t,n){if(HD(t),bu(t),t.liveConsumerNode.length===1)for(let s=0;s<t.producerNode.length;s++)Uh(t.producerNode[s],t.producerIndexOfThis[s]);let i=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[i],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[i],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){let s=t.liveConsumerIndexOfThis[n],o=t.liveConsumerNode[n];bu(o),o.producerIndexOfThis[s]=n}}function Hh(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function bu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function HD(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function zD(){throw new Error}var WD=zD;function xg(t){WD=t}function De(t){return typeof t=="function"}function Wr(t){let i=t(s=>{Error.call(s),s.stack=new Error().stack});return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var Du=Wr(t=>function(i){t(this),this.message=i?`${i.length} errors occurred during unsubscription:
${i.map((s,o)=>`${o+1}) ${s.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=i});function aa(t,n){if(t){let i=t.indexOf(n);0<=i&&t.splice(i,1)}}var Rt=class t{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:i}=this;if(i)if(this._parentage=null,Array.isArray(i))for(let c of i)c.remove(this);else i.remove(this);let{initialTeardown:s}=this;if(De(s))try{s()}catch(c){n=c instanceof Du?c.errors:[c]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let c of o)try{Cg(c)}catch(h){n=n??[],h instanceof Du?n=[...n,...h.errors]:n.push(h)}}if(n)throw new Du(n)}}add(n){var i;if(n&&n!==this)if(this.closed)Cg(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(n)}}_hasParent(n){let{_parentage:i}=this;return i===n||Array.isArray(i)&&i.includes(n)}_addParent(n){let{_parentage:i}=this;this._parentage=Array.isArray(i)?(i.push(n),i):i?[i,n]:n}_removeParent(n){let{_parentage:i}=this;i===n?this._parentage=null:Array.isArray(i)&&aa(i,n)}remove(n){let{_finalizers:i}=this;i&&aa(i,n),n instanceof t&&n._removeParent(this)}};Rt.EMPTY=(()=>{let t=new Rt;return t.closed=!0,t})();var zh=Rt.EMPTY;function xu(t){return t instanceof Rt||t&&"closed"in t&&De(t.remove)&&De(t.add)&&De(t.unsubscribe)}function Cg(t){De(t)?t():t.unsubscribe()}var cs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Gr={setTimeout(t,n,...i){let{delegate:s}=Gr;return s?.setTimeout?s.setTimeout(t,n,...i):setTimeout(t,n,...i)},clearTimeout(t){let{delegate:n}=Gr;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Cu(t){Gr.setTimeout(()=>{let{onUnhandledError:n}=cs;if(n)n(t);else throw t})}function ca(){}var Eg=Wh("C",void 0,void 0);function Sg(t){return Wh("E",void 0,t)}function Tg(t){return Wh("N",t,void 0)}function Wh(t,n,i){return{kind:t,value:n,error:i}}var $i=null;function Zr(t){if(cs.useDeprecatedSynchronousErrorHandling){let n=!$i;if(n&&($i={errorThrown:!1,error:null}),t(),n){let{errorThrown:i,error:s}=$i;if($i=null,i)throw s}}else t()}function Ig(t){cs.useDeprecatedSynchronousErrorHandling&&$i&&($i.errorThrown=!0,$i.error=t)}var Ui=class extends Rt{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,xu(n)&&n.add(this)):this.destination=QD}static create(n,i,s){return new Qr(n,i,s)}next(n){this.isStopped?Zh(Tg(n),this):this._next(n)}error(n){this.isStopped?Zh(Sg(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Zh(Eg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},GD=Function.prototype.bind;function Gh(t,n){return GD.call(t,n)}var Qh=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:i}=this;if(i.next)try{i.next(n)}catch(s){Eu(s)}}error(n){let{partialObserver:i}=this;if(i.error)try{i.error(n)}catch(s){Eu(s)}else Eu(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(i){Eu(i)}}},Qr=class extends Ui{constructor(n,i,s){super();let o;if(De(n)||!n)o={next:n??void 0,error:i??void 0,complete:s??void 0};else{let c;this&&cs.useDeprecatedNextContext?(c=Object.create(n),c.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&Gh(n.next,c),error:n.error&&Gh(n.error,c),complete:n.complete&&Gh(n.complete,c)}):o=n}this.destination=new Qh(o)}};function Eu(t){cs.useDeprecatedSynchronousErrorHandling?Ig(t):Cu(t)}function ZD(t){throw t}function Zh(t,n){let{onStoppedNotification:i}=cs;i&&Gr.setTimeout(()=>i(t,n))}var QD={closed:!0,next:ca,error:ZD,complete:ca};var Yr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function An(t){return t}function Yh(...t){return Xh(t)}function Xh(t){return t.length===0?An:t.length===1?t[0]:function(i){return t.reduce((s,o)=>o(s),i)}}var et=(()=>{class t{constructor(i){i&&(this._subscribe=i)}lift(i){let s=new t;return s.source=this,s.operator=i,s}subscribe(i,s,o){let c=XD(i)?i:new Qr(i,s,o);return Zr(()=>{let{operator:h,source:f}=this;c.add(h?h.call(c,f):f?this._subscribe(c):this._trySubscribe(c))}),c}_trySubscribe(i){try{return this._subscribe(i)}catch(s){i.error(s)}}forEach(i,s){return s=Mg(s),new s((o,c)=>{let h=new Qr({next:f=>{try{i(f)}catch(m){c(m),h.unsubscribe()}},error:c,complete:o});this.subscribe(h)})}_subscribe(i){var s;return(s=this.source)===null||s===void 0?void 0:s.subscribe(i)}[Yr](){return this}pipe(...i){return Xh(i)(this)}toPromise(i){return i=Mg(i),new i((s,o)=>{let c;this.subscribe(h=>c=h,h=>o(h),()=>s(c))})}}return t.create=n=>new t(n),t})();function Mg(t){var n;return(n=t??cs.Promise)!==null&&n!==void 0?n:Promise}function YD(t){return t&&De(t.next)&&De(t.error)&&De(t.complete)}function XD(t){return t&&t instanceof Ui||YD(t)&&xu(t)}function Kh(t){return De(t?.lift)}function je(t){return n=>{if(Kh(n))return n.lift(function(i){try{return t(i,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}function Be(t,n,i,s,o){return new Jh(t,n,i,s,o)}var Jh=class extends Ui{constructor(n,i,s,o,c,h){super(n),this.onFinalize=c,this.shouldUnsubscribe=h,this._next=i?function(f){try{i(f)}catch(m){n.error(m)}}:super._next,this._error=o?function(f){try{o(f)}catch(m){n.error(m)}finally{this.unsubscribe()}}:super._error,this._complete=s?function(){try{s()}catch(f){n.error(f)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:i}=this;super.unsubscribe(),!i&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function Xr(){return je((t,n)=>{let i=null;t._refCount++;let s=Be(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){i=null;return}let o=t._connection,c=i;i=null,o&&(!c||o===c)&&o.unsubscribe(),n.unsubscribe()});t.subscribe(s),s.closed||(i=t.connect())})}var Kr=class extends et{constructor(n,i){super(),this.source=n,this.subjectFactory=i,this._subject=null,this._refCount=0,this._connection=null,Kh(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Rt;let i=this.getSubject();n.add(this.source.subscribe(Be(i,void 0,()=>{this._teardown(),i.complete()},s=>{this._teardown(),i.error(s)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Rt.EMPTY)}return n}refCount(){return Xr()(this)}};var Ag=Wr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rn=(()=>{class t extends et{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(i){let s=new Su(this,this);return s.operator=i,s}_throwIfClosed(){if(this.closed)throw new Ag}next(i){Zr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let s of this.currentObservers)s.next(i)}})}error(i){Zr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=i;let{observers:s}=this;for(;s.length;)s.shift().error(i)}})}complete(){Zr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:i}=this;for(;i.length;)i.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var i;return((i=this.observers)===null||i===void 0?void 0:i.length)>0}_trySubscribe(i){return this._throwIfClosed(),super._trySubscribe(i)}_subscribe(i){return this._throwIfClosed(),this._checkFinalizedStatuses(i),this._innerSubscribe(i)}_innerSubscribe(i){let{hasError:s,isStopped:o,observers:c}=this;return s||o?zh:(this.currentObservers=null,c.push(i),new Rt(()=>{this.currentObservers=null,aa(c,i)}))}_checkFinalizedStatuses(i){let{hasError:s,thrownError:o,isStopped:c}=this;s?i.error(o):c&&i.complete()}asObservable(){let i=new et;return i.source=this,i}}return t.create=(n,i)=>new Su(n,i),t})(),Su=class extends rn{constructor(n,i){super(),this.destination=n,this.source=i}next(n){var i,s;(s=(i=this.destination)===null||i===void 0?void 0:i.next)===null||s===void 0||s.call(i,n)}error(n){var i,s;(s=(i=this.destination)===null||i===void 0?void 0:i.error)===null||s===void 0||s.call(i,n)}complete(){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||i===void 0||i.call(n)}_subscribe(n){var i,s;return(s=(i=this.source)===null||i===void 0?void 0:i.subscribe(n))!==null&&s!==void 0?s:zh}};var Nt=class extends rn{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let i=super._subscribe(n);return!i.closed&&n.next(this._value),i}getValue(){let{hasError:n,thrownError:i,_value:s}=this;if(n)throw i;return this._throwIfClosed(),s}next(n){super.next(this._value=n)}};var On=new et(t=>t.complete());function Og(t){return t&&De(t.schedule)}function kg(t){return t[t.length-1]}function Rg(t){return De(kg(t))?t.pop():void 0}function pi(t){return Og(kg(t))?t.pop():void 0}function Fg(t,n,i,s){function o(c){return c instanceof i?c:new i(function(h){h(c)})}return new(i||(i=Promise))(function(c,h){function f(x){try{_(s.next(x))}catch(I){h(I)}}function m(x){try{_(s.throw(x))}catch(I){h(I)}}function _(x){x.done?c(x.value):o(x.value).then(f,m)}_((s=s.apply(t,n||[])).next())})}function Ng(t){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&t[n],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hi(t){return this instanceof Hi?(this.v=t,this):new Hi(t)}function Pg(t,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,n||[]),o,c=[];return o={},h("next"),h("throw"),h("return"),o[Symbol.asyncIterator]=function(){return this},o;function h(L){s[L]&&(o[L]=function(z){return new Promise(function(he,pe){c.push([L,z,he,pe])>1||f(L,z)})})}function f(L,z){try{m(s[L](z))}catch(he){I(c[0][3],he)}}function m(L){L.value instanceof Hi?Promise.resolve(L.value.v).then(_,x):I(c[0][2],L)}function _(L){f("next",L)}function x(L){f("throw",L)}function I(L,z){L(z),c.shift(),c.length&&f(c[0][0],c[0][1])}}function Lg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],i;return n?n.call(t):(t=typeof Ng=="function"?Ng(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(c){i[c]=t[c]&&function(h){return new Promise(function(f,m){h=t[c](h),o(f,m,h.done,h.value)})}}function o(c,h,f,m){Promise.resolve(m).then(function(_){c({value:_,done:f})},h)}}var Tu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Iu(t){return De(t?.then)}function Mu(t){return De(t[Yr])}function Au(t){return Symbol.asyncIterator&&De(t?.[Symbol.asyncIterator])}function Ou(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function KD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ku=KD();function Ru(t){return De(t?.[ku])}function Nu(t){return Pg(this,arguments,function*(){let i=t.getReader();try{for(;;){let{value:s,done:o}=yield Hi(i.read());if(o)return yield Hi(void 0);yield yield Hi(s)}}finally{i.releaseLock()}})}function Fu(t){return De(t?.getReader)}function $t(t){if(t instanceof et)return t;if(t!=null){if(Mu(t))return JD(t);if(Tu(t))return ex(t);if(Iu(t))return tx(t);if(Au(t))return Vg(t);if(Ru(t))return nx(t);if(Fu(t))return sx(t)}throw Ou(t)}function JD(t){return new et(n=>{let i=t[Yr]();if(De(i.subscribe))return i.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ex(t){return new et(n=>{for(let i=0;i<t.length&&!n.closed;i++)n.next(t[i]);n.complete()})}function tx(t){return new et(n=>{t.then(i=>{n.closed||(n.next(i),n.complete())},i=>n.error(i)).then(null,Cu)})}function nx(t){return new et(n=>{for(let i of t)if(n.next(i),n.closed)return;n.complete()})}function Vg(t){return new et(n=>{ix(t,n).catch(i=>n.error(i))})}function sx(t){return Vg(Nu(t))}function ix(t,n){var i,s,o,c;return Fg(this,void 0,void 0,function*(){try{for(i=Lg(t);s=yield i.next(),!s.done;){let h=s.value;if(n.next(h),n.closed)return}}catch(h){o={error:h}}finally{try{s&&!s.done&&(c=i.return)&&(yield c.call(i))}finally{if(o)throw o.error}}n.complete()})}function _n(t,n,i,s=0,o=!1){let c=n.schedule(function(){i(),o?t.add(this.schedule(null,s)):this.unsubscribe()},s);if(t.add(c),!o)return c}function Pu(t,n=0){return je((i,s)=>{i.subscribe(Be(s,o=>_n(s,t,()=>s.next(o),n),()=>_n(s,t,()=>s.complete(),n),o=>_n(s,t,()=>s.error(o),n)))})}function Lu(t,n=0){return je((i,s)=>{s.add(t.schedule(()=>i.subscribe(s),n))})}function jg(t,n){return $t(t).pipe(Lu(n),Pu(n))}function Bg(t,n){return $t(t).pipe(Lu(n),Pu(n))}function qg(t,n){return new et(i=>{let s=0;return n.schedule(function(){s===t.length?i.complete():(i.next(t[s++]),i.closed||this.schedule())})})}function $g(t,n){return new et(i=>{let s;return _n(i,n,()=>{s=t[ku](),_n(i,n,()=>{let o,c;try{({value:o,done:c}=s.next())}catch(h){i.error(h);return}c?i.complete():i.next(o)},0,!0)}),()=>De(s?.return)&&s.return()})}function Vu(t,n){if(!t)throw new Error("Iterable cannot be null");return new et(i=>{_n(i,n,()=>{let s=t[Symbol.asyncIterator]();_n(i,n,()=>{s.next().then(o=>{o.done?i.complete():i.next(o.value)})},0,!0)})})}function Ug(t,n){return Vu(Nu(t),n)}function Hg(t,n){if(t!=null){if(Mu(t))return jg(t,n);if(Tu(t))return qg(t,n);if(Iu(t))return Bg(t,n);if(Au(t))return Vu(t,n);if(Ru(t))return $g(t,n);if(Fu(t))return Ug(t,n)}throw Ou(t)}function St(t,n){return n?Hg(t,n):$t(t)}function be(...t){let n=pi(t);return St(t,n)}function Jr(t,n){let i=De(t)?t:()=>t,s=o=>o.error(i());return new et(n?o=>n.schedule(s,0,o):s)}function ed(t){return!!t&&(t instanceof et||De(t.lift)&&De(t.subscribe))}var Gs=Wr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function qe(t,n){return je((i,s)=>{let o=0;i.subscribe(Be(s,c=>{s.next(t.call(n,c,o++))}))})}var{isArray:rx}=Array;function ox(t,n){return rx(n)?t(...n):t(n)}function zg(t){return qe(n=>ox(t,n))}var{isArray:ax}=Array,{getPrototypeOf:cx,prototype:ux,keys:lx}=Object;function Wg(t){if(t.length===1){let n=t[0];if(ax(n))return{args:n,keys:null};if(hx(n)){let i=lx(n);return{args:i.map(s=>n[s]),keys:i}}}return{args:t,keys:null}}function hx(t){return t&&typeof t=="object"&&cx(t)===ux}function Gg(t,n){return t.reduce((i,s,o)=>(i[s]=n[o],i),{})}function ju(...t){let n=pi(t),i=Rg(t),{args:s,keys:o}=Wg(t);if(s.length===0)return St([],n);let c=new et(dx(s,n,o?h=>Gg(o,h):An));return i?c.pipe(zg(i)):c}function dx(t,n,i=An){return s=>{Zg(n,()=>{let{length:o}=t,c=new Array(o),h=o,f=o;for(let m=0;m<o;m++)Zg(n,()=>{let _=St(t[m],n),x=!1;_.subscribe(Be(s,I=>{c[m]=I,x||(x=!0,f--),f||s.next(i(c.slice()))},()=>{--h||s.complete()}))},s)},s)}}function Zg(t,n,i){t?_n(i,t,n):n()}function Qg(t,n,i,s,o,c,h,f){let m=[],_=0,x=0,I=!1,L=()=>{I&&!m.length&&!_&&n.complete()},z=pe=>_<s?he(pe):m.push(pe),he=pe=>{c&&n.next(pe),_++;let Fe=!1;$t(i(pe,x++)).subscribe(Be(n,Oe=>{o?.(Oe),c?z(Oe):n.next(Oe)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(_--;m.length&&_<s;){let Oe=m.shift();h?_n(n,h,()=>he(Oe)):he(Oe)}L()}catch(Oe){n.error(Oe)}}))};return t.subscribe(Be(n,z,()=>{I=!0,L()})),()=>{f?.()}}function Ft(t,n,i=1/0){return De(n)?Ft((s,o)=>qe((c,h)=>n(s,c,o,h))($t(t(s,o))),i):(typeof n=="number"&&(i=n),je((s,o)=>Qg(s,o,t,i)))}function eo(t=1/0){return Ft(An,t)}function Yg(){return eo(1)}function to(...t){return Yg()(St(t,pi(t)))}function Bu(t){return new et(n=>{$t(t()).subscribe(n)})}function us(t,n){return je((i,s)=>{let o=0;i.subscribe(Be(s,c=>t.call(n,c,o++)&&s.next(c)))})}function mi(t){return je((n,i)=>{let s=null,o=!1,c;s=n.subscribe(Be(i,void 0,void 0,h=>{c=$t(t(h,mi(t)(n))),s?(s.unsubscribe(),s=null,c.subscribe(i)):o=!0})),o&&(s.unsubscribe(),s=null,c.subscribe(i))})}function Xg(t,n,i,s,o){return(c,h)=>{let f=i,m=n,_=0;c.subscribe(Be(h,x=>{let I=_++;m=f?t(m,x,I):(f=!0,x),s&&h.next(m)},o&&(()=>{f&&h.next(m),h.complete()})))}}function no(t,n){return De(n)?Ft(t,n,1):Ft(t,1)}function gi(t){return je((n,i)=>{let s=!1;n.subscribe(Be(i,o=>{s=!0,i.next(o)},()=>{s||i.next(t),i.complete()}))})}function Zs(t){return t<=0?()=>On:je((n,i)=>{let s=0;n.subscribe(Be(i,o=>{++s<=t&&(i.next(o),t<=s&&i.complete())}))})}function td(t){return qe(()=>t)}function qu(t=fx){return je((n,i)=>{let s=!1;n.subscribe(Be(i,o=>{s=!0,i.next(o)},()=>s?i.complete():i.error(t())))})}function fx(){return new Gs}function ua(t){return je((n,i)=>{try{n.subscribe(i)}finally{i.add(t)}})}function Ts(t,n){let i=arguments.length>=2;return s=>s.pipe(t?us((o,c)=>t(o,c,s)):An,Zs(1),i?gi(n):qu(()=>new Gs))}function so(t){return t<=0?()=>On:je((n,i)=>{let s=[];n.subscribe(Be(i,o=>{s.push(o),t<s.length&&s.shift()},()=>{for(let o of s)i.next(o);i.complete()},void 0,()=>{s=null}))})}function nd(t,n){let i=arguments.length>=2;return s=>s.pipe(t?us((o,c)=>t(o,c,s)):An,so(1),i?gi(n):qu(()=>new Gs))}function sd(t,n){return je(Xg(t,n,arguments.length>=2,!0))}function id(...t){let n=pi(t);return je((i,s)=>{(n?to(t,i,n):to(t,i)).subscribe(s)})}function ls(t,n){return je((i,s)=>{let o=null,c=0,h=!1,f=()=>h&&!o&&s.complete();i.subscribe(Be(s,m=>{o?.unsubscribe();let _=0,x=c++;$t(t(m,x)).subscribe(o=Be(s,I=>s.next(n?n(m,I,x,_++):I),()=>{o=null,f()}))},()=>{h=!0,f()}))})}function rd(t){return je((n,i)=>{$t(t).subscribe(Be(i,()=>i.complete(),ca)),!i.closed&&n.subscribe(i)})}function Xt(t,n,i){let s=De(t)||n||i?{next:t,error:n,complete:i}:t;return s?je((o,c)=>{var h;(h=s.subscribe)===null||h===void 0||h.call(s);let f=!0;o.subscribe(Be(c,m=>{var _;(_=s.next)===null||_===void 0||_.call(s,m),c.next(m)},()=>{var m;f=!1,(m=s.complete)===null||m===void 0||m.call(s),c.complete()},m=>{var _;f=!1,(_=s.error)===null||_===void 0||_.call(s,m),c.error(m)},()=>{var m,_;f&&((m=s.unsubscribe)===null||m===void 0||m.call(s)),(_=s.finalize)===null||_===void 0||_.call(s)}))}):An}var kv="https://g.co/ng/security#xss",_e=class extends Error{constructor(n,i){super(cf(n,i)),this.code=n}};function cf(t,n){return`${`NG0${Math.abs(t)}`}${n?": "+n:""}`}function uf(t){return{toString:t}.toString()}var zi=globalThis;function st(t){for(let n in t)if(t[n]===st)return n;throw Error("Could not find renamed property on target object.")}function kn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(kn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let n=t.toString();if(n==null)return""+n;let i=n.indexOf(`
`);return i===-1?n:n.substring(0,i)}function Kg(t,n){return t==null||t===""?n===null?"":n:n==null||n===""?t:t+" "+n}var px=st({__forward_ref__:st});function Rv(t){return t.__forward_ref__=Rv,t.toString=function(){return kn(this())},t}function Hn(t){return Nv(t)?t():t}function Nv(t){return typeof t=="function"&&t.hasOwnProperty(px)&&t.__forward_ref__===Rv}function ve(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function hl(t){return Jg(t,Pv)||Jg(t,Lv)}function Fv(t){return hl(t)!==null}function Jg(t,n){return t.hasOwnProperty(n)?t[n]:null}function mx(t){let n=t&&(t[Pv]||t[Lv]);return n||null}function ev(t){return t&&(t.hasOwnProperty(tv)||t.hasOwnProperty(gx))?t[tv]:null}var Pv=st({\u0275prov:st}),tv=st({\u0275inj:st}),Lv=st({ngInjectableDef:st}),gx=st({ngInjectorDef:st}),$e=class{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof i=="number"?this.__NG_ELEMENT_ID__=i:i!==void 0&&(this.\u0275prov=ve({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Vv(t){return t&&!!t.\u0275providers}var vx=st({\u0275cmp:st}),yx=st({\u0275dir:st}),_x=st({\u0275pipe:st}),wx=st({\u0275mod:st}),Qu=st({\u0275fac:st}),la=st({__NG_ELEMENT_ID__:st}),nv=st({__NG_ENV_ID__:st});function dl(t){return typeof t=="string"?t:t==null?"":String(t)}function bx(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():dl(t)}function Dx(t,n){let i=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new _e(-200,t)}function lf(t,n){throw new _e(-201,!1)}var Me=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Me||{}),vd;function jv(){return vd}function Un(t){let n=vd;return vd=t,n}function Bv(t,n,i){let s=hl(t);if(s&&s.providedIn=="root")return s.value===void 0?s.value=s.factory():s.value;if(i&Me.Optional)return null;if(n!==void 0)return n;lf(t,"Injector")}var xx={},ha=xx,Cx="__NG_DI_FLAG__",Yu="ngTempTokenPath",Ex="ngTokenPath",Sx=/\n/gm,Tx="\u0275",sv="__source",ao;function Ix(){return ao}function vi(t){let n=ao;return ao=t,n}function Mx(t,n=Me.Default){if(ao===void 0)throw new _e(-203,!1);return ao===null?Bv(t,void 0,n):ao.get(t,n&Me.Optional?null:void 0,n)}function Ue(t,n=Me.Default){return(jv()||Mx)(Hn(t),n)}function te(t,n=Me.Default){return Ue(t,fl(n))}function fl(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function yd(t){let n=[];for(let i=0;i<t.length;i++){let s=Hn(t[i]);if(Array.isArray(s)){if(s.length===0)throw new _e(900,!1);let o,c=Me.Default;for(let h=0;h<s.length;h++){let f=s[h],m=Ax(f);typeof m=="number"?m===-1?o=f.token:c|=m:o=f}n.push(Ue(o,c))}else n.push(Ue(s))}return n}function Ax(t){return t[Cx]}function Ox(t,n,i,s){let o=t[Yu];throw n[sv]&&o.unshift(n[sv]),t.message=kx(`
`+t.message,o,i,s),t[Ex]=o,t[Yu]=null,t}function kx(t,n,i,s=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Tx?t.slice(2):t;let o=kn(n);if(Array.isArray(n))o=n.map(kn).join(" -> ");else if(typeof n=="object"){let c=[];for(let h in n)if(n.hasOwnProperty(h)){let f=n[h];c.push(h+":"+(typeof f=="string"?JSON.stringify(f):kn(f)))}o=`{${c.join(", ")}}`}return`${i}${s?"("+s+")":""}[${o}]: ${t.replace(Sx,`
  `)}`}function uo(t,n){let i=t.hasOwnProperty(Qu);return i?t[Qu]:null}function Rx(t,n,i){if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++){let o=t[s],c=n[s];if(i&&(o=i(o),c=i(c)),c!==o)return!1}return!0}function Nx(t){return t.flat(Number.POSITIVE_INFINITY)}function hf(t,n){t.forEach(i=>Array.isArray(i)?hf(i,n):n(i))}function qv(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function Xu(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Fx(t,n){let i=[];for(let s=0;s<t;s++)i.push(n);return i}var da={},lo=[],ho=new $e(""),$v=new $e("",-1),Uv=new $e(""),Ku=class{get(n,i=ha){if(i===ha){let s=new Error(`NullInjectorError: No provider for ${kn(n)}!`);throw s.name="NullInjectorError",s}return i}},Hv=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Hv||{}),As=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(As||{}),zn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(zn||{});function Px(t,n,i){let s=t.length;for(;;){let o=t.indexOf(n,i);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let c=n.length;if(o+c===s||t.charCodeAt(o+c)<=32)return o}i=o+1}}function _d(t,n,i){let s=0;for(;s<i.length;){let o=i[s];if(typeof o=="number"){if(o!==0)break;s++;let c=i[s++],h=i[s++],f=i[s++];t.setAttribute(n,h,f,c)}else{let c=o,h=i[++s];Lx(c)?t.setProperty(n,c,h):t.setAttribute(n,c,h),s++}}return s}function zv(t){return t===3||t===4||t===6}function Lx(t){return t.charCodeAt(0)===64}function df(t,n){if(!(n===null||n.length===0))if(t===null||t.length===0)t=n.slice();else{let i=-1;for(let s=0;s<n.length;s++){let o=n[s];typeof o=="number"?i=o:i===0||(i===-1||i===2?iv(t,i,o,null,n[++s]):iv(t,i,o,null,null))}}return t}function iv(t,n,i,s,o){let c=0,h=t.length;if(n===-1)h=-1;else for(;c<t.length;){let f=t[c++];if(typeof f=="number"){if(f===n){h=-1;break}else if(f>n){h=c-1;break}}}for(;c<t.length;){let f=t[c];if(typeof f=="number")break;if(f===i){if(s===null){o!==null&&(t[c+1]=o);return}else if(s===t[c+1]){t[c+2]=o;return}}c++,s!==null&&c++,o!==null&&c++}h!==-1&&(t.splice(h,0,n),c=h+1),t.splice(c++,0,i),s!==null&&t.splice(c++,0,s),o!==null&&t.splice(c++,0,o)}var Wv="ng-template";function Vx(t,n,i,s){let o=0;if(s){for(;o<n.length&&typeof n[o]=="string";o+=2)if(n[o]==="class"&&Px(n[o+1].toLowerCase(),i,0)!==-1)return!0}else if(ff(t))return!1;if(o=n.indexOf(1,o),o>-1){let c;for(;++o<n.length&&typeof(c=n[o])=="string";)if(c.toLowerCase()===i)return!0}return!1}function ff(t){return t.type===4&&t.value!==Wv}function jx(t,n,i){let s=t.type===4&&!i?Wv:t.value;return n===s}function Bx(t,n,i){let s=4,o=t.attrs,c=o!==null?Ux(o):0,h=!1;for(let f=0;f<n.length;f++){let m=n[f];if(typeof m=="number"){if(!h&&!hs(s)&&!hs(m))return!1;if(h&&hs(m))continue;h=!1,s=m|s&1;continue}if(!h)if(s&4){if(s=2|s&1,m!==""&&!jx(t,m,i)||m===""&&n.length===1){if(hs(s))return!1;h=!0}}else if(s&8){if(o===null||!Vx(t,o,m,i)){if(hs(s))return!1;h=!0}}else{let _=n[++f],x=qx(m,o,ff(t),i);if(x===-1){if(hs(s))return!1;h=!0;continue}if(_!==""){let I;if(x>c?I="":I=o[x+1].toLowerCase(),s&2&&_!==I){if(hs(s))return!1;h=!0}}}}return hs(s)||h}function hs(t){return(t&1)===0}function qx(t,n,i,s){if(n===null)return-1;let o=0;if(s||!i){let c=!1;for(;o<n.length;){let h=n[o];if(h===t)return o;if(h===3||h===6)c=!0;else if(h===1||h===2){let f=n[++o];for(;typeof f=="string";)f=n[++o];continue}else{if(h===4)break;if(h===0){o+=4;continue}}o+=c?1:2}return-1}else return Hx(n,t)}function Gv(t,n,i=!1){for(let s=0;s<n.length;s++)if(Bx(t,n[s],i))return!0;return!1}function $x(t){let n=t.attrs;if(n!=null){let i=n.indexOf(5);if(!(i&1))return n[i+1]}return null}function Ux(t){for(let n=0;n<t.length;n++){let i=t[n];if(zv(i))return n}return t.length}function Hx(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){let s=t[i];if(typeof s=="number")return-1;if(s===n)return i;i++}return-1}function zx(t,n){e:for(let i=0;i<n.length;i++){let s=n[i];if(t.length===s.length){for(let o=0;o<t.length;o++)if(t[o]!==s[o])continue e;return!0}}return!1}function rv(t,n){return t?":not("+n.trim()+")":n}function Wx(t){let n=t[0],i=1,s=2,o="",c=!1;for(;i<t.length;){let h=t[i];if(typeof h=="string")if(s&2){let f=t[++i];o+="["+h+(f.length>0?'="'+f+'"':"")+"]"}else s&8?o+="."+h:s&4&&(o+=" "+h);else o!==""&&!hs(h)&&(n+=rv(c,o),o=""),s=h,c=c||!hs(s);i++}return o!==""&&(n+=rv(c,o)),n}function Gx(t){return t.map(Wx).join(",")}function Zx(t){let n=[],i=[],s=1,o=2;for(;s<t.length;){let c=t[s];if(typeof c=="string")o===2?c!==""&&n.push(c,t[++s]):o===8&&i.push(c);else{if(!hs(o))break;o=c}s++}return{attrs:n,classes:i}}function Mt(t){return uf(()=>{let n=Kv(t),i=ie(F({},n),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Hv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||As.Emulated,styles:t.styles||lo,_:null,schemas:t.schemas||null,tView:null,id:""});Jv(i);let s=t.dependencies;return i.directiveDefs=av(s,!1),i.pipeDefs=av(s,!0),i.id=Xx(i),i})}function Qx(t){return Zi(t)||Zv(t)}function Yx(t){return t!==null}function ov(t,n){if(t==null)return da;let i={};for(let s in t)if(t.hasOwnProperty(s)){let o=t[s],c,h,f=zn.None;Array.isArray(o)?(f=o[0],c=o[1],h=o[2]??c):(c=o,h=o),n?(i[c]=f!==zn.None?[s,f]:s,n[c]=h):i[c]=s}return i}function vo(t){return uf(()=>{let n=Kv(t);return Jv(n),n})}function Zi(t){return t[vx]||null}function Zv(t){return t[yx]||null}function Qv(t){return t[_x]||null}function Yv(t){let n=Zi(t)||Zv(t)||Qv(t);return n!==null?n.standalone:!1}function Xv(t,n){let i=t[wx]||null;if(!i&&n===!0)throw new Error(`Type ${kn(t)} does not have '\u0275mod' property.`);return i}function Kv(t){let n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||da,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||lo,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ov(t.inputs,n),outputs:ov(t.outputs),debugInfo:null}}function Jv(t){t.features?.forEach(n=>n(t))}function av(t,n){if(!t)return null;let i=n?Qv:Qx;return()=>(typeof t=="function"?t():t).map(s=>i(s)).filter(Yx)}function Xx(t){let n=0,i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let o of i)n=Math.imul(31,n)+o.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function pl(t){return{\u0275providers:t}}function Kx(...t){return{\u0275providers:ey(!0,t),\u0275fromNgModule:!0}}function ey(t,...n){let i=[],s=new Set,o,c=h=>{i.push(h)};return hf(n,h=>{let f=h;wd(f,c,[],s)&&(o||=[],o.push(f))}),o!==void 0&&ty(o,c),i}function ty(t,n){for(let i=0;i<t.length;i++){let{ngModule:s,providers:o}=t[i];pf(o,c=>{n(c,s)})}}function wd(t,n,i,s){if(t=Hn(t),!t)return!1;let o=null,c=ev(t),h=!c&&Zi(t);if(!c&&!h){let m=t.ngModule;if(c=ev(m),c)o=m;else return!1}else{if(h&&!h.standalone)return!1;o=t}let f=s.has(o);if(h){if(f)return!1;if(s.add(o),h.dependencies){let m=typeof h.dependencies=="function"?h.dependencies():h.dependencies;for(let _ of m)wd(_,n,i,s)}}else if(c){if(c.imports!=null&&!f){s.add(o);let _;try{hf(c.imports,x=>{wd(x,n,i,s)&&(_||=[],_.push(x))})}finally{}_!==void 0&&ty(_,n)}if(!f){let _=uo(o)||(()=>new o);n({provide:o,useFactory:_,deps:lo},o),n({provide:Uv,useValue:o,multi:!0},o),n({provide:ho,useValue:()=>Ue(o),multi:!0},o)}let m=c.providers;if(m!=null&&!f){let _=t;pf(m,x=>{n(x,_)})}}else return!1;return o!==t&&t.providers!==void 0}function pf(t,n){for(let i of t)Vv(i)&&(i=i.\u0275providers),Array.isArray(i)?pf(i,n):n(i)}var Jx=st({provide:String,useValue:st});function ny(t){return t!==null&&typeof t=="object"&&Jx in t}function eC(t){return!!(t&&t.useExisting)}function tC(t){return!!(t&&t.useFactory)}function bd(t){return typeof t=="function"}var ml=new $e(""),Uu={},nC={},od;function mf(){return od===void 0&&(od=new Ku),od}var Wn=class{},fa=class extends Wn{get destroyed(){return this._destroyed}constructor(n,i,s,o){super(),this.parent=i,this.source=s,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xd(n,h=>this.processProvider(h)),this.records.set($v,io(void 0,this)),o.has("environment")&&this.records.set(Wn,io(void 0,this));let c=this.records.get(ml);c!=null&&typeof c.value=="string"&&this.scopes.add(c.value),this.injectorDefTypes=new Set(this.get(Uv,lo,Me.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let n=Pe(null);try{for(let s of this._ngOnDestroyHooks)s.ngOnDestroy();let i=this._onDestroyHooks;this._onDestroyHooks=[];for(let s of i)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Pe(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();let i=vi(this),s=Un(void 0),o;try{return n()}finally{vi(i),Un(s)}}get(n,i=ha,s=Me.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(nv))return n[nv](this);s=fl(s);let o,c=vi(this),h=Un(void 0);try{if(!(s&Me.SkipSelf)){let m=this.records.get(n);if(m===void 0){let _=cC(n)&&hl(n);_&&this.injectableDefInScope(_)?m=io(Dd(n),Uu):m=null,this.records.set(n,m)}if(m!=null)return this.hydrate(n,m)}let f=s&Me.Self?mf():this.parent;return i=s&Me.Optional&&i===ha?null:i,f.get(n,i)}catch(f){if(f.name==="NullInjectorError"){if((f[Yu]=f[Yu]||[]).unshift(kn(n)),c)throw f;return Ox(f,n,"R3InjectorError",this.source)}else throw f}finally{Un(h),vi(c)}}resolveInjectorInitializers(){let n=Pe(null),i=vi(this),s=Un(void 0),o;try{let c=this.get(ho,lo,Me.Self);for(let h of c)h()}finally{vi(i),Un(s),Pe(n)}}toString(){let n=[],i=this.records;for(let s of i.keys())n.push(kn(s));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(n){n=Hn(n);let i=bd(n)?n:Hn(n&&n.provide),s=iC(n);if(!bd(n)&&n.multi===!0){let o=this.records.get(i);o||(o=io(void 0,Uu,!0),o.factory=()=>yd(o.multi),this.records.set(i,o)),i=n,o.multi.push(n)}this.records.set(i,s)}hydrate(n,i){let s=Pe(null);try{return i.value===Uu&&(i.value=nC,i.value=i.factory()),typeof i.value=="object"&&i.value&&aC(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{Pe(s)}}injectableDefInScope(n){if(!n.providedIn)return!1;let i=Hn(n.providedIn);return typeof i=="string"?i==="any"||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){let i=this._onDestroyHooks.indexOf(n);i!==-1&&this._onDestroyHooks.splice(i,1)}};function Dd(t){let n=hl(t),i=n!==null?n.factory:uo(t);if(i!==null)return i;if(t instanceof $e)throw new _e(204,!1);if(t instanceof Function)return sC(t);throw new _e(204,!1)}function sC(t){if(t.length>0)throw new _e(204,!1);let i=mx(t);return i!==null?()=>i.factory(t):()=>new t}function iC(t){if(ny(t))return io(void 0,t.useValue);{let n=rC(t);return io(n,Uu)}}function rC(t,n,i){let s;if(bd(t)){let o=Hn(t);return uo(o)||Dd(o)}else if(ny(t))s=()=>Hn(t.useValue);else if(tC(t))s=()=>t.useFactory(...yd(t.deps||[]));else if(eC(t))s=()=>Ue(Hn(t.useExisting));else{let o=Hn(t&&(t.useClass||t.provide));if(oC(t))s=()=>new o(...yd(t.deps));else return uo(o)||Dd(o)}return s}function io(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function oC(t){return!!t.deps}function aC(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function cC(t){return typeof t=="function"||typeof t=="object"&&t instanceof $e}function xd(t,n){for(let i of t)Array.isArray(i)?xd(i,n):i&&Vv(i)?xd(i.\u0275providers,n):n(i)}function er(t,n){t instanceof fa&&t.assertNotDestroyed();let i,s=vi(t),o=Un(void 0);try{return n()}finally{vi(s),Un(o)}}function uC(){return jv()!==void 0||Ix()!=null}function lC(t){return typeof t=="function"}var Xs=0,Ce=1,ge=2,Kt=3,ds=4,Nn=5,fo=6,pa=7,on=8,po=9,fs=10,Jt=11,ma=12,cv=13,yo=14,Gn=15,Ta=16,ro=17,Qs=18,gl=19,sy=20,yi=21,ad=22,Qi=23,Rn=25,iy=1;var Yi=7,Ju=8,mo=9,an=10,gf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(gf||{});function Wi(t){return Array.isArray(t)&&typeof t[iy]=="object"}function Ks(t){return Array.isArray(t)&&t[iy]===!0}function ry(t){return(t.flags&4)!==0}function vl(t){return t.componentOffset>-1}function vf(t){return(t.flags&1)===1}function Ia(t){return!!t.template}function hC(t){return(t[ge]&512)!==0}var Cd=class{constructor(n,i,s){this.previousValue=n,this.currentValue=i,this.firstChange=s}isFirstChange(){return this.firstChange}};function oy(t,n,i,s){n!==null?n.applyValueToInputSignal(n,s):t[i]=s}function _o(){return ay}function ay(t){return t.type.prototype.ngOnChanges&&(t.setInput=fC),dC}_o.ngInherit=!0;function dC(){let t=uy(this),n=t?.current;if(n){let i=t.previous;if(i===da)t.previous=n;else for(let s in n)i[s]=n[s];t.current=null,this.ngOnChanges(n)}}function fC(t,n,i,s,o){let c=this.declaredInputs[s],h=uy(t)||pC(t,{previous:da,current:null}),f=h.current||(h.current={}),m=h.previous,_=m[c];f[c]=new Cd(_&&_.currentValue,i,m===da),oy(t,n,o,i)}var cy="__ngSimpleChanges__";function uy(t){return t[cy]||null}function pC(t,n){return t[cy]=n}var uv=null;var Is=function(t,n,i){uv?.(t,n,i)},mC="svg",gC="math",vC=!1;function yC(){return vC}function Os(t){for(;Array.isArray(t);)t=t[Xs];return t}function _C(t,n){return Os(n[t])}function Zn(t,n){return Os(n[t.index])}function yf(t,n){return t.data[n]}function wC(t,n){return t[n]}function wi(t,n){let i=n[t];return Wi(i)?i:i[Xs]}function bC(t){return(t[ge]&4)===4}function _f(t){return(t[ge]&128)===128}function DC(t){return Ks(t[Kt])}function el(t,n){return n==null?null:t[n]}function ly(t){t[ro]=0}function xC(t){t[ge]&1024||(t[ge]|=1024,_f(t)&&ga(t))}function CC(t,n){for(;t>0;)n=n[yo],t--;return n}function wf(t){return!!(t[ge]&9216||t[Qi]?.dirty)}function Ed(t){t[fs].changeDetectionScheduler?.notify(1),wf(t)?ga(t):t[ge]&64&&(yC()?(t[ge]|=1024,ga(t)):t[fs].changeDetectionScheduler?.notify())}function ga(t){t[fs].changeDetectionScheduler?.notify();let n=va(t);for(;n!==null&&!(n[ge]&8192||(n[ge]|=8192,!_f(n)));)n=va(n)}function hy(t,n){if((t[ge]&256)===256)throw new _e(911,!1);t[yi]===null&&(t[yi]=[]),t[yi].push(n)}function EC(t,n){if(t[yi]===null)return;let i=t[yi].indexOf(n);i!==-1&&t[yi].splice(i,1)}function va(t){let n=t[Kt];return Ks(n)?n[Kt]:n}var Ne={lFrame:wy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function SC(){return Ne.lFrame.elementDepthCount}function TC(){Ne.lFrame.elementDepthCount++}function IC(){Ne.lFrame.elementDepthCount--}function dy(){return Ne.bindingsEnabled}function fy(){return Ne.skipHydrationRootTNode!==null}function MC(t){return Ne.skipHydrationRootTNode===t}function AC(){Ne.skipHydrationRootTNode=null}function Xe(){return Ne.lFrame.lView}function ps(){return Ne.lFrame.tView}function ze(t){return Ne.lFrame.contextLView=t,t[on]}function We(t){return Ne.lFrame.contextLView=null,t}function Fn(){let t=py();for(;t!==null&&t.type===64;)t=t.parent;return t}function py(){return Ne.lFrame.currentTNode}function OC(){let t=Ne.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function Ma(t,n){let i=Ne.lFrame;i.currentTNode=t,i.isParent=n}function my(){return Ne.lFrame.isParent}function gy(){Ne.lFrame.isParent=!1}function kC(){return Ne.lFrame.contextLView}function RC(t){return Ne.lFrame.bindingIndex=t}function Aa(){return Ne.lFrame.bindingIndex++}function NC(){return Ne.lFrame.inI18n}function FC(t,n){let i=Ne.lFrame;i.bindingIndex=i.bindingRootIndex=t,Sd(n)}function PC(){return Ne.lFrame.currentDirectiveIndex}function Sd(t){Ne.lFrame.currentDirectiveIndex=t}function vy(){return Ne.lFrame.currentQueryIndex}function bf(t){Ne.lFrame.currentQueryIndex=t}function LC(t){let n=t[Ce];return n.type===2?n.declTNode:n.type===1?t[Nn]:null}function yy(t,n,i){if(i&Me.SkipSelf){let o=n,c=t;for(;o=o.parent,o===null&&!(i&Me.Host);)if(o=LC(c),o===null||(c=c[yo],o.type&10))break;if(o===null)return!1;n=o,t=c}let s=Ne.lFrame=_y();return s.currentTNode=n,s.lView=t,!0}function Df(t){let n=_y(),i=t[Ce];Ne.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function _y(){let t=Ne.lFrame,n=t===null?null:t.child;return n===null?wy(t):n}function wy(t){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=n),n}function by(){let t=Ne.lFrame;return Ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Dy=by;function xf(){let t=by();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function VC(t){return(Ne.lFrame.contextLView=CC(t,Ne.lFrame.contextLView))[on]}function yl(){return Ne.lFrame.selectedIndex}function Xi(t){Ne.lFrame.selectedIndex=t}function xy(){let t=Ne.lFrame;return yf(t.tView,t.selectedIndex)}function jC(){return Ne.lFrame.currentNamespace}var Cy=!0;function Cf(){return Cy}function Ef(t){Cy=t}function BC(t,n,i){let{ngOnChanges:s,ngOnInit:o,ngDoCheck:c}=n.type.prototype;if(s){let h=ay(n);(i.preOrderHooks??=[]).push(t,h),(i.preOrderCheckHooks??=[]).push(t,h)}o&&(i.preOrderHooks??=[]).push(0-t,o),c&&((i.preOrderHooks??=[]).push(t,c),(i.preOrderCheckHooks??=[]).push(t,c))}function Sf(t,n){for(let i=n.directiveStart,s=n.directiveEnd;i<s;i++){let c=t.data[i].type.prototype,{ngAfterContentInit:h,ngAfterContentChecked:f,ngAfterViewInit:m,ngAfterViewChecked:_,ngOnDestroy:x}=c;h&&(t.contentHooks??=[]).push(-i,h),f&&((t.contentHooks??=[]).push(i,f),(t.contentCheckHooks??=[]).push(i,f)),m&&(t.viewHooks??=[]).push(-i,m),_&&((t.viewHooks??=[]).push(i,_),(t.viewCheckHooks??=[]).push(i,_)),x!=null&&(t.destroyHooks??=[]).push(i,x)}}function Hu(t,n,i){Ey(t,n,3,i)}function zu(t,n,i,s){(t[ge]&3)===i&&Ey(t,n,i,s)}function cd(t,n){let i=t[ge];(i&3)===n&&(i&=16383,i+=1,t[ge]=i)}function Ey(t,n,i,s){let o=s!==void 0?t[ro]&65535:0,c=s??-1,h=n.length-1,f=0;for(let m=o;m<h;m++)if(typeof n[m+1]=="number"){if(f=n[m],s!=null&&f>=s)break}else n[m]<0&&(t[ro]+=65536),(f<c||c==-1)&&(qC(t,i,n,m),t[ro]=(t[ro]&4294901760)+m+2),m++}function lv(t,n){Is(4,t,n);let i=Pe(null);try{n.call(t)}finally{Pe(i),Is(5,t,n)}}function qC(t,n,i,s){let o=i[s]<0,c=i[s+1],h=o?-i[s]:i[s],f=t[h];o?t[ge]>>14<t[ro]>>16&&(t[ge]&3)===n&&(t[ge]+=16384,lv(f,c)):lv(f,c)}var co=-1,ya=class{constructor(n,i,s){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=s}};function $C(t){return t instanceof ya}function UC(t){return(t.flags&8)!==0}function HC(t){return(t.flags&16)!==0}function Sy(t){return t!==co}function tl(t){return t&32767}function zC(t){return t>>16}function nl(t,n){let i=zC(t),s=n;for(;i>0;)s=s[yo],i--;return s}var Td=!0;function hv(t){let n=Td;return Td=t,n}var WC=256,Ty=WC-1,Iy=5,GC=0,Ms={};function ZC(t,n,i){let s;typeof i=="string"?s=i.charCodeAt(0)||0:i.hasOwnProperty(la)&&(s=i[la]),s==null&&(s=i[la]=GC++);let o=s&Ty,c=1<<o;n.data[t+(o>>Iy)]|=c}function My(t,n){let i=Ay(t,n);if(i!==-1)return i;let s=n[Ce];s.firstCreatePass&&(t.injectorIndex=n.length,ud(s.data,t),ud(n,null),ud(s.blueprint,null));let o=Tf(t,n),c=t.injectorIndex;if(Sy(o)){let h=tl(o),f=nl(o,n),m=f[Ce].data;for(let _=0;_<8;_++)n[c+_]=f[h+_]|m[h+_]}return n[c+8]=o,c}function ud(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Ay(t,n){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||n[t.injectorIndex+8]===null?-1:t.injectorIndex}function Tf(t,n){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let i=0,s=null,o=n;for(;o!==null;){if(s=Fy(o),s===null)return co;if(i++,o=o[yo],s.injectorIndex!==-1)return s.injectorIndex|i<<16}return co}function QC(t,n,i){ZC(t,n,i)}function YC(t,n){if(n==="class")return t.classes;if(n==="style")return t.styles;let i=t.attrs;if(i){let s=i.length,o=0;for(;o<s;){let c=i[o];if(zv(c))break;if(c===0)o=o+2;else if(typeof c=="number")for(o++;o<s&&typeof i[o]=="string";)o++;else{if(c===n)return i[o+1];o=o+2}}}return null}function Oy(t,n,i){if(i&Me.Optional||t!==void 0)return t;lf(n,"NodeInjector")}function ky(t,n,i,s){if(i&Me.Optional&&s===void 0&&(s=null),!(i&(Me.Self|Me.Host))){let o=t[po],c=Un(void 0);try{return o?o.get(n,s,i&Me.Optional):Bv(n,s,i&Me.Optional)}finally{Un(c)}}return Oy(s,n,i)}function Ry(t,n,i,s=Me.Default,o){if(t!==null){if(n[ge]&2048&&!(s&Me.Self)){let h=eE(t,n,i,s,Ms);if(h!==Ms)return h}let c=Ny(t,n,i,s,Ms);if(c!==Ms)return c}return ky(n,i,s,o)}function Ny(t,n,i,s,o){let c=KC(i);if(typeof c=="function"){if(!yy(n,t,s))return s&Me.Host?Oy(o,i,s):ky(n,i,s,o);try{let h;if(h=c(s),h==null&&!(s&Me.Optional))lf(i);else return h}finally{Dy()}}else if(typeof c=="number"){let h=null,f=Ay(t,n),m=co,_=s&Me.Host?n[Gn][Nn]:null;for((f===-1||s&Me.SkipSelf)&&(m=f===-1?Tf(t,n):n[f+8],m===co||!fv(s,!1)?f=-1:(h=n[Ce],f=tl(m),n=nl(m,n)));f!==-1;){let x=n[Ce];if(dv(c,f,x.data)){let I=XC(f,n,i,h,s,_);if(I!==Ms)return I}m=n[f+8],m!==co&&fv(s,n[Ce].data[f+8]===_)&&dv(c,f,n)?(h=x,f=tl(m),n=nl(m,n)):f=-1}}return o}function XC(t,n,i,s,o,c){let h=n[Ce],f=h.data[t+8],m=s==null?vl(f)&&Td:s!=h&&(f.type&3)!==0,_=o&Me.Host&&c===f,x=Wu(f,h,i,m,_);return x!==null?go(n,h,x,f):Ms}function Wu(t,n,i,s,o){let c=t.providerIndexes,h=n.data,f=c&1048575,m=t.directiveStart,_=t.directiveEnd,x=c>>20,I=s?f:f+x,L=o?f+x:_;for(let z=I;z<L;z++){let he=h[z];if(z<m&&i===he||z>=m&&he.type===i)return z}if(o){let z=h[m];if(z&&Ia(z)&&z.type===i)return m}return null}function go(t,n,i,s){let o=t[i],c=n.data;if($C(o)){let h=o;h.resolving&&Dx(bx(c[i]));let f=hv(h.canSeeViewProviders);h.resolving=!0;let m,_=h.injectImpl?Un(h.injectImpl):null,x=yy(t,s,Me.Default);try{o=t[i]=h.factory(void 0,c,t,s),n.firstCreatePass&&i>=s.directiveStart&&BC(i,c[i],n)}finally{_!==null&&Un(_),hv(f),h.resolving=!1,Dy()}}return o}function KC(t){if(typeof t=="string")return t.charCodeAt(0)||0;let n=t.hasOwnProperty(la)?t[la]:void 0;return typeof n=="number"?n>=0?n&Ty:JC:n}function dv(t,n,i){let s=1<<t;return!!(i[n+(t>>Iy)]&s)}function fv(t,n){return!(t&Me.Self)&&!(t&Me.Host&&n)}var Gi=class{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,s){return Ry(this._tNode,this._lView,n,fl(s),i)}};function JC(){return new Gi(Fn(),Xe())}function If(t){return uf(()=>{let n=t.prototype.constructor,i=n[Qu]||Id(n),s=Object.prototype,o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==s;){let c=o[Qu]||Id(o);if(c&&c!==i)return c;o=Object.getPrototypeOf(o)}return c=>new c})}function Id(t){return Nv(t)?()=>{let n=Id(Hn(t));return n&&n()}:uo(t)}function eE(t,n,i,s,o){let c=t,h=n;for(;c!==null&&h!==null&&h[ge]&2048&&!(h[ge]&512);){let f=Ny(c,h,i,s|Me.Self,Ms);if(f!==Ms)return f;let m=c.parent;if(!m){let _=h[sy];if(_){let x=_.get(i,Ms,s);if(x!==Ms)return x}m=Fy(h),h=h[yo]}c=m}return o}function Fy(t){let n=t[Ce],i=n.type;return i===2?n.declTNode:i===1?t[Nn]:null}function Mf(t){return YC(Fn(),t)}function pv(t,n=null,i=null,s){let o=Py(t,n,i,s);return o.resolveInjectorInitializers(),o}function Py(t,n=null,i=null,s,o=new Set){let c=[i||lo,Kx(t)];return s=s||(typeof t=="object"?void 0:kn(t)),new fa(c,n||mf(),s||null,o)}var Oa=(()=>{let n=class n{static create(s,o){if(Array.isArray(s))return pv({name:""},o,s,"");{let c=s.name??"";return pv({name:c},s.parent,s.providers,c)}}};n.THROW_IF_NOT_FOUND=ha,n.NULL=new Ku,n.\u0275prov=ve({token:n,providedIn:"any",factory:()=>Ue($v)}),n.__NG_ELEMENT_ID__=-1;let t=n;return t})();var tE="ngOriginalError";function ld(t){return t[tE]}var Ys=class{constructor(){this._console=console}handleError(n){let i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&ld(n);for(;i&&ld(i);)i=ld(i);return i||null}},Ly=new $e("",{providedIn:"root",factory:()=>te(Ys).handleError.bind(void 0)}),Vy=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=nE,n.__NG_ENV_ID__=s=>s;let t=n;return t})(),Md=class extends Vy{constructor(n){super(),this._lView=n}onDestroy(n){return hy(this._lView,n),()=>EC(this._lView,n)}};function nE(){return new Md(Xe())}function sE(){return wo(Fn(),Xe())}function wo(t,n){return new ks(Zn(t,n))}var ks=(()=>{let n=class n{constructor(s){this.nativeElement=s}};n.__NG_ELEMENT_ID__=sE;let t=n;return t})();function iE(t){return t instanceof ks?t.nativeElement:t}var Ad=class extends rn{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,uC()&&(this.destroyRef=te(Vy,{optional:!0})??void 0)}emit(n){let i=Pe(null);try{super.next(n)}finally{Pe(i)}}subscribe(n,i,s){let o=n,c=i||(()=>null),h=s;if(n&&typeof n=="object"){let m=n;o=m.next?.bind(m),c=m.error?.bind(m),h=m.complete?.bind(m)}this.__isAsync&&(c=hd(c),o&&(o=hd(o)),h&&(h=hd(h)));let f=super.subscribe({next:o,error:c,complete:h});return n instanceof Rt&&n.add(f),f}};function hd(t){return n=>{setTimeout(t,void 0,n)}}var Tt=Ad;function rE(){return this._results[Symbol.iterator]()}var Od=class t{get changes(){return this._changes??=new Tt}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let i=t.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=rE)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){this.dirty=!1;let s=Nx(n);(this._changesDetected=!Rx(this._results,s,i))&&(this._results=s,this.length=s.length,this.last=s[this.length-1],this.first=s[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function jy(t){return(t.flags&128)===128}var By=new Map,oE=0;function aE(){return oE++}function cE(t){By.set(t[gl],t)}function uE(t){By.delete(t[gl])}var mv="__ngContext__";function Ki(t,n){Wi(n)?(t[mv]=n[gl],cE(n)):t[mv]=n}function qy(t){return Uy(t[ma])}function $y(t){return Uy(t[ds])}function Uy(t){for(;t!==null&&!Ks(t);)t=t[ds];return t}var kd;function Hy(t){kd=t}function lE(){if(kd!==void 0)return kd;if(typeof document<"u")return document;throw new _e(210,!1)}var Af=new $e("",{providedIn:"root",factory:()=>hE}),hE="ng",Of=new $e(""),bo=new $e("",{providedIn:"platform",factory:()=>"unknown"});var kf=new $e("",{providedIn:"root",factory:()=>lE().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var dE="h",fE="b";var pE=()=>null;function Rf(t,n,i=!1){return pE(t,n,i)}var zy=!1,mE=new $e("",{providedIn:"root",factory:()=>zy});var $u;function gE(){if($u===void 0&&($u=null,zi.trustedTypes))try{$u=zi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return $u}function gv(t){return gE()?.createScriptURL(t)||t}var sl=class{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kv})`}};function _l(t){return t instanceof sl?t.changingThisBreaksApplicationSecurity:t}function Nf(t,n){let i=vE(t);if(i!=null&&i!==n){if(i==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${kv})`)}return i===n}function vE(t){return t instanceof sl&&t.getTypeName()||null}var yE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Wy(t){return t=String(t),t.match(yE)?t:"unsafe:"+t}var wl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(wl||{});function _E(t){let n=Zy();return n?n.sanitize(wl.URL,t)||"":Nf(t,"URL")?_l(t):Wy(dl(t))}function wE(t){let n=Zy();if(n)return gv(n.sanitize(wl.RESOURCE_URL,t)||"");if(Nf(t,"ResourceURL"))return gv(_l(t));throw new _e(904,!1)}function bE(t,n){return n==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||n==="href"&&(t==="base"||t==="link")?wE:_E}function Gy(t,n,i){return bE(n,i)(t)}function Zy(){let t=Xe();return t&&t[fs].sanitizer}function Ff(t){return t.ownerDocument.defaultView}function Qy(t){return t instanceof Function?t():t}var tr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(tr||{}),DE;function Pf(t,n){return DE(t,n)}function oo(t,n,i,s,o){if(s!=null){let c,h=!1;Ks(s)?c=s:Wi(s)&&(h=!0,s=s[Xs]);let f=Os(s);t===0&&i!==null?o==null?e_(n,i,f):il(n,i,f,o||null,!0):t===1&&i!==null?il(n,i,f,o||null,!0):t===2?LE(n,f,h):t===3&&n.destroyNode(f),c!=null&&jE(n,t,c,i,o)}}function xE(t,n){return t.createText(n)}function CE(t,n,i){t.setValue(n,i)}function Yy(t,n,i){return t.createElement(n,i)}function EE(t,n){Xy(t,n),n[Xs]=null,n[Nn]=null}function SE(t,n,i,s,o,c){s[Xs]=o,s[Nn]=n,Dl(t,s,i,1,o,c)}function Xy(t,n){n[fs].changeDetectionScheduler?.notify(1),Dl(t,n,n[Jt],2,null,null)}function TE(t){let n=t[ma];if(!n)return dd(t[Ce],t);for(;n;){let i=null;if(Wi(n))i=n[ma];else{let s=n[an];s&&(i=s)}if(!i){for(;n&&!n[ds]&&n!==t;)Wi(n)&&dd(n[Ce],n),n=n[Kt];n===null&&(n=t),Wi(n)&&dd(n[Ce],n),i=n&&n[ds]}n=i}}function IE(t,n,i,s){let o=an+s,c=i.length;s>0&&(i[o-1][ds]=n),s<c-an?(n[ds]=i[o],qv(i,an+s,n)):(i.push(n),n[ds]=null),n[Kt]=i;let h=n[Ta];h!==null&&i!==h&&ME(h,n);let f=n[Qs];f!==null&&f.insertView(t),Ed(n),n[ge]|=128}function ME(t,n){let i=t[mo],o=n[Kt][Kt][Gn];n[Gn]!==o&&(t[ge]|=gf.HasTransplantedViews),i===null?t[mo]=[n]:i.push(n)}function Ky(t,n){let i=t[mo],s=i.indexOf(n);i.splice(s,1)}function _a(t,n){if(t.length<=an)return;let i=an+n,s=t[i];if(s){let o=s[Ta];o!==null&&o!==t&&Ky(o,s),n>0&&(t[i-1][ds]=s[ds]);let c=Xu(t,an+n);EE(s[Ce],s);let h=c[Qs];h!==null&&h.detachView(c[Ce]),s[Kt]=null,s[ds]=null,s[ge]&=-129}return s}function bl(t,n){if(!(n[ge]&256)){let i=n[Jt];i.destroyNode&&Dl(t,n,i,3,null,null),TE(n)}}function dd(t,n){if(n[ge]&256)return;let i=Pe(null);try{n[ge]&=-129,n[ge]|=256,n[Qi]&&Dg(n[Qi]),OE(t,n),AE(t,n),n[Ce].type===1&&n[Jt].destroy();let s=n[Ta];if(s!==null&&Ks(n[Kt])){s!==n[Kt]&&Ky(s,n);let o=n[Qs];o!==null&&o.detachView(t)}uE(n)}finally{Pe(i)}}function AE(t,n){let i=t.cleanup,s=n[pa];if(i!==null)for(let c=0;c<i.length-1;c+=2)if(typeof i[c]=="string"){let h=i[c+3];h>=0?s[h]():s[-h].unsubscribe(),c+=2}else{let h=s[i[c+1]];i[c].call(h)}s!==null&&(n[pa]=null);let o=n[yi];if(o!==null){n[yi]=null;for(let c=0;c<o.length;c++){let h=o[c];h()}}}function OE(t,n){let i;if(t!=null&&(i=t.destroyHooks)!=null)for(let s=0;s<i.length;s+=2){let o=n[i[s]];if(!(o instanceof ya)){let c=i[s+1];if(Array.isArray(c))for(let h=0;h<c.length;h+=2){let f=o[c[h]],m=c[h+1];Is(4,f,m);try{m.call(f)}finally{Is(5,f,m)}}else{Is(4,o,c);try{c.call(o)}finally{Is(5,o,c)}}}}}function Jy(t,n,i){return kE(t,n.parent,i)}function kE(t,n,i){let s=n;for(;s!==null&&s.type&40;)n=s,s=n.parent;if(s===null)return i[Xs];{let{componentOffset:o}=s;if(o>-1){let{encapsulation:c}=t.data[s.directiveStart+o];if(c===As.None||c===As.Emulated)return null}return Zn(s,i)}}function il(t,n,i,s,o){t.insertBefore(n,i,s,o)}function e_(t,n,i){t.appendChild(n,i)}function vv(t,n,i,s,o){s!==null?il(t,n,i,s,o):e_(t,n,i)}function RE(t,n,i,s){t.removeChild(n,i,s)}function Lf(t,n){return t.parentNode(n)}function NE(t,n){return t.nextSibling(n)}function t_(t,n,i){return PE(t,n,i)}function FE(t,n,i){return t.type&40?Zn(t,i):null}var PE=FE,yv;function Vf(t,n,i,s){let o=Jy(t,s,n),c=n[Jt],h=s.parent||n[Nn],f=t_(h,s,n);if(o!=null)if(Array.isArray(i))for(let m=0;m<i.length;m++)vv(c,o,i[m],f,!1);else vv(c,o,i,f,!1);yv!==void 0&&yv(c,s,n,i,o)}function Gu(t,n){if(n!==null){let i=n.type;if(i&3)return Zn(n,t);if(i&4)return Rd(-1,t[n.index]);if(i&8){let s=n.child;if(s!==null)return Gu(t,s);{let o=t[n.index];return Ks(o)?Rd(-1,o):Os(o)}}else{if(i&32)return Pf(n,t)()||Os(t[n.index]);{let s=n_(t,n);if(s!==null){if(Array.isArray(s))return s[0];let o=va(t[Gn]);return Gu(o,s)}else return Gu(t,n.next)}}}return null}function n_(t,n){if(n!==null){let s=t[Gn][Nn],o=n.projection;return s.projection[o]}return null}function Rd(t,n){let i=an+t+1;if(i<n.length){let s=n[i],o=s[Ce].firstChild;if(o!==null)return Gu(s,o)}return n[Yi]}function LE(t,n,i){let s=Lf(t,n);s&&RE(t,s,n,i)}function jf(t,n,i,s,o,c,h){for(;i!=null;){let f=s[i.index],m=i.type;if(h&&n===0&&(f&&Ki(Os(f),s),i.flags|=2),(i.flags&32)!==32)if(m&8)jf(t,n,i.child,s,o,c,!1),oo(n,t,o,f,c);else if(m&32){let _=Pf(i,s),x;for(;x=_();)oo(n,t,o,x,c);oo(n,t,o,f,c)}else m&16?s_(t,n,s,i,o,c):oo(n,t,o,f,c);i=h?i.projectionNext:i.next}}function Dl(t,n,i,s,o,c){jf(i,s,t.firstChild,n,o,c,!1)}function VE(t,n,i){let s=n[Jt],o=Jy(t,i,n),c=i.parent||n[Nn],h=t_(c,i,n);s_(s,0,n,i,o,h)}function s_(t,n,i,s,o,c){let h=i[Gn],m=h[Nn].projection[s.projection];if(Array.isArray(m))for(let _=0;_<m.length;_++){let x=m[_];oo(n,t,o,x,c)}else{let _=m,x=h[Kt];jy(s)&&(_.flags|=128),jf(t,n,_,x,o,c,!0)}}function jE(t,n,i,s,o){let c=i[Yi],h=Os(i);c!==h&&oo(n,t,s,c,o);for(let f=an;f<i.length;f++){let m=i[f];Dl(m[Ce],m,t,n,s,c)}}function BE(t,n,i){t.setAttribute(n,"style",i)}function i_(t,n,i){i===""?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i)}function r_(t,n,i){let{mergedAttrs:s,classes:o,styles:c}=i;s!==null&&_d(t,n,s),o!==null&&i_(t,n,o),c!==null&&BE(t,n,c)}var xl={};function xe(t=1){o_(ps(),Xe(),yl()+t,!1)}function o_(t,n,i,s){if(!s)if((n[ge]&3)===3){let c=t.preOrderCheckHooks;c!==null&&Hu(n,c,i)}else{let c=t.preOrderHooks;c!==null&&zu(n,c,0,i)}Xi(i)}function hn(t,n=Me.Default){let i=Xe();if(i===null)return Ue(t,n);let s=Fn();return Ry(s,i,Hn(t),n)}function a_(t,n,i,s,o,c){let h=Pe(null);try{let f=null;o&zn.SignalBased&&(f=n[s][yg]),f!==null&&f.transformFn!==void 0&&(c=f.transformFn(c)),o&zn.HasDecoratorInputTransform&&(c=t.inputTransforms[s].call(n,c)),t.setInput!==null?t.setInput(n,f,c,i,s):oy(n,f,s,c)}finally{Pe(h)}}function qE(t,n){let i=t.hostBindingOpCodes;if(i!==null)try{for(let s=0;s<i.length;s++){let o=i[s];if(o<0)Xi(~o);else{let c=o,h=i[++s],f=i[++s];FC(h,c);let m=n[c];f(2,m)}}}finally{Xi(-1)}}function Cl(t,n,i,s,o,c,h,f,m,_,x){let I=n.blueprint.slice();return I[Xs]=o,I[ge]=s|4|128|8|64,(_!==null||t&&t[ge]&2048)&&(I[ge]|=2048),ly(I),I[Kt]=I[yo]=t,I[on]=i,I[fs]=h||t&&t[fs],I[Jt]=f||t&&t[Jt],I[po]=m||t&&t[po]||null,I[Nn]=c,I[gl]=aE(),I[fo]=x,I[sy]=_,I[Gn]=n.type==2?t[Gn]:I,I}function ka(t,n,i,s,o){let c=t.data[n];if(c===null)c=$E(t,n,i,s,o),NC()&&(c.flags|=32);else if(c.type&64){c.type=i,c.value=s,c.attrs=o;let h=OC();c.injectorIndex=h===null?-1:h.injectorIndex}return Ma(c,!0),c}function $E(t,n,i,s,o){let c=py(),h=my(),f=h?c:c&&c.parent,m=t.data[n]=ZE(t,f,i,n,s,o);return t.firstChild===null&&(t.firstChild=m),c!==null&&(h?c.child==null&&m.parent!==null&&(c.child=m):c.next===null&&(c.next=m,m.prev=c)),m}function c_(t,n,i,s){if(i===0)return-1;let o=n.length;for(let c=0;c<i;c++)n.push(s),t.blueprint.push(s),t.data.push(null);return o}function u_(t,n,i,s,o){let c=yl(),h=s&2;try{Xi(-1),h&&n.length>Rn&&o_(t,n,Rn,!1),Is(h?2:0,o),i(s,o)}finally{Xi(c),Is(h?3:1,o)}}function l_(t,n,i){if(ry(n)){let s=Pe(null);try{let o=n.directiveStart,c=n.directiveEnd;for(let h=o;h<c;h++){let f=t.data[h];if(f.contentQueries){let m=i[h];f.contentQueries(1,m,h)}}}finally{Pe(s)}}}function h_(t,n,i){dy()&&(tS(t,n,i,Zn(i,n)),(i.flags&64)===64&&g_(t,n,i))}function d_(t,n,i=Zn){let s=n.localNames;if(s!==null){let o=n.index+1;for(let c=0;c<s.length;c+=2){let h=s[c+1],f=h===-1?i(n,t):t[h];t[o++]=f}}}function f_(t){let n=t.tView;return n===null||n.incompleteFirstPass?t.tView=Bf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function Bf(t,n,i,s,o,c,h,f,m,_,x){let I=Rn+s,L=I+o,z=UE(I,L),he=typeof _=="function"?_():_;return z[Ce]={type:t,blueprint:z,template:i,queries:null,viewQuery:f,declTNode:n,data:z.slice().fill(null,I),bindingStartIndex:I,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof c=="function"?c():c,pipeRegistry:typeof h=="function"?h():h,firstChild:null,schemas:m,consts:he,incompleteFirstPass:!1,ssrId:x}}function UE(t,n){let i=[];for(let s=0;s<n;s++)i.push(s<t?null:xl);return i}function HE(t,n,i,s){let c=s.get(mE,zy)||i===As.ShadowDom,h=t.selectRootElement(n,c);return zE(h),h}function zE(t){WE(t)}var WE=()=>null;function GE(t,n,i,s){let o=__(n);o.push(i),t.firstCreatePass&&w_(t).push(s,o.length-1)}function ZE(t,n,i,s,o,c){let h=n?n.injectorIndex:-1,f=0;return fy()&&(f|=128),{type:i,index:s,insertBeforeIndex:null,injectorIndex:h,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:f,providerIndexes:0,value:o,attrs:c,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function _v(t,n,i,s,o){for(let c in n){if(!n.hasOwnProperty(c))continue;let h=n[c];if(h===void 0)continue;s??={};let f,m=zn.None;Array.isArray(h)?(f=h[0],m=h[1]):f=h;let _=c;if(o!==null){if(!o.hasOwnProperty(c))continue;_=o[c]}t===0?wv(s,i,_,f,m):wv(s,i,_,f)}return s}function wv(t,n,i,s,o){let c;t.hasOwnProperty(i)?(c=t[i]).push(n,s):c=t[i]=[n,s],o!==void 0&&c.push(o)}function QE(t,n,i){let s=n.directiveStart,o=n.directiveEnd,c=t.data,h=n.attrs,f=[],m=null,_=null;for(let x=s;x<o;x++){let I=c[x],L=i?i.get(I):null,z=L?L.inputs:null,he=L?L.outputs:null;m=_v(0,I.inputs,x,m,z),_=_v(1,I.outputs,x,_,he);let pe=m!==null&&h!==null&&!ff(n)?dS(m,x,h):null;f.push(pe)}m!==null&&(m.hasOwnProperty("class")&&(n.flags|=8),m.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=f,n.inputs=m,n.outputs=_}function YE(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function XE(t,n,i,s,o,c,h,f){let m=Zn(n,i),_=n.inputs,x;!f&&_!=null&&(x=_[s])?(qf(t,i,x,s,o),vl(n)&&KE(i,n.index)):n.type&3?(s=YE(s),o=h!=null?h(o,n.value||"",s):o,c.setProperty(m,s,o)):n.type&12}function KE(t,n){let i=wi(n,t);i[ge]&16||(i[ge]|=64)}function p_(t,n,i,s){if(dy()){let o=s===null?null:{"":-1},c=sS(t,i),h,f;c===null?h=f=null:[h,f]=c,h!==null&&m_(t,n,i,h,o,f),o&&iS(i,s,o)}i.mergedAttrs=df(i.mergedAttrs,i.attrs)}function m_(t,n,i,s,o,c){for(let _=0;_<s.length;_++)QC(My(i,n),t,s[_].type);oS(i,t.data.length,s.length);for(let _=0;_<s.length;_++){let x=s[_];x.providersResolver&&x.providersResolver(x)}let h=!1,f=!1,m=c_(t,n,s.length,null);for(let _=0;_<s.length;_++){let x=s[_];i.mergedAttrs=df(i.mergedAttrs,x.hostAttrs),aS(t,i,n,m,x),rS(m,x,o),x.contentQueries!==null&&(i.flags|=4),(x.hostBindings!==null||x.hostAttrs!==null||x.hostVars!==0)&&(i.flags|=64);let I=x.type.prototype;!h&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((t.preOrderHooks??=[]).push(i.index),h=!0),!f&&(I.ngOnChanges||I.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(i.index),f=!0),m++}QE(t,i,c)}function JE(t,n,i,s,o){let c=o.hostBindings;if(c){let h=t.hostBindingOpCodes;h===null&&(h=t.hostBindingOpCodes=[]);let f=~n.index;eS(h)!=f&&h.push(f),h.push(i,s,c)}}function eS(t){let n=t.length;for(;n>0;){let i=t[--n];if(typeof i=="number"&&i<0)return i}return 0}function tS(t,n,i,s){let o=i.directiveStart,c=i.directiveEnd;vl(i)&&cS(n,i,t.data[o+i.componentOffset]),t.firstCreatePass||My(i,n),Ki(s,n);let h=i.initialInputs;for(let f=o;f<c;f++){let m=t.data[f],_=go(n,t,f,i);if(Ki(_,n),h!==null&&hS(n,f-o,_,m,i,h),Ia(m)){let x=wi(i.index,n);x[on]=go(n,t,f,i)}}}function g_(t,n,i){let s=i.directiveStart,o=i.directiveEnd,c=i.index,h=PC();try{Xi(c);for(let f=s;f<o;f++){let m=t.data[f],_=n[f];Sd(f),(m.hostBindings!==null||m.hostVars!==0||m.hostAttrs!==null)&&nS(m,_)}}finally{Xi(-1),Sd(h)}}function nS(t,n){t.hostBindings!==null&&t.hostBindings(1,n)}function sS(t,n){let i=t.directiveRegistry,s=null,o=null;if(i)for(let c=0;c<i.length;c++){let h=i[c];if(Gv(n,h.selectors,!1))if(s||(s=[]),Ia(h))if(h.findHostDirectiveDefs!==null){let f=[];o=o||new Map,h.findHostDirectiveDefs(h,f,o),s.unshift(...f,h);let m=f.length;Nd(t,n,m)}else s.unshift(h),Nd(t,n,0);else o=o||new Map,h.findHostDirectiveDefs?.(h,s,o),s.push(h)}return s===null?null:[s,o]}function Nd(t,n,i){n.componentOffset=i,(t.components??=[]).push(n.index)}function iS(t,n,i){if(n){let s=t.localNames=[];for(let o=0;o<n.length;o+=2){let c=i[n[o+1]];if(c==null)throw new _e(-301,!1);s.push(n[o],c)}}}function rS(t,n,i){if(i){if(n.exportAs)for(let s=0;s<n.exportAs.length;s++)i[n.exportAs[s]]=t;Ia(n)&&(i[""]=t)}}function oS(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}function aS(t,n,i,s,o){t.data[s]=o;let c=o.factory||(o.factory=uo(o.type,!0)),h=new ya(c,Ia(o),hn);t.blueprint[s]=h,i[s]=h,JE(t,n,s,c_(t,i,o.hostVars,xl),o)}function cS(t,n,i){let s=Zn(n,t),o=f_(i),c=t[fs].rendererFactory,h=16;i.signals?h=4096:i.onPush&&(h=64);let f=El(t,Cl(t,o,null,h,s,n,null,c.createRenderer(s,i),null,null,null));t[n.index]=f}function uS(t,n,i,s,o,c){let h=Zn(t,n);lS(n[Jt],h,c,t.value,i,s,o)}function lS(t,n,i,s,o,c,h){if(c==null)t.removeAttribute(n,o,i);else{let f=h==null?dl(c):h(c,s||"",o);t.setAttribute(n,o,f,i)}}function hS(t,n,i,s,o,c){let h=c[n];if(h!==null)for(let f=0;f<h.length;){let m=h[f++],_=h[f++],x=h[f++],I=h[f++];a_(s,i,m,_,x,I)}}function dS(t,n,i){let s=null,o=0;for(;o<i.length;){let c=i[o];if(c===0){o+=4;continue}else if(c===5){o+=2;continue}if(typeof c=="number")break;if(t.hasOwnProperty(c)){s===null&&(s=[]);let h=t[c];for(let f=0;f<h.length;f+=3)if(h[f]===n){s.push(c,h[f+1],h[f+2],i[o+1]);break}}o+=2}return s}function v_(t,n,i,s){return[t,!0,0,n,null,s,null,i,null,null]}function y_(t,n){let i=t.contentQueries;if(i!==null){let s=Pe(null);try{for(let o=0;o<i.length;o+=2){let c=i[o],h=i[o+1];if(h!==-1){let f=t.data[h];bf(c),f.contentQueries(2,n[h],h)}}}finally{Pe(s)}}}function El(t,n){return t[ma]?t[cv][ds]=n:t[ma]=n,t[cv]=n,n}function Fd(t,n,i){bf(0);let s=Pe(null);try{n(t,i)}finally{Pe(s)}}function __(t){return t[pa]||(t[pa]=[])}function w_(t){return t.cleanup||(t.cleanup=[])}function b_(t,n){let i=t[po],s=i?i.get(Ys,null):null;s&&s.handleError(n)}function qf(t,n,i,s,o){for(let c=0;c<i.length;){let h=i[c++],f=i[c++],m=i[c++],_=n[h],x=t.data[h];a_(x,_,s,f,m,o)}}function fS(t,n,i){let s=_C(n,t);CE(t[Jt],s,i)}function pS(t,n){let i=wi(n,t),s=i[Ce];mS(s,i);let o=i[Xs];o!==null&&i[fo]===null&&(i[fo]=Rf(o,i[po])),$f(s,i,i[on])}function mS(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])}function $f(t,n,i){Df(n);try{let s=t.viewQuery;s!==null&&Fd(1,s,i);let o=t.template;o!==null&&u_(t,n,o,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),n[Qs]?.finishViewCreation(t),t.staticContentQueries&&y_(t,n),t.staticViewQueries&&Fd(2,t.viewQuery,i);let c=t.components;c!==null&&gS(n,c)}catch(s){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),s}finally{n[ge]&=-5,xf()}}function gS(t,n){for(let i=0;i<n.length;i++)pS(t,n[i])}function Sl(t,n,i,s){let o=Pe(null);try{let c=n.tView,f=t[ge]&4096?4096:16,m=Cl(t,c,i,f,null,n,null,null,s?.injector??null,s?.embeddedViewInjector??null,s?.dehydratedView??null),_=t[n.index];m[Ta]=_;let x=t[Qs];return x!==null&&(m[Qs]=x.createEmbeddedView(c)),$f(c,m,i),m}finally{Pe(o)}}function D_(t,n){let i=an+n;if(i<t.length)return t[i]}function wa(t,n){return!n||n.firstChild===null||jy(t)}function Tl(t,n,i,s=!0){let o=n[Ce];if(IE(o,n,t,i),s){let h=Rd(i,t),f=n[Jt],m=Lf(f,t[Yi]);m!==null&&SE(o,t[Nn],f,n,m,h)}let c=n[fo];c!==null&&c.firstChild!==null&&(c.firstChild=null)}function x_(t,n){let i=_a(t,n);return i!==void 0&&bl(i[Ce],i),i}function rl(t,n,i,s,o=!1){for(;i!==null;){let c=n[i.index];c!==null&&s.push(Os(c)),Ks(c)&&vS(c,s);let h=i.type;if(h&8)rl(t,n,i.child,s);else if(h&32){let f=Pf(i,n),m;for(;m=f();)s.push(m)}else if(h&16){let f=n_(n,i);if(Array.isArray(f))s.push(...f);else{let m=va(n[Gn]);rl(m[Ce],m,f,s,!0)}}i=o?i.projectionNext:i.next}return s}function vS(t,n){for(let i=an;i<t.length;i++){let s=t[i],o=s[Ce].firstChild;o!==null&&rl(s[Ce],s,o,n)}t[Yi]!==t[Xs]&&n.push(t[Yi])}var C_=[];function yS(t){return t[Qi]??_S(t)}function _S(t){let n=C_.pop()??Object.create(bS);return n.lView=t,n}function wS(t){t.lView[Qi]!==t&&(t.lView=null,C_.push(t))}var bS=ie(F({},_g),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ga(t.lView)},consumerOnSignalRead(){this.lView[Qi]=this}}),E_=100;function S_(t,n=!0,i=0){let s=t[fs],o=s.rendererFactory,c=!1;c||o.begin?.();try{DS(t,i)}catch(h){throw n&&b_(t,h),h}finally{c||(o.end?.(),s.inlineEffectRunner?.flush())}}function DS(t,n){Pd(t,n);let i=0;for(;wf(t);){if(i===E_)throw new _e(103,!1);i++,Pd(t,1)}}function xS(t,n,i,s){let o=n[ge];if((o&256)===256)return;let c=!1;!c&&n[fs].inlineEffectRunner?.flush(),Df(n);let h=null,f=null;!c&&CS(t)&&(f=yS(n),h=wg(f));try{ly(n),RC(t.bindingStartIndex),i!==null&&u_(t,n,i,2,s);let m=(o&3)===3;if(!c)if(m){let I=t.preOrderCheckHooks;I!==null&&Hu(n,I,null)}else{let I=t.preOrderHooks;I!==null&&zu(n,I,0,null),cd(n,0)}if(ES(n),T_(n,0),t.contentQueries!==null&&y_(t,n),!c)if(m){let I=t.contentCheckHooks;I!==null&&Hu(n,I)}else{let I=t.contentHooks;I!==null&&zu(n,I,1),cd(n,1)}qE(t,n);let _=t.components;_!==null&&M_(n,_,0);let x=t.viewQuery;if(x!==null&&Fd(2,x,s),!c)if(m){let I=t.viewCheckHooks;I!==null&&Hu(n,I)}else{let I=t.viewHooks;I!==null&&zu(n,I,2),cd(n,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),n[ad]){for(let I of n[ad])I();n[ad]=null}c||(n[ge]&=-73)}catch(m){throw ga(n),m}finally{f!==null&&(bg(f,h),wS(f)),xf()}}function CS(t){return t.type!==2}function T_(t,n){for(let i=qy(t);i!==null;i=$y(i))for(let s=an;s<i.length;s++){let o=i[s];I_(o,n)}}function ES(t){for(let n=qy(t);n!==null;n=$y(n)){if(!(n[ge]&gf.HasTransplantedViews))continue;let i=n[mo];for(let s=0;s<i.length;s++){let o=i[s],c=o[Kt];xC(o)}}}function SS(t,n,i){let s=wi(n,t);I_(s,i)}function I_(t,n){_f(t)&&Pd(t,n)}function Pd(t,n){let s=t[Ce],o=t[ge],c=t[Qi],h=!!(n===0&&o&16);if(h||=!!(o&64&&n===0),h||=!!(o&1024),h||=!!(c?.dirty&&$h(c)),c&&(c.dirty=!1),t[ge]&=-9217,h)xS(s,t,s.template,t[on]);else if(o&8192){T_(t,1);let f=s.components;f!==null&&M_(t,f,1)}}function M_(t,n,i){for(let s=0;s<n.length;s++)SS(t,n[s],i)}function Uf(t){for(t[fs].changeDetectionScheduler?.notify();t;){t[ge]|=64;let n=va(t);if(hC(t)&&!n)return t;t=n}return null}var Ji=class{get rootNodes(){let n=this._lView,i=n[Ce];return rl(i,n,i.firstChild,[])}constructor(n,i,s=!0){this._lView=n,this._cdRefInjectingView=i,this.notifyErrorHandler=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[on]}set context(n){this._lView[on]=n}get destroyed(){return(this._lView[ge]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[Kt];if(Ks(n)){let i=n[Ju],s=i?i.indexOf(this):-1;s>-1&&(_a(n,s),Xu(i,s))}this._attachedToViewContainer=!1}bl(this._lView[Ce],this._lView)}onDestroy(n){hy(this._lView,n)}markForCheck(){Uf(this._cdRefInjectingView||this._lView)}detach(){this._lView[ge]&=-129}reattach(){Ed(this._lView),this._lView[ge]|=128}detectChanges(){this._lView[ge]|=1024,S_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Xy(this._lView[Ce],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=n,Ed(this._lView)}},ba=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=MS;let t=n;return t})(),TS=ba,IS=class extends TS{constructor(n,i,s){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=s}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,s){let o=Sl(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:s});return new Ji(o)}};function MS(){return Hf(Fn(),Xe())}function Hf(t,n){return t.type&4?new IS(n,t,wo(t,n)):null}var cF=new RegExp(`^(\\d+)*(${fE}|${dE})*(.*)`);var AS=()=>null;function Da(t,n){return AS(t,n)}var Ld=class{},Vd=class{},ol=class{};function OS(t){let n=Error(`No component factory found for ${kn(t)}.`);return n[kS]=t,n}var kS="ngComponent";var jd=class{resolveComponentFactory(n){throw OS(n)}},Il=(()=>{let n=class n{};n.NULL=new jd;let t=n;return t})(),xa=class{},Do=(()=>{let n=class n{constructor(){this.destroyNode=null}};n.__NG_ELEMENT_ID__=()=>RS();let t=n;return t})();function RS(){let t=Xe(),n=Fn(),i=wi(n.index,t);return(Wi(i)?i:t)[Jt]}var NS=(()=>{let n=class n{};n.\u0275prov=ve({token:n,providedIn:"root",factory:()=>null});let t=n;return t})(),fd={};var bv=new Set;function Ml(t){bv.has(t)||(bv.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Dv(...t){}function FS(){let t=typeof zi.requestAnimationFrame=="function",n=zi[t?"requestAnimationFrame":"setTimeout"],i=zi[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){let s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);let o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}var It=class t{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tt(!1),this.onMicrotaskEmpty=new Tt(!1),this.onStable=new Tt(!1),this.onError=new Tt(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!s&&i,o.shouldCoalesceRunChangeDetection=s,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=FS().nativeRequestAnimationFrame,VS(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new _e(909,!1)}run(n,i,s){return this._inner.run(n,i,s)}runTask(n,i,s,o){let c=this._inner,h=c.scheduleEventTask("NgZoneEvent: "+o,n,PS,Dv,Dv);try{return c.runTask(h,i,s)}finally{c.cancelTask(h)}}runGuarded(n,i,s){return this._inner.runGuarded(n,i,s)}runOutsideAngular(n){return this._outer.run(n)}},PS={};function zf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function LS(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(zi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Bd(t),t.isCheckStableRunning=!0,zf(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Bd(t))}function VS(t){let n=()=>{LS(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,s,o,c,h,f)=>{if(jS(f))return i.invokeTask(o,c,h,f);try{return xv(t),i.invokeTask(o,c,h,f)}finally{(t.shouldCoalesceEventChangeDetection&&c.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&n(),Cv(t)}},onInvoke:(i,s,o,c,h,f,m)=>{try{return xv(t),i.invoke(o,c,h,f,m)}finally{t.shouldCoalesceRunChangeDetection&&n(),Cv(t)}},onHasTask:(i,s,o,c)=>{i.hasTask(o,c),s===o&&(c.change=="microTask"?(t._hasPendingMicrotasks=c.microTask,Bd(t),zf(t)):c.change=="macroTask"&&(t.hasPendingMacrotasks=c.macroTask))},onHandleError:(i,s,o,c)=>(i.handleError(o,c),t.runOutsideAngular(()=>t.onError.emit(c)),!1)})}function Bd(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function xv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Cv(t){t._nesting--,zf(t)}function jS(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var A_=(()=>{let n=class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let s=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of s)o()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};n.\u0275prov=ve({token:n,providedIn:"root",factory:()=>new n});let t=n;return t})();function qd(t,n,i){let s=i?t.styles:null,o=i?t.classes:null,c=0;if(n!==null)for(let h=0;h<n.length;h++){let f=n[h];if(typeof f=="number")c=f;else if(c==1)o=Kg(o,f);else if(c==2){let m=f,_=n[++h];s=Kg(s,m+": "+_+";")}}i?t.styles=s:t.stylesWithoutHost=s,i?t.classes=o:t.classesWithoutHost=o}var al=class extends Il{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let i=Zi(n);return new Ca(i,this.ngModule)}};function Ev(t){let n=[];for(let i in t){if(!t.hasOwnProperty(i))continue;let s=t[i];s!==void 0&&n.push({propName:Array.isArray(s)?s[0]:s,templateName:i})}return n}function BS(t){let n=t.toLowerCase();return n==="svg"?mC:n==="math"?gC:null}var $d=class{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,s){s=fl(s);let o=this.injector.get(n,fd,s);return o!==fd||i===fd?o:this.parentInjector.get(n,i,s)}},Ca=class extends ol{get inputs(){let n=this.componentDef,i=n.inputTransforms,s=Ev(n.inputs);if(i!==null)for(let o of s)i.hasOwnProperty(o.propName)&&(o.transform=i[o.propName]);return s}get outputs(){return Ev(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=Gx(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,s,o){let c=Pe(null);try{o=o||this.ngModule;let h=o instanceof Wn?o:o?.injector;h&&this.componentDef.getStandaloneInjector!==null&&(h=this.componentDef.getStandaloneInjector(h)||h);let f=h?new $d(n,h):n,m=f.get(xa,null);if(m===null)throw new _e(407,!1);let _=f.get(NS,null),x=f.get(A_,null),I=f.get(Ld,null),L={rendererFactory:m,sanitizer:_,inlineEffectRunner:null,afterRenderEventManager:x,changeDetectionScheduler:I},z=m.createRenderer(null,this.componentDef),he=this.componentDef.selectors[0][0]||"div",pe=s?HE(z,s,this.componentDef.encapsulation,f):Yy(z,he,BS(he)),Fe=512;this.componentDef.signals?Fe|=4096:this.componentDef.onPush||(Fe|=16);let Oe=null;pe!==null&&(Oe=Rf(pe,f,!0));let bt=Bf(0,null,null,1,0,null,null,null,null,null,null),Dt=Cl(null,bt,null,Fe,null,null,L,z,f,null,Oe);Df(Dt);let gt,wn;try{let Ut=this.componentDef,vt,Vn=null;Ut.findHostDirectiveDefs?(vt=[],Vn=new Map,Ut.findHostDirectiveDefs(Ut,vt,Vn),vt.push(Ut)):vt=[Ut];let bn=qS(Dt,pe),gs=$S(bn,pe,Ut,vt,Dt,L,z);wn=yf(bt,Rn),pe&&zS(z,Ut,pe,s),i!==void 0&&WS(wn,this.ngContentSelectors,i),gt=HS(gs,Ut,vt,Vn,Dt,[GS]),$f(bt,Dt,null)}finally{xf()}return new Ud(this.componentType,gt,wo(wn,Dt),Dt,wn)}finally{Pe(c)}}},Ud=class extends Vd{constructor(n,i,s,o,c){super(),this.location=s,this._rootLView=o,this._tNode=c,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new Ji(o,void 0,!1),this.componentType=n}setInput(n,i){let s=this._tNode.inputs,o;if(s!==null&&(o=s[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;let c=this._rootLView;qf(c[Ce],c,o,n,i),this.previousInputValues.set(n,i);let h=wi(this._tNode.index,c);Uf(h)}}get injector(){return new Gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function qS(t,n){let i=t[Ce],s=Rn;return t[s]=n,ka(i,s,2,"#host",null)}function $S(t,n,i,s,o,c,h){let f=o[Ce];US(s,t,n,h);let m=null;n!==null&&(m=Rf(n,o[po]));let _=c.rendererFactory.createRenderer(n,i),x=16;i.signals?x=4096:i.onPush&&(x=64);let I=Cl(o,f_(i),null,x,o[t.index],t,c,_,null,null,m);return f.firstCreatePass&&Nd(f,t,s.length-1),El(o,I),o[t.index]=I}function US(t,n,i,s){for(let o of t)n.mergedAttrs=df(n.mergedAttrs,o.hostAttrs);n.mergedAttrs!==null&&(qd(n,n.mergedAttrs,!0),i!==null&&r_(s,i,n))}function HS(t,n,i,s,o,c){let h=Fn(),f=o[Ce],m=Zn(h,o);m_(f,o,h,i,null,s);for(let x=0;x<i.length;x++){let I=h.directiveStart+x,L=go(o,f,I,h);Ki(L,o)}g_(f,o,h),m&&Ki(m,o);let _=go(o,f,h.directiveStart+h.componentOffset,h);if(t[on]=o[on]=_,c!==null)for(let x of c)x(_,n);return l_(f,h,o),_}function zS(t,n,i,s){if(s)_d(t,i,["ng-version","17.3.8"]);else{let{attrs:o,classes:c}=Zx(n.selectors[0]);o&&_d(t,i,o),c&&c.length>0&&i_(t,i,c.join(" "))}}function WS(t,n,i){let s=t.projection=[];for(let o=0;o<n.length;o++){let c=i[o];s.push(c!=null?Array.from(c):null)}}function GS(){let t=Fn();Sf(Xe()[Ce],t)}var xo=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=ZS;let t=n;return t})();function ZS(){let t=Fn();return k_(t,Xe())}var QS=xo,O_=class extends QS{constructor(n,i,s){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=s}get element(){return wo(this._hostTNode,this._hostLView)}get injector(){return new Gi(this._hostTNode,this._hostLView)}get parentInjector(){let n=Tf(this._hostTNode,this._hostLView);if(Sy(n)){let i=nl(n,this._hostLView),s=tl(n),o=i[Ce].data[s+8];return new Gi(o,i)}else return new Gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let i=Sv(this._lContainer);return i!==null&&i[n]||null}get length(){return this._lContainer.length-an}createEmbeddedView(n,i,s){let o,c;typeof s=="number"?o=s:s!=null&&(o=s.index,c=s.injector);let h=Da(this._lContainer,n.ssrId),f=n.createEmbeddedViewImpl(i||{},c,h);return this.insertImpl(f,o,wa(this._hostTNode,h)),f}createComponent(n,i,s,o,c){let h=n&&!lC(n),f;if(h)f=i;else{let he=i||{};f=he.index,s=he.injector,o=he.projectableNodes,c=he.environmentInjector||he.ngModuleRef}let m=h?n:new Ca(Zi(n)),_=s||this.parentInjector;if(!c&&m.ngModule==null){let pe=(h?_:this.parentInjector).get(Wn,null);pe&&(c=pe)}let x=Zi(m.componentType??{}),I=Da(this._lContainer,x?.id??null),L=I?.firstChild??null,z=m.create(_,o,L,c);return this.insertImpl(z.hostView,f,wa(this._hostTNode,I)),z}insert(n,i){return this.insertImpl(n,i,!0)}insertImpl(n,i,s){let o=n._lView;if(DC(o)){let f=this.indexOf(n);if(f!==-1)this.detach(f);else{let m=o[Kt],_=new O_(m,m[Nn],m[Kt]);_.detach(_.indexOf(n))}}let c=this._adjustIndex(i),h=this._lContainer;return Tl(h,o,c,s),n.attachToViewContainerRef(),qv(pd(h),c,n),n}move(n,i){return this.insert(n,i)}indexOf(n){let i=Sv(this._lContainer);return i!==null?i.indexOf(n):-1}remove(n){let i=this._adjustIndex(n,-1),s=_a(this._lContainer,i);s&&(Xu(pd(this._lContainer),i),bl(s[Ce],s))}detach(n){let i=this._adjustIndex(n,-1),s=_a(this._lContainer,i);return s&&Xu(pd(this._lContainer),i)!=null?new Ji(s):null}_adjustIndex(n,i=0){return n??this.length+i}};function Sv(t){return t[Ju]}function pd(t){return t[Ju]||(t[Ju]=[])}function k_(t,n){let i,s=n[t.index];return Ks(s)?i=s:(i=v_(s,n,null,t),n[t.index]=i,El(n,i)),XS(i,n,t,s),new O_(i,t,n)}function YS(t,n){let i=t[Jt],s=i.createComment(""),o=Zn(n,t),c=Lf(i,o);return il(i,c,s,NE(i,o),!1),s}var XS=eT,KS=()=>!1;function JS(t,n,i){return KS(t,n,i)}function eT(t,n,i,s){if(t[Yi])return;let o;i.type&8?o=Os(s):o=YS(n,i),t[Yi]=o}var Hd=class t{constructor(n){this.queryList=n,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},zd=class t{constructor(n=[]){this.queries=n}createEmbeddedView(n){let i=n.queries;if(i!==null){let s=n.contentQueries!==null?n.contentQueries[0]:i.length,o=[];for(let c=0;c<s;c++){let h=i.getByIndex(c),f=this.queries[h.indexInDeclarationView];o.push(f.clone())}return new t(o)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)Wf(n,i).matches!==null&&this.queries[i].setDirty()}},Wd=class{constructor(n,i,s=null){this.flags=i,this.read=s,typeof n=="string"?this.predicate=cT(n):this.predicate=n}},Gd=class t{constructor(n=[]){this.queries=n}elementStart(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let s=0;s<this.length;s++){let o=i!==null?i.length:0,c=this.getByIndex(s).embeddedTView(n,o);c&&(c.indexInDeclarationView=s,i!==null?i.push(c):i=[c])}return i!==null?new t(i):null}template(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},Zd=class t{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new t(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let i=this._declarationNodeIndex,s=n.parent;for(;s!==null&&s.type&8&&s.index!==i;)s=s.parent;return i===(s!==null?s.index:-1)}return this._appliesToNextNode}matchTNode(n,i){let s=this.metadata.predicate;if(Array.isArray(s))for(let o=0;o<s.length;o++){let c=s[o];this.matchTNodeWithReadOption(n,i,tT(i,c)),this.matchTNodeWithReadOption(n,i,Wu(i,n,c,!1,!1))}else s===ba?i.type&4&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Wu(i,n,s,!1,!1))}matchTNodeWithReadOption(n,i,s){if(s!==null){let o=this.metadata.read;if(o!==null)if(o===ks||o===xo||o===ba&&i.type&4)this.addMatch(i.index,-2);else{let c=Wu(i,n,o,!1,!1);c!==null&&this.addMatch(i.index,c)}else this.addMatch(i.index,s)}}addMatch(n,i){this.matches===null?this.matches=[n,i]:this.matches.push(n,i)}};function tT(t,n){let i=t.localNames;if(i!==null){for(let s=0;s<i.length;s+=2)if(i[s]===n)return i[s+1]}return null}function nT(t,n){return t.type&11?wo(t,n):t.type&4?Hf(t,n):null}function sT(t,n,i,s){return i===-1?nT(n,t):i===-2?iT(t,n,s):go(t,t[Ce],i,n)}function iT(t,n,i){if(i===ks)return wo(n,t);if(i===ba)return Hf(n,t);if(i===xo)return k_(n,t)}function R_(t,n,i,s){let o=n[Qs].queries[s];if(o.matches===null){let c=t.data,h=i.matches,f=[];for(let m=0;h!==null&&m<h.length;m+=2){let _=h[m];if(_<0)f.push(null);else{let x=c[_];f.push(sT(n,x,h[m+1],i.metadata.read))}}o.matches=f}return o.matches}function Qd(t,n,i,s){let o=t.queries.getByIndex(i),c=o.matches;if(c!==null){let h=R_(t,n,o,i);for(let f=0;f<c.length;f+=2){let m=c[f];if(m>0)s.push(h[f/2]);else{let _=c[f+1],x=n[-m];for(let I=an;I<x.length;I++){let L=x[I];L[Ta]===L[Kt]&&Qd(L[Ce],L,_,s)}if(x[mo]!==null){let I=x[mo];for(let L=0;L<I.length;L++){let z=I[L];Qd(z[Ce],z,_,s)}}}}}return s}function rT(t,n){return t[Qs].queries[n].queryList}function oT(t,n,i){let s=new Od((i&4)===4);return GE(t,n,s,s.destroy),(n[Qs]??=new zd).queries.push(new Hd(s))-1}function aT(t,n,i,s){let o=ps();if(o.firstCreatePass){let c=Fn();uT(o,new Wd(n,i,s),c.index),lT(o,t),(i&2)===2&&(o.staticContentQueries=!0)}return oT(o,Xe(),i)}function cT(t){return t.split(",").map(n=>n.trim())}function uT(t,n,i){t.queries===null&&(t.queries=new Gd),t.queries.track(new Zd(n,i))}function lT(t,n){let i=t.contentQueries||(t.contentQueries=[]),s=i.length?i[i.length-1]:-1;n!==s&&i.push(t.queries.length-1,n)}function Wf(t,n){return t.queries.getByIndex(n)}function hT(t,n){let i=t[Ce],s=Wf(i,n);return s.crossesNgTemplate?Qd(i,t,n,[]):R_(i,t,s,n)}function Gf(t){let n=t.inputConfig,i={};for(let s in n)if(n.hasOwnProperty(s)){let o=n[s];Array.isArray(o)&&o[3]&&(i[s]=o[3])}t.inputTransforms=i}var _i=class{},Ea=class{};var Yd=class extends _i{constructor(n,i,s){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new al(this);let o=Xv(n);this._bootstrapComponents=Qy(o.bootstrap),this._r3Injector=Py(n,i,[{provide:_i,useValue:this},{provide:Il,useValue:this.componentFactoryResolver},...s],kn(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},Xd=class extends Ea{constructor(n){super(),this.moduleType=n}create(n){return new Yd(this.moduleType,n,[])}};var cl=class extends _i{constructor(n){super(),this.componentFactoryResolver=new al(this),this.instance=null;let i=new fa([...n.providers,{provide:_i,useValue:this},{provide:Il,useValue:this.componentFactoryResolver}],n.parent||mf(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function Zf(t,n,i=null){return new cl({providers:t,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}var Al=(()=>{let n=class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Nt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function Ra(t,n,i){let s=t[n];return Object.is(s,i)?!1:(t[n]=i,!0)}function dT(t){return(t.flags&32)===32}function fT(t,n,i,s,o,c,h,f,m){let _=n.consts,x=ka(n,t,4,h||null,el(_,f));p_(n,i,x,el(_,m)),Sf(n,x);let I=x.tView=Bf(2,x,s,o,c,n.directiveRegistry,n.pipeRegistry,null,n.schemas,_,null);return n.queries!==null&&(n.queries.template(n,x),I.queries=n.queries.embeddedTView(x)),x}function Sa(t,n,i,s,o,c,h,f){let m=Xe(),_=ps(),x=t+Rn,I=_.firstCreatePass?fT(x,_,m,n,i,s,o,c,h):_.data[x];Ma(I,!1);let L=pT(_,m,I,t);Cf()&&Vf(_,m,L,I),Ki(L,m);let z=v_(L,m,L,I);return m[x]=z,El(m,z),JS(z,I,m),vf(I)&&h_(_,m,I),h!=null&&d_(m,I,f),Sa}var pT=mT;function mT(t,n,i,s){return Ef(!0),n[Jt].createComment("")}function Qf(t,n,i,s){let o=Xe(),c=Aa();if(Ra(o,c,n)){let h=ps(),f=xy();uS(f,o,t,n,i,s)}return Qf}function gT(t,n,i,s){return Ra(t,Aa(),i)?n+dl(i)+s:xl}function Ge(t,n,i){let s=Xe(),o=Aa();if(Ra(s,o,n)){let c=ps(),h=xy();XE(c,h,s,t,n,s[Jt],i,!1)}return Ge}function Tv(t,n,i,s,o){let c=n.inputs,h=o?"class":"style";qf(t,i,c[h],h,s)}var Kd=class{destroy(n){}updateValue(n,i){}swap(n,i){let s=Math.min(n,i),o=Math.max(n,i),c=this.detach(o);if(o-s>1){let h=this.detach(s);this.attach(s,c),this.attach(o,h)}else this.attach(s,c)}move(n,i){this.attach(i,this.detach(n))}};function md(t,n,i,s,o){return t===i&&Object.is(n,s)?1:Object.is(o(t,n),o(i,s))?-1:0}function vT(t,n,i){let s,o,c=0,h=t.length-1;if(Array.isArray(n)){let f=n.length-1;for(;c<=h&&c<=f;){let m=t.at(c),_=n[c],x=md(c,m,c,_,i);if(x!==0){x<0&&t.updateValue(c,_),c++;continue}let I=t.at(h),L=n[f],z=md(h,I,f,L,i);if(z!==0){z<0&&t.updateValue(h,L),h--,f--;continue}let he=i(c,m),pe=i(h,I),Fe=i(c,_);if(Object.is(Fe,pe)){let Oe=i(f,L);Object.is(Oe,he)?(t.swap(c,h),t.updateValue(h,L),f--,h--):t.move(h,c),t.updateValue(c,_),c++;continue}if(s??=new ul,o??=Mv(t,c,h,i),Jd(t,s,c,Fe))t.updateValue(c,_),c++,h++;else if(o.has(Fe))s.set(he,t.detach(c)),h--;else{let Oe=t.create(c,n[c]);t.attach(c,Oe),c++,h++}}for(;c<=f;)Iv(t,s,i,c,n[c]),c++}else if(n!=null){let f=n[Symbol.iterator](),m=f.next();for(;!m.done&&c<=h;){let _=t.at(c),x=m.value,I=md(c,_,c,x,i);if(I!==0)I<0&&t.updateValue(c,x),c++,m=f.next();else{s??=new ul,o??=Mv(t,c,h,i);let L=i(c,x);if(Jd(t,s,c,L))t.updateValue(c,x),c++,h++,m=f.next();else if(!o.has(L))t.attach(c,t.create(c,x)),c++,h++,m=f.next();else{let z=i(c,_);s.set(z,t.detach(c)),h--}}}for(;!m.done;)Iv(t,s,i,t.length,m.value),m=f.next()}for(;c<=h;)t.destroy(t.detach(h--));s?.forEach(f=>{t.destroy(f)})}function Jd(t,n,i,s){return n!==void 0&&n.has(s)?(t.attach(i,n.get(s)),n.delete(s),!0):!1}function Iv(t,n,i,s,o){if(Jd(t,n,s,i(s,o)))t.updateValue(s,o);else{let c=t.create(s,o);t.attach(s,c)}}function Mv(t,n,i,s){let o=new Set;for(let c=n;c<=i;c++)o.add(s(c,t.at(c)));return o}var ul=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let i=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(i)?(this.kvMap.set(n,this._vMap.get(i)),this._vMap.delete(i)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,i){if(this.kvMap.has(n)){let s=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(s);)s=o.get(s);o.set(s,i)}else this.kvMap.set(n,i)}forEach(n){for(let[i,s]of this.kvMap)if(n(s,i),this._vMap!==void 0){let o=this._vMap;for(;o.has(s);)s=o.get(s),n(s,i)}}};function N_(t,n,i){Ml("NgControlFlow");let s=Xe(),o=Aa(),c=sf(s,Rn+t),h=0;if(Ra(s,o,n)){let f=Pe(null);try{if(x_(c,h),n!==-1){let m=rf(s[Ce],Rn+n),_=Da(c,m.tView.ssrId),x=Sl(s,m,i,{dehydratedView:_});Tl(c,x,h,wa(m,_))}}finally{Pe(f)}}else{let f=D_(c,h);f!==void 0&&(f[on]=i)}}var ef=class{constructor(n,i,s){this.lContainer=n,this.$implicit=i,this.$index=s}get $count(){return this.lContainer.length-an}};function Rs(t,n){return n}var tf=class{constructor(n,i,s){this.hasEmptyBlock=n,this.trackByFn=i,this.liveCollection=s}};function Ns(t,n,i,s,o,c,h,f,m,_,x,I,L){Ml("NgControlFlow");let z=m!==void 0,he=Xe(),pe=f?h.bind(he[Gn][on]):h,Fe=new tf(z,pe);he[Rn+t]=Fe,Sa(t+1,n,i,s,o,c),z&&Sa(t+2,m,_,x,I,L)}var nf=class extends Kd{constructor(n,i,s){super(),this.lContainer=n,this.hostLView=i,this.templateTNode=s,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-an}at(n){return this.getLView(n)[on].$implicit}attach(n,i){let s=i[fo];this.needsIndexUpdate||=n!==this.length,Tl(this.lContainer,i,n,wa(this.templateTNode,s))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,yT(this.lContainer,n)}create(n,i){let s=Da(this.lContainer,this.templateTNode.tView.ssrId);return Sl(this.hostLView,this.templateTNode,new ef(this.lContainer,i,n),{dehydratedView:s})}destroy(n){bl(n[Ce],n)}updateValue(n,i){this.getLView(n)[on].$implicit=i}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[on].$index=n}getLView(n){return _T(this.lContainer,n)}};function Fs(t){let n=Pe(null),i=yl();try{let s=Xe(),o=s[Ce],c=s[i];if(c.liveCollection===void 0){let f=i+1,m=sf(s,f),_=rf(o,f);c.liveCollection=new nf(m,s,_)}else c.liveCollection.reset();let h=c.liveCollection;if(vT(h,t,c.trackByFn),h.updateIndexes(),c.hasEmptyBlock){let f=Aa(),m=h.length===0;if(Ra(s,f,m)){let _=i+2,x=sf(s,_);if(m){let I=rf(o,_),L=Da(x,I.tView.ssrId),z=Sl(s,I,void 0,{dehydratedView:L});Tl(x,z,0,wa(I,L))}else x_(x,0)}}}finally{Pe(n)}}function sf(t,n){return t[n]}function yT(t,n){return _a(t,n)}function _T(t,n){return D_(t,n)}function rf(t,n){return yf(t,n)}function wT(t,n,i,s,o,c){let h=n.consts,f=el(h,o),m=ka(n,t,2,s,f);return p_(n,i,m,el(h,c)),m.attrs!==null&&qd(m,m.attrs,!1),m.mergedAttrs!==null&&qd(m,m.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,m),m}function X(t,n,i,s){let o=Xe(),c=ps(),h=Rn+t,f=o[Jt],m=c.firstCreatePass?wT(h,c,o,n,i,s):c.data[h],_=bT(c,o,m,f,n,t);o[h]=_;let x=vf(m);return Ma(m,!0),r_(f,_,m),!dT(m)&&Cf()&&Vf(c,o,_,m),SC()===0&&Ki(_,o),TC(),x&&(h_(c,o,m),l_(c,m,o)),s!==null&&d_(o,m),X}function ne(){let t=Fn();my()?gy():(t=t.parent,Ma(t,!1));let n=t;MC(n)&&AC(),IC();let i=ps();return i.firstCreatePass&&(Sf(i,t),ry(t)&&i.queries.elementEnd(t)),n.classesWithoutHost!=null&&UC(n)&&Tv(i,n,Xe(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&HC(n)&&Tv(i,n,Xe(),n.stylesWithoutHost,!1),ne}function Js(t,n,i,s){return X(t,n,i,s),ne(),Js}var bT=(t,n,i,s,o,c)=>(Ef(!0),Yy(s,o,jC()));function Qn(){return Xe()}var ll="en-US";var DT=ll;function xT(t){typeof t=="string"&&(DT=t.toLowerCase().replace(/_/g,"-"))}function Ae(t,n,i,s){let o=Xe(),c=ps(),h=Fn();return ET(c,o,o[Jt],h,t,n,s),Ae}function CT(t,n,i,s){let o=t.cleanup;if(o!=null)for(let c=0;c<o.length-1;c+=2){let h=o[c];if(h===i&&o[c+1]===s){let f=n[pa],m=o[c+2];return f.length>m?f[m]:null}typeof h=="string"&&(c+=2)}return null}function ET(t,n,i,s,o,c,h){let f=vf(s),_=t.firstCreatePass&&w_(t),x=n[on],I=__(n),L=!0;if(s.type&3||h){let pe=Zn(s,n),Fe=h?h(pe):pe,Oe=I.length,bt=h?gt=>h(Os(gt[s.index])):s.index,Dt=null;if(!h&&f&&(Dt=CT(t,n,o,s.index)),Dt!==null){let gt=Dt.__ngLastListenerFn__||Dt;gt.__ngNextListenerFn__=c,Dt.__ngLastListenerFn__=c,L=!1}else{c=Ov(s,n,x,c,!1);let gt=i.listen(Fe,o,c);I.push(c,gt),_&&_.push(o,bt,Oe,Oe+1)}}else c=Ov(s,n,x,c,!1);let z=s.outputs,he;if(L&&z!==null&&(he=z[o])){let pe=he.length;if(pe)for(let Fe=0;Fe<pe;Fe+=2){let Oe=he[Fe],bt=he[Fe+1],wn=n[Oe][bt].subscribe(c),Ut=I.length;I.push(c,wn),_&&_.push(o,s.index,Ut,-(Ut+1))}}}function Av(t,n,i,s){let o=Pe(null);try{return Is(6,n,i),i(s)!==!1}catch(c){return b_(t,c),!1}finally{Is(7,n,i),Pe(o)}}function Ov(t,n,i,s,o){return function c(h){if(h===Function)return s;let f=t.componentOffset>-1?wi(t.index,n):n;Uf(f);let m=Av(n,i,s,h),_=c.__ngNextListenerFn__;for(;_;)m=Av(n,i,_,h)&&m,_=_.__ngNextListenerFn__;return o&&m===!1&&h.preventDefault(),m}}function ms(t=1){return VC(t)}function ST(t,n){let i=null,s=$x(t);for(let o=0;o<n.length;o++){let c=n[o];if(c==="*"){i=o;continue}if(s===null?Gv(t,c,!0):zx(s,c))return o}return i}function Ol(t){let n=Xe()[Gn][Nn];if(!n.projection){let i=t?t.length:1,s=n.projection=Fx(i,null),o=s.slice(),c=n.child;for(;c!==null;){let h=t?ST(c,t):0;h!==null&&(o[h]?o[h].projectionNext=c:s[h]=c,o[h]=c),c=c.next}}}function kl(t,n=0,i){let s=Xe(),o=ps(),c=ka(o,Rn+t,16,null,i||null);c.projection===null&&(c.projection=n),gy(),(!s[fo]||fy())&&(c.flags&32)!==32&&VE(o,s,c)}function F_(t,n,i,s){aT(t,n,i,s)}function P_(t){let n=Xe(),i=ps(),s=vy();bf(s+1);let o=Wf(i,s);if(t.dirty&&bC(n)===((o.metadata.flags&2)===2)){if(o.matches===null)t.reset([]);else{let c=hT(n,s);t.reset(c,iE),t.notifyOnChanges()}return!0}return!1}function L_(){return rT(Xe(),vy())}function Pt(t){let n=kC();return wC(n,Rn+t)}function Se(t,n=""){let i=Xe(),s=ps(),o=t+Rn,c=s.firstCreatePass?ka(s,o,1,n,null):s.data[o],h=TT(s,i,c,n,t);i[o]=h,Cf()&&Vf(s,i,h,c),Ma(c,!1)}var TT=(t,n,i,s,o)=>(Ef(!0),xE(n[Jt],s));function Yn(t){return nr("",t,""),Yn}function nr(t,n,i){let s=Xe(),o=gT(s,t,n,i);return o!==xl&&fS(s,yl(),o),nr}var IT=(()=>{let n=class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){let o=ey(!1,s.type),c=o.length>0?Zf([o],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,c)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(let s of this.cachedInjectors.values())s!==null&&s.destroy()}finally{this.cachedInjectors.clear()}}};n.\u0275prov=ve({token:n,providedIn:"environment",factory:()=>new n(Ue(Wn))});let t=n;return t})();function At(t){Ml("NgStandalone"),t.getStandaloneInjector=n=>n.get(IT).getOrCreateStandaloneInjector(t)}var Rl=(()=>{let n=class n{log(s){console.log(s)}warn(s){console.warn(s)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"platform"});let t=n;return t})();var V_=new $e("");function Na(t){return!!t&&typeof t.then=="function"}function j_(t){return!!t&&typeof t.subscribe=="function"}var B_=new $e(""),q_=(()=>{let n=class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,o)=>{this.resolve=s,this.reject=o}),this.appInits=te(B_,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let s=[];for(let c of this.appInits){let h=c();if(Na(h))s.push(h);else if(j_(h)){let f=new Promise((m,_)=>{h.subscribe({complete:m,error:_})});s.push(f)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{o()}).catch(c=>{this.reject(c)}),s.length===0&&o(),this.initialized=!0}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),Yf=new $e("");function MT(){xg(()=>{throw new _e(600,!1)})}function AT(t){return t.isBoundToModule}function OT(t,n,i){try{let s=i();return Na(s)?s.catch(o=>{throw n.runOutsideAngular(()=>t.handleError(o)),o}):s}catch(s){throw n.runOutsideAngular(()=>t.handleError(s)),s}}var Fa=(()=>{let n=class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=te(Ly),this.afterRenderEffectManager=te(A_),this.externalTestViews=new Set,this.beforeRender=new rn,this.afterTick=new rn,this.componentTypes=[],this.components=[],this.isStable=te(Al).hasPendingTasks.pipe(qe(s=>!s)),this._injector=te(Wn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,o){let c=s instanceof ol;if(!this._injector.get(q_).done){let z=!c&&Yv(s),he=!1;throw new _e(405,he)}let f;c?f=s:f=this._injector.get(Il).resolveComponentFactory(s),this.componentTypes.push(f.componentType);let m=AT(f)?void 0:this._injector.get(_i),_=o||f.selector,x=f.create(Oa.NULL,[],_,m),I=x.location.nativeElement,L=x.injector.get(V_,null);return L?.registerApplication(I),x.onDestroy(()=>{this.detachView(x.hostView),gd(this.components,x),L?.unregisterApplication(I)}),this._loadComponent(x),x}tick(){this._tick(!0)}_tick(s){if(this._runningTick)throw new _e(101,!1);let o=Pe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(s)}catch(c){this.internalErrorHandler(c)}finally{this.afterTick.next(),this._runningTick=!1,Pe(o)}}detectChangesInAttachedViews(s){let o=0,c=this.afterRenderEffectManager;for(;;){if(o===E_)throw new _e(103,!1);if(s){let h=o===0;this.beforeRender.next(h);for(let{_lView:f,notifyErrorHandler:m}of this._views)kT(f,h,m)}if(o++,c.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:h})=>of(h))&&(c.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:h})=>of(h))))break}}attachView(s){let o=s;this._views.push(o),o.attachToAppRef(this)}detachView(s){let o=s;gd(this._views,o),o.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);let o=this._injector.get(Yf,[]);[...this._bootstrapListeners,...o].forEach(c=>c(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>gd(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new _e(406,!1);let s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function gd(t,n){let i=t.indexOf(n);i>-1&&t.splice(i,1)}function kT(t,n,i){!n&&!of(t)||RT(t,i,n)}function of(t){return wf(t)}function RT(t,n,i){let s;i?(s=0,t[ge]|=1024):t[ge]&64?s=0:s=1,S_(t,n,s)}var af=class{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}},Xf=(()=>{let n=class n{compileModuleSync(s){return new Xd(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){let o=this.compileModuleSync(s),c=Xv(s),h=Qy(c.declarations).reduce((f,m)=>{let _=Zi(m);return _&&f.push(new Ca(_)),f},[]);return new af(o,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var NT=(()=>{let n=class n{constructor(){this.zone=te(It),this.applicationRef=te(Fa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function FT(t){return[{provide:It,useFactory:t},{provide:ho,multi:!0,useFactory:()=>{let n=te(NT,{optional:!0});return()=>n.initialize()}},{provide:ho,multi:!0,useFactory:()=>{let n=te(jT);return()=>{n.initialize()}}},{provide:Ly,useFactory:PT}]}function PT(){let t=te(It),n=te(Ys);return i=>t.runOutsideAngular(()=>n.handleError(i))}function LT(t){let n=FT(()=>new It(VT(t)));return pl([[],n])}function VT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var jT=(()=>{let n=class n{constructor(){this.subscription=new Rt,this.initialized=!1,this.zone=te(It),this.pendingTasks=te(Al)}initialize(){if(this.initialized)return;this.initialized=!0;let s=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(s=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{It.assertNotInAngularZone(),queueMicrotask(()=>{s!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(s),s=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{It.assertInAngularZone(),s??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function BT(){return typeof $localize<"u"&&$localize.locale||ll}var Kf=new $e("",{providedIn:"root",factory:()=>te(Kf,Me.Optional|Me.SkipSelf)||BT()});var $_=new $e("");var Zu=null;function qT(t=[],n){return Oa.create({name:n,providers:[{provide:ml,useValue:"platform"},{provide:$_,useValue:new Set([()=>Zu=null])},...t]})}function $T(t=[]){if(Zu)return Zu;let n=qT(t);return Zu=n,MT(),UT(n),n}function UT(t){t.get(Of,null)?.forEach(i=>i())}var Co=(()=>{let n=class n{};n.__NG_ELEMENT_ID__=HT;let t=n;return t})();function HT(t){return zT(Fn(),Xe(),(t&16)===16)}function zT(t,n,i){if(vl(t)&&!i){let s=wi(t.index,n);return new Ji(s,s)}else if(t.type&47){let s=n[Gn];return new Ji(s,n)}return null}function U_(t){try{let{rootComponent:n,appProviders:i,platformProviders:s}=t,o=$T(s),c=[LT(),...i||[]],f=new cl({providers:c,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,m=f.get(It);return m.run(()=>{f.resolveInjectorInitializers();let _=f.get(Ys,null),x;m.runOutsideAngular(()=>{x=m.onError.subscribe({next:z=>{_.handleError(z)}})});let I=()=>f.destroy(),L=o.get($_);return L.add(I),f.onDestroy(()=>{x.unsubscribe(),L.delete(I)}),OT(_,m,()=>{let z=f.get(q_);return z.runInitializers(),z.donePromise.then(()=>{let he=f.get(Kf,ll);xT(he||ll);let pe=f.get(Fa);return n!==void 0&&pe.bootstrap(n),pe})})})}catch(n){return Promise.reject(n)}}function Pa(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var Y_=null;function Eo(){return Y_}function X_(t){Y_??=t}var Nl=class{};var Xn=new $e(""),K_=(()=>{let n=class n{historyGo(s){throw new Error("")}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:()=>te(WT),providedIn:"platform"});let t=n;return t})();var WT=(()=>{let n=class n extends K_{constructor(){super(),this._doc=te(Xn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Eo().getBaseHref(this._doc)}onPopState(s){let o=Eo().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",s,!1),()=>o.removeEventListener("popstate",s)}onHashChange(s){let o=Eo().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",s,!1),()=>o.removeEventListener("hashchange",s)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(s){this._location.pathname=s}pushState(s,o,c){this._history.pushState(s,o,c)}replaceState(s,o,c){this._history.replaceState(s,o,c)}forward(){this._history.forward()}back(){this._history.back()}historyGo(s=0){this._history.go(s)}getState(){return this._history.state}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:()=>new n,providedIn:"platform"});let t=n;return t})();function J_(t,n){if(t.length==0)return n;if(n.length==0)return t;let i=0;return t.endsWith("/")&&i++,n.startsWith("/")&&i++,i==2?t+n.substring(1):i==1?t+n:t+"/"+n}function H_(t){let n=t.match(/#|\?|$/),i=n&&n.index||t.length,s=i-(t[i-1]==="/"?1:0);return t.slice(0,s)+t.slice(i)}function sr(t){return t&&t[0]!=="?"?"?"+t:t}var So=(()=>{let n=class n{historyGo(s){throw new Error("")}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:()=>te(e0),providedIn:"root"});let t=n;return t})(),GT=new $e(""),e0=(()=>{let n=class n extends So{constructor(s,o){super(),this._platformLocation=s,this._removeListenerFns=[],this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??te(Xn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(s){this._removeListenerFns.push(this._platformLocation.onPopState(s),this._platformLocation.onHashChange(s))}getBaseHref(){return this._baseHref}prepareExternalUrl(s){return J_(this._baseHref,s)}path(s=!1){let o=this._platformLocation.pathname+sr(this._platformLocation.search),c=this._platformLocation.hash;return c&&s?`${o}${c}`:o}pushState(s,o,c,h){let f=this.prepareExternalUrl(c+sr(h));this._platformLocation.pushState(s,o,f)}replaceState(s,o,c,h){let f=this.prepareExternalUrl(c+sr(h));this._platformLocation.replaceState(s,o,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(s=0){this._platformLocation.historyGo?.(s)}};n.\u0275fac=function(o){return new(o||n)(Ue(K_),Ue(GT,8))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var La=(()=>{let n=class n{constructor(s){this._subject=new Tt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=s;let o=this._locationStrategy.getBaseHref();this._basePath=YT(H_(z_(o))),this._locationStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(s=!1){return this.normalize(this._locationStrategy.path(s))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(s,o=""){return this.path()==this.normalize(s+sr(o))}normalize(s){return n.stripTrailingSlash(QT(this._basePath,z_(s)))}prepareExternalUrl(s){return s&&s[0]!=="/"&&(s="/"+s),this._locationStrategy.prepareExternalUrl(s)}go(s,o="",c=null){this._locationStrategy.pushState(c,"",s,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(s+sr(o)),c)}replaceState(s,o="",c=null){this._locationStrategy.replaceState(c,"",s,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(s+sr(o)),c)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(s=0){this._locationStrategy.historyGo?.(s)}onUrlChange(s){return this._urlChangeListeners.push(s),this._urlChangeSubscription??=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}),()=>{let o=this._urlChangeListeners.indexOf(s);this._urlChangeListeners.splice(o,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(s="",o){this._urlChangeListeners.forEach(c=>c(s,o))}subscribe(s,o,c){return this._subject.subscribe({next:s,error:o,complete:c})}};n.normalizeQueryParams=sr,n.joinWithSlash=J_,n.stripTrailingSlash=H_,n.\u0275fac=function(o){return new(o||n)(Ue(So))},n.\u0275prov=ve({token:n,factory:()=>ZT(),providedIn:"root"});let t=n;return t})();function ZT(){return new La(Ue(So))}function QT(t,n){if(!t||!n.startsWith(t))return n;let i=n.substring(t.length);return i===""||["/",";","?","#"].includes(i[0])?i:n}function z_(t){return t.replace(/\/index.html$/,"")}function YT(t){if(new RegExp("^(https?:)?//").test(t)){let[,i]=t.split(/\/\/[^\/]+/);return i}return t}function t0(t,n){n=encodeURIComponent(n);for(let i of t.split(";")){let s=i.indexOf("="),[o,c]=s==-1?[i,""]:[i.slice(0,s),i.slice(s+1)];if(o.trim()===n)return decodeURIComponent(c)}return null}var Jf=/\s+/,W_=[],To=(()=>{let n=class n{constructor(s,o){this._ngEl=s,this._renderer=o,this.initialClasses=W_,this.stateMap=new Map}set klass(s){this.initialClasses=s!=null?s.trim().split(Jf):W_}set ngClass(s){this.rawClass=typeof s=="string"?s.trim().split(Jf):s}ngDoCheck(){for(let o of this.initialClasses)this._updateState(o,!0);let s=this.rawClass;if(Array.isArray(s)||s instanceof Set)for(let o of s)this._updateState(o,!0);else if(s!=null)for(let o of Object.keys(s))this._updateState(o,!!s[o]);this._applyStateDiff()}_updateState(s,o){let c=this.stateMap.get(s);c!==void 0?(c.enabled!==o&&(c.changed=!0,c.enabled=o),c.touched=!0):this.stateMap.set(s,{enabled:o,changed:!0,touched:!0})}_applyStateDiff(){for(let s of this.stateMap){let o=s[0],c=s[1];c.changed?(this._toggleClass(o,c.enabled),c.changed=!1):c.touched||(c.enabled&&this._toggleClass(o,!1),this.stateMap.delete(o)),c.touched=!1}}_toggleClass(s,o){s=s.trim(),s.length>0&&s.split(Jf).forEach(c=>{o?this._renderer.addClass(this._ngEl.nativeElement,c):this._renderer.removeClass(this._ngEl.nativeElement,c)})}};n.\u0275fac=function(o){return new(o||n)(hn(ks),hn(Do))},n.\u0275dir=vo({type:n,selectors:[["","ngClass",""]],inputs:{klass:[zn.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=n;return t})();var n0="browser",XT="server";function ep(t){return t===XT}var Fl=class{};var sp=class extends Nl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ip=class t extends sp{static makeCurrent(){X_(new t)}onAndCancel(n,i,s){return n.addEventListener(i,s),()=>{n.removeEventListener(i,s)}}dispatchEvent(n,i){n.dispatchEvent(i)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,i){return i=i||this.getDefaultDocument(),i.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,i){return i==="window"?window:i==="document"?n:i==="body"?n.body:null}getBaseHref(n){let i=eI();return i==null?null:tI(i)}resetBaseElement(){Va=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return t0(document.cookie,n)}},Va=null;function eI(){return Va=Va||document.querySelector("base"),Va?Va.getAttribute("href"):null}function tI(t){return new URL(t,document.baseURI).pathname}var nI=(()=>{let n=class n{build(){return new XMLHttpRequest}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac});let t=n;return t})(),rp=new $e(""),o0=(()=>{let n=class n{constructor(s,o){this._zone=o,this._eventNameToPlugin=new Map,s.forEach(c=>{c.manager=this}),this._plugins=s.slice().reverse()}addEventListener(s,o,c){return this._findPluginFor(o).addEventListener(s,o,c)}getZone(){return this._zone}_findPluginFor(s){let o=this._eventNameToPlugin.get(s);if(o)return o;if(o=this._plugins.find(h=>h.supports(s)),!o)throw new _e(5101,!1);return this._eventNameToPlugin.set(s,o),o}};n.\u0275fac=function(o){return new(o||n)(Ue(rp),Ue(It))},n.\u0275prov=ve({token:n,factory:n.\u0275fac});let t=n;return t})(),Pl=class{constructor(n){this._doc=n}},tp="ng-app-id",a0=(()=>{let n=class n{constructor(s,o,c,h={}){this.doc=s,this.appId=o,this.nonce=c,this.platformId=h,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ep(h),this.resetHostNodes()}addStyles(s){for(let o of s)this.changeUsageCount(o,1)===1&&this.onStyleAdded(o)}removeStyles(s){for(let o of s)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){let s=this.styleNodesInDOM;s&&(s.forEach(o=>o.remove()),s.clear());for(let o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(s){this.hostNodes.add(s);for(let o of this.getAllStyles())this.addStyleToHost(s,o)}removeHost(s){this.hostNodes.delete(s)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(s){for(let o of this.hostNodes)this.addStyleToHost(o,s)}onStyleRemoved(s){let o=this.styleRef;o.get(s)?.elements?.forEach(c=>c.remove()),o.delete(s)}collectServerRenderedStyles(){let s=this.doc.head?.querySelectorAll(`style[${tp}="${this.appId}"]`);if(s?.length){let o=new Map;return s.forEach(c=>{c.textContent!=null&&o.set(c.textContent,c)}),o}return null}changeUsageCount(s,o){let c=this.styleRef;if(c.has(s)){let h=c.get(s);return h.usage+=o,h.usage}return c.set(s,{usage:o,elements:[]}),o}getStyleElement(s,o){let c=this.styleNodesInDOM,h=c?.get(o);if(h?.parentNode===s)return c.delete(o),h.removeAttribute(tp),h;{let f=this.doc.createElement("style");return this.nonce&&f.setAttribute("nonce",this.nonce),f.textContent=o,this.platformIsServer&&f.setAttribute(tp,this.appId),s.appendChild(f),f}}addStyleToHost(s,o){let c=this.getStyleElement(s,o),h=this.styleRef,f=h.get(o)?.elements;f?f.push(c):h.set(o,{elements:[c],usage:1})}resetHostNodes(){let s=this.hostNodes;s.clear(),s.add(this.doc.head)}};n.\u0275fac=function(o){return new(o||n)(Ue(Xn),Ue(Af),Ue(kf,8),Ue(bo))},n.\u0275prov=ve({token:n,factory:n.\u0275fac});let t=n;return t})(),np={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ap=/%COMP%/g,c0="%COMP%",sI=`_nghost-${c0}`,iI=`_ngcontent-${c0}`,rI=!0,oI=new $e("",{providedIn:"root",factory:()=>rI});function aI(t){return iI.replace(ap,t)}function cI(t){return sI.replace(ap,t)}function u0(t,n){return n.map(i=>i.replace(ap,t))}var s0=(()=>{let n=class n{constructor(s,o,c,h,f,m,_,x=null){this.eventManager=s,this.sharedStylesHost=o,this.appId=c,this.removeStylesOnCompDestroy=h,this.doc=f,this.platformId=m,this.ngZone=_,this.nonce=x,this.rendererByCompId=new Map,this.platformIsServer=ep(m),this.defaultRenderer=new ja(s,f,_,this.platformIsServer)}createRenderer(s,o){if(!s||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===As.ShadowDom&&(o=ie(F({},o),{encapsulation:As.Emulated}));let c=this.getOrCreateRenderer(s,o);return c instanceof Ll?c.applyToHost(s):c instanceof Ba&&c.applyStyles(),c}getOrCreateRenderer(s,o){let c=this.rendererByCompId,h=c.get(o.id);if(!h){let f=this.doc,m=this.ngZone,_=this.eventManager,x=this.sharedStylesHost,I=this.removeStylesOnCompDestroy,L=this.platformIsServer;switch(o.encapsulation){case As.Emulated:h=new Ll(_,x,o,this.appId,I,f,m,L);break;case As.ShadowDom:return new op(_,x,s,o,f,m,this.nonce,L);default:h=new Ba(_,x,o,I,f,m,L);break}c.set(o.id,h)}return h}ngOnDestroy(){this.rendererByCompId.clear()}};n.\u0275fac=function(o){return new(o||n)(Ue(o0),Ue(a0),Ue(Af),Ue(oI),Ue(Xn),Ue(bo),Ue(It),Ue(kf))},n.\u0275prov=ve({token:n,factory:n.\u0275fac});let t=n;return t})(),ja=class{constructor(n,i,s,o){this.eventManager=n,this.doc=i,this.ngZone=s,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,i){return i?this.doc.createElementNS(np[i]||i,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,i){(i0(n)?n.content:n).appendChild(i)}insertBefore(n,i,s){n&&(i0(n)?n.content:n).insertBefore(i,s)}removeChild(n,i){n&&n.removeChild(i)}selectRootElement(n,i){let s=typeof n=="string"?this.doc.querySelector(n):n;if(!s)throw new _e(-5104,!1);return i||(s.textContent=""),s}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,i,s,o){if(o){i=o+":"+i;let c=np[o];c?n.setAttributeNS(c,i,s):n.setAttribute(i,s)}else n.setAttribute(i,s)}removeAttribute(n,i,s){if(s){let o=np[s];o?n.removeAttributeNS(o,i):n.removeAttribute(`${s}:${i}`)}else n.removeAttribute(i)}addClass(n,i){n.classList.add(i)}removeClass(n,i){n.classList.remove(i)}setStyle(n,i,s,o){o&(tr.DashCase|tr.Important)?n.style.setProperty(i,s,o&tr.Important?"important":""):n.style[i]=s}removeStyle(n,i,s){s&tr.DashCase?n.style.removeProperty(i):n.style[i]=""}setProperty(n,i,s){n!=null&&(n[i]=s)}setValue(n,i){n.nodeValue=i}listen(n,i,s){if(typeof n=="string"&&(n=Eo().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${i}`);return this.eventManager.addEventListener(n,i,this.decoratePreventDefault(s))}decoratePreventDefault(n){return i=>{if(i==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(i)):n(i))===!1&&i.preventDefault()}}};function i0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var op=class extends ja{constructor(n,i,s,o,c,h,f,m){super(n,c,h,m),this.sharedStylesHost=i,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let _=u0(o.id,o.styles);for(let x of _){let I=document.createElement("style");f&&I.setAttribute("nonce",f),I.textContent=x,this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,i){return super.appendChild(this.nodeOrShadowRoot(n),i)}insertBefore(n,i,s){return super.insertBefore(this.nodeOrShadowRoot(n),i,s)}removeChild(n,i){return super.removeChild(this.nodeOrShadowRoot(n),i)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ba=class extends ja{constructor(n,i,s,o,c,h,f,m){super(n,c,h,f),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=o,this.styles=m?u0(m,s.styles):s.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ll=class extends Ba{constructor(n,i,s,o,c,h,f,m){let _=o+"-"+s.id;super(n,i,s,c,h,f,m,_),this.contentAttr=aI(_),this.hostAttr=cI(_)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,i){let s=super.createElement(n,i);return super.setAttribute(s,this.contentAttr,""),s}},uI=(()=>{let n=class n extends Pl{constructor(s){super(s)}supports(s){return!0}addEventListener(s,o,c){return s.addEventListener(o,c,!1),()=>this.removeEventListener(s,o,c)}removeEventListener(s,o,c){return s.removeEventListener(o,c)}};n.\u0275fac=function(o){return new(o||n)(Ue(Xn))},n.\u0275prov=ve({token:n,factory:n.\u0275fac});let t=n;return t})(),r0=["alt","control","meta","shift"],lI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hI={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},dI=(()=>{let n=class n extends Pl{constructor(s){super(s)}supports(s){return n.parseEventName(s)!=null}addEventListener(s,o,c){let h=n.parseEventName(o),f=n.eventCallback(h.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Eo().onAndCancel(s,h.domEventName,f))}static parseEventName(s){let o=s.toLowerCase().split("."),c=o.shift();if(o.length===0||!(c==="keydown"||c==="keyup"))return null;let h=n._normalizeKey(o.pop()),f="",m=o.indexOf("code");if(m>-1&&(o.splice(m,1),f="code."),r0.forEach(x=>{let I=o.indexOf(x);I>-1&&(o.splice(I,1),f+=x+".")}),f+=h,o.length!=0||h.length===0)return null;let _={};return _.domEventName=c,_.fullKey=f,_}static matchEventFullKeyCode(s,o){let c=lI[s.key]||s.key,h="";return o.indexOf("code.")>-1&&(c=s.code,h="code."),c==null||!c?!1:(c=c.toLowerCase(),c===" "?c="space":c==="."&&(c="dot"),r0.forEach(f=>{if(f!==c){let m=hI[f];m(s)&&(h+=f+".")}}),h+=c,h===o)}static eventCallback(s,o,c){return h=>{n.matchEventFullKeyCode(h,s)&&c.runGuarded(()=>o(h))}}static _normalizeKey(s){return s==="esc"?"escape":s}};n.\u0275fac=function(o){return new(o||n)(Ue(Xn))},n.\u0275prov=ve({token:n,factory:n.\u0275fac});let t=n;return t})();function l0(t,n){return U_(F({rootComponent:t},fI(n)))}function fI(t){return{appProviders:[...yI,...t?.providers??[]],platformProviders:vI}}function pI(){ip.makeCurrent()}function mI(){return new Ys}function gI(){return Hy(document),document}var vI=[{provide:bo,useValue:n0},{provide:Of,useValue:pI,multi:!0},{provide:Xn,useFactory:gI,deps:[]}];var yI=[{provide:ml,useValue:"root"},{provide:Ys,useFactory:mI,deps:[]},{provide:rp,useClass:uI,multi:!0,deps:[Xn,It,bo]},{provide:rp,useClass:dI,multi:!0,deps:[Xn]},s0,a0,o0,{provide:xa,useExisting:s0},{provide:Fl,useClass:nI,deps:[]},[]];var h0=(()=>{let n=class n{constructor(s){this._doc=s}getTitle(){return this._doc.title}setTitle(s){this._doc.title=s||""}};n.\u0275fac=function(o){return new(o||n)(Ue(Xn))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var Te="primary",tc=Symbol("RouteTitle"),dp=class{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let i=this.params[n];return Array.isArray(i)?i[0]:i}return null}getAll(n){if(this.has(n)){let i=this.params[n];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function ko(t){return new dp(t)}function wI(t,n,i){let s=i.path.split("/");if(s.length>t.length||i.pathMatch==="full"&&(n.hasChildren()||s.length<t.length))return null;let o={};for(let c=0;c<s.length;c++){let h=s[c],f=t[c];if(h.startsWith(":"))o[h.substring(1)]=f;else if(h!==f.path)return null}return{consumed:t.slice(0,s.length),posParams:o}}function bI(t,n){if(t.length!==n.length)return!1;for(let i=0;i<t.length;++i)if(!Ps(t[i],n[i]))return!1;return!0}function Ps(t,n){let i=t?fp(t):void 0,s=n?fp(n):void 0;if(!i||!s||i.length!=s.length)return!1;let o;for(let c=0;c<i.length;c++)if(o=i[c],!v0(t[o],n[o]))return!1;return!0}function fp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function v0(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let i=[...t].sort(),s=[...n].sort();return i.every((o,c)=>s[c]===o)}else return t===n}function y0(t){return t.length>0?t[t.length-1]:null}function xi(t){return ed(t)?t:Na(t)?St(Promise.resolve(t)):be(t)}var DI={exact:w0,subset:b0},_0={exact:xI,subset:CI,ignored:()=>!0};function d0(t,n,i){return DI[i.paths](t.root,n.root,i.matrixParams)&&_0[i.queryParams](t.queryParams,n.queryParams)&&!(i.fragment==="exact"&&t.fragment!==n.fragment)}function xI(t,n){return Ps(t,n)}function w0(t,n,i){if(!rr(t.segments,n.segments)||!Bl(t.segments,n.segments,i)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let s in n.children)if(!t.children[s]||!w0(t.children[s],n.children[s],i))return!1;return!0}function CI(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(i=>v0(t[i],n[i]))}function b0(t,n,i){return D0(t,n,n.segments,i)}function D0(t,n,i,s){if(t.segments.length>i.length){let o=t.segments.slice(0,i.length);return!(!rr(o,i)||n.hasChildren()||!Bl(o,i,s))}else if(t.segments.length===i.length){if(!rr(t.segments,i)||!Bl(t.segments,i,s))return!1;for(let o in n.children)if(!t.children[o]||!b0(t.children[o],n.children[o],s))return!1;return!0}else{let o=i.slice(0,t.segments.length),c=i.slice(t.segments.length);return!rr(t.segments,o)||!Bl(t.segments,o,s)||!t.children[Te]?!1:D0(t.children[Te],n,c,s)}}function Bl(t,n,i){return n.every((s,o)=>_0[i](t[o].parameters,s.parameters))}var bi=class{constructor(n=new Ye([],{}),i={},s=null){this.root=n,this.queryParams=i,this.fragment=s}get queryParamMap(){return this._queryParamMap??=ko(this.queryParams),this._queryParamMap}toString(){return TI.serialize(this)}},Ye=class{constructor(n,i){this.segments=n,this.children=i,this.parent=null,Object.values(i).forEach(s=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ql(this)}},ir=class{constructor(n,i){this.path=n,this.parameters=i}get parameterMap(){return this._parameterMap??=ko(this.parameters),this._parameterMap}toString(){return C0(this)}};function EI(t,n){return rr(t,n)&&t.every((i,s)=>Ps(i.parameters,n[s].parameters))}function rr(t,n){return t.length!==n.length?!1:t.every((i,s)=>i.path===n[s].path)}function SI(t,n){let i=[];return Object.entries(t.children).forEach(([s,o])=>{s===Te&&(i=i.concat(n(o,s)))}),Object.entries(t.children).forEach(([s,o])=>{s!==Te&&(i=i.concat(n(o,s)))}),i}var jp=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:()=>new Ul,providedIn:"root"});let t=n;return t})(),Ul=class{parse(n){let i=new mp(n);return new bi(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(n){let i=`/${qa(n.root,!0)}`,s=AI(n.queryParams),o=typeof n.fragment=="string"?`#${II(n.fragment)}`:"";return`${i}${s}${o}`}},TI=new Ul;function ql(t){return t.segments.map(n=>C0(n)).join("/")}function qa(t,n){if(!t.hasChildren())return ql(t);if(n){let i=t.children[Te]?qa(t.children[Te],!1):"",s=[];return Object.entries(t.children).forEach(([o,c])=>{o!==Te&&s.push(`${o}:${qa(c,!1)}`)}),s.length>0?`${i}(${s.join("//")})`:i}else{let i=SI(t,(s,o)=>o===Te?[qa(t.children[Te],!1)]:[`${o}:${qa(s,!1)}`]);return Object.keys(t.children).length===1&&t.children[Te]!=null?`${ql(t)}/${i[0]}`:`${ql(t)}/(${i.join("//")})`}}function x0(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vl(t){return x0(t).replace(/%3B/gi,";")}function II(t){return encodeURI(t)}function pp(t){return x0(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $l(t){return decodeURIComponent(t)}function f0(t){return $l(t.replace(/\+/g,"%20"))}function C0(t){return`${pp(t.path)}${MI(t.parameters)}`}function MI(t){return Object.entries(t).map(([n,i])=>`;${pp(n)}=${pp(i)}`).join("")}function AI(t){let n=Object.entries(t).map(([i,s])=>Array.isArray(s)?s.map(o=>`${Vl(i)}=${Vl(o)}`).join("&"):`${Vl(i)}=${Vl(s)}`).filter(i=>i);return n.length?`?${n.join("&")}`:""}var OI=/^[^\/()?;#]+/;function cp(t){let n=t.match(OI);return n?n[0]:""}var kI=/^[^\/()?;=#]+/;function RI(t){let n=t.match(kI);return n?n[0]:""}var NI=/^[^=?&#]+/;function FI(t){let n=t.match(NI);return n?n[0]:""}var PI=/^[^&#]+/;function LI(t){let n=t.match(PI);return n?n[0]:""}var mp=class{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ye([],{}):new Ye([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(n.length>0||Object.keys(i).length>0)&&(s[Te]=new Ye(n,i)),s}parseSegment(){let n=cp(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new _e(4009,!1);return this.capture(n),new ir($l(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let i=RI(this.remaining);if(!i)return;this.capture(i);let s="";if(this.consumeOptional("=")){let o=cp(this.remaining);o&&(s=o,this.capture(s))}n[$l(i)]=$l(s)}parseQueryParam(n){let i=FI(this.remaining);if(!i)return;this.capture(i);let s="";if(this.consumeOptional("=")){let h=LI(this.remaining);h&&(s=h,this.capture(s))}let o=f0(i),c=f0(s);if(n.hasOwnProperty(o)){let h=n[o];Array.isArray(h)||(h=[h],n[o]=h),h.push(c)}else n[o]=c}parseParens(n){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let s=cp(this.remaining),o=this.remaining[s.length];if(o!=="/"&&o!==")"&&o!==";")throw new _e(4010,!1);let c;s.indexOf(":")>-1?(c=s.slice(0,s.indexOf(":")),this.capture(c),this.capture(":")):n&&(c=Te);let h=this.parseChildren();i[c]=Object.keys(h).length===1?h[Te]:new Ye([],h),this.consumeOptional("//")}return i}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new _e(4011,!1)}};function E0(t){return t.segments.length>0?new Ye([],{[Te]:t}):t}function S0(t){let n={};for(let[s,o]of Object.entries(t.children)){let c=S0(o);if(s===Te&&c.segments.length===0&&c.hasChildren())for(let[h,f]of Object.entries(c.children))n[h]=f;else(c.segments.length>0||c.hasChildren())&&(n[s]=c)}let i=new Ye(t.segments,n);return VI(i)}function VI(t){if(t.numberOfChildren===1&&t.children[Te]){let n=t.children[Te];return new Ye(t.segments.concat(n.segments),n.children)}return t}function Ro(t){return t instanceof bi}function jI(t,n,i=null,s=null){let o=T0(t);return I0(o,n,i,s)}function T0(t){let n;function i(c){let h={};for(let m of c.children){let _=i(m);h[m.outlet]=_}let f=new Ye(c.url,h);return c===t&&(n=f),f}let s=i(t.root),o=E0(s);return n??o}function I0(t,n,i,s){let o=t;for(;o.parent;)o=o.parent;if(n.length===0)return up(o,o,o,i,s);let c=BI(n);if(c.toRoot())return up(o,o,new Ye([],{}),i,s);let h=qI(c,o,t),f=h.processChildren?Ha(h.segmentGroup,h.index,c.commands):A0(h.segmentGroup,h.index,c.commands);return up(o,h.segmentGroup,f,i,s)}function Hl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ga(t){return typeof t=="object"&&t!=null&&t.outlets}function up(t,n,i,s,o){let c={};s&&Object.entries(s).forEach(([m,_])=>{c[m]=Array.isArray(_)?_.map(x=>`${x}`):`${_}`});let h;t===n?h=i:h=M0(t,n,i);let f=E0(S0(h));return new bi(f,c,o)}function M0(t,n,i){let s={};return Object.entries(t.children).forEach(([o,c])=>{c===n?s[o]=i:s[o]=M0(c,n,i)}),new Ye(t.segments,s)}var zl=class{constructor(n,i,s){if(this.isAbsolute=n,this.numberOfDoubleDots=i,this.commands=s,n&&s.length>0&&Hl(s[0]))throw new _e(4003,!1);let o=s.find(Ga);if(o&&o!==y0(s))throw new _e(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function BI(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new zl(!0,0,t);let n=0,i=!1,s=t.reduce((o,c,h)=>{if(typeof c=="object"&&c!=null){if(c.outlets){let f={};return Object.entries(c.outlets).forEach(([m,_])=>{f[m]=typeof _=="string"?_.split("/"):_}),[...o,{outlets:f}]}if(c.segmentPath)return[...o,c.segmentPath]}return typeof c!="string"?[...o,c]:h===0?(c.split("/").forEach((f,m)=>{m==0&&f==="."||(m==0&&f===""?i=!0:f===".."?n++:f!=""&&o.push(f))}),o):[...o,c]},[]);return new zl(i,n,s)}var Ao=class{constructor(n,i,s){this.segmentGroup=n,this.processChildren=i,this.index=s}};function qI(t,n,i){if(t.isAbsolute)return new Ao(n,!0,0);if(!i)return new Ao(n,!1,NaN);if(i.parent===null)return new Ao(i,!0,0);let s=Hl(t.commands[0])?0:1,o=i.segments.length-1+s;return $I(i,o,t.numberOfDoubleDots)}function $I(t,n,i){let s=t,o=n,c=i;for(;c>o;){if(c-=o,s=s.parent,!s)throw new _e(4005,!1);o=s.segments.length}return new Ao(s,!1,o-c)}function UI(t){return Ga(t[0])?t[0].outlets:{[Te]:t}}function A0(t,n,i){if(t??=new Ye([],{}),t.segments.length===0&&t.hasChildren())return Ha(t,n,i);let s=HI(t,n,i),o=i.slice(s.commandIndex);if(s.match&&s.pathIndex<t.segments.length){let c=new Ye(t.segments.slice(0,s.pathIndex),{});return c.children[Te]=new Ye(t.segments.slice(s.pathIndex),t.children),Ha(c,0,o)}else return s.match&&o.length===0?new Ye(t.segments,{}):s.match&&!t.hasChildren()?gp(t,n,i):s.match?Ha(t,0,o):gp(t,n,i)}function Ha(t,n,i){if(i.length===0)return new Ye(t.segments,{});{let s=UI(i),o={};if(Object.keys(s).some(c=>c!==Te)&&t.children[Te]&&t.numberOfChildren===1&&t.children[Te].segments.length===0){let c=Ha(t.children[Te],n,i);return new Ye(t.segments,c.children)}return Object.entries(s).forEach(([c,h])=>{typeof h=="string"&&(h=[h]),h!==null&&(o[c]=A0(t.children[c],n,h))}),Object.entries(t.children).forEach(([c,h])=>{s[c]===void 0&&(o[c]=h)}),new Ye(t.segments,o)}}function HI(t,n,i){let s=0,o=n,c={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(s>=i.length)return c;let h=t.segments[o],f=i[s];if(Ga(f))break;let m=`${f}`,_=s<i.length-1?i[s+1]:null;if(o>0&&m===void 0)break;if(m&&_&&typeof _=="object"&&_.outlets===void 0){if(!m0(m,_,h))return c;s+=2}else{if(!m0(m,{},h))return c;s++}o++}return{match:!0,pathIndex:o,commandIndex:s}}function gp(t,n,i){let s=t.segments.slice(0,n),o=0;for(;o<i.length;){let c=i[o];if(Ga(c)){let m=zI(c.outlets);return new Ye(s,m)}if(o===0&&Hl(i[0])){let m=t.segments[n];s.push(new ir(m.path,p0(i[0]))),o++;continue}let h=Ga(c)?c.outlets[Te]:`${c}`,f=o<i.length-1?i[o+1]:null;h&&f&&Hl(f)?(s.push(new ir(h,p0(f))),o+=2):(s.push(new ir(h,{})),o++)}return new Ye(s,{})}function zI(t){let n={};return Object.entries(t).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(n[i]=gp(new Ye([],{}),0,s))}),n}function p0(t){let n={};return Object.entries(t).forEach(([i,s])=>n[i]=`${s}`),n}function m0(t,n,i){return t==i.path&&Ps(n,i.parameters)}var za="imperative",en=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(en||{}),Kn=class{constructor(n,i){this.id=n,this.url=i}},Za=class extends Kn{constructor(n,i,s="imperative",o=null){super(n,i),this.type=en.NavigationStart,this.navigationTrigger=s,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ei=class extends Kn{constructor(n,i,s){super(n,i),this.urlAfterRedirects=s,this.type=en.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ln=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ln||{}),vp=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(vp||{}),Di=class extends Kn{constructor(n,i,s,o){super(n,i),this.reason=s,this.code=o,this.type=en.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},or=class extends Kn{constructor(n,i,s,o){super(n,i),this.reason=s,this.code=o,this.type=en.NavigationSkipped}},Qa=class extends Kn{constructor(n,i,s,o){super(n,i),this.error=s,this.target=o,this.type=en.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wl=class extends Kn{constructor(n,i,s,o){super(n,i),this.urlAfterRedirects=s,this.state=o,this.type=en.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yp=class extends Kn{constructor(n,i,s,o){super(n,i),this.urlAfterRedirects=s,this.state=o,this.type=en.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_p=class extends Kn{constructor(n,i,s,o,c){super(n,i),this.urlAfterRedirects=s,this.state=o,this.shouldActivate=c,this.type=en.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},wp=class extends Kn{constructor(n,i,s,o){super(n,i),this.urlAfterRedirects=s,this.state=o,this.type=en.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bp=class extends Kn{constructor(n,i,s,o){super(n,i),this.urlAfterRedirects=s,this.state=o,this.type=en.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dp=class{constructor(n){this.route=n,this.type=en.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xp=class{constructor(n){this.route=n,this.type=en.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Cp=class{constructor(n){this.snapshot=n,this.type=en.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ep=class{constructor(n){this.snapshot=n,this.type=en.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sp=class{constructor(n){this.snapshot=n,this.type=en.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tp=class{constructor(n){this.snapshot=n,this.type=en.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ya=class{},Xa=class{constructor(n){this.url=n}};var Ip=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Kl,this.attachRef=null}},Kl=(()=>{let n=class n{constructor(){this.contexts=new Map}onChildOutletCreated(s,o){let c=this.getOrCreateContext(s);c.outlet=o,this.contexts.set(s,c)}onChildOutletDestroyed(s){let o=this.getContext(s);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){let s=this.contexts;return this.contexts=new Map,s}onOutletReAttached(s){this.contexts=s}getOrCreateContext(s){let o=this.getContext(s);return o||(o=new Ip,this.contexts.set(s,o)),o}getContext(s){return this.contexts.get(s)||null}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),Gl=class{constructor(n){this._root=n}get root(){return this._root.value}parent(n){let i=this.pathFromRoot(n);return i.length>1?i[i.length-2]:null}children(n){let i=Mp(n,this._root);return i?i.children.map(s=>s.value):[]}firstChild(n){let i=Mp(n,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(n){let i=Ap(n,this._root);return i.length<2?[]:i[i.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return Ap(n,this._root).map(i=>i.value)}};function Mp(t,n){if(t===n.value)return n;for(let i of n.children){let s=Mp(t,i);if(s)return s}return null}function Ap(t,n){if(t===n.value)return[n];for(let i of n.children){let s=Ap(t,i);if(s.length)return s.unshift(n),s}return[]}var Pn=class{constructor(n,i){this.value=n,this.children=i}toString(){return`TreeNode(${this.value})`}};function Mo(t){let n={};return t&&t.children.forEach(i=>n[i.value.outlet]=i),n}var Zl=class extends Gl{constructor(n,i){super(n),this.snapshot=i,qp(this,n)}toString(){return this.snapshot.toString()}};function O0(t){let n=WI(t),i=new Nt([new ir("",{})]),s=new Nt({}),o=new Nt({}),c=new Nt({}),h=new Nt(""),f=new ar(i,s,c,h,o,Te,t,n.root);return f.snapshot=n.root,new Zl(new Pn(f,[]),n)}function WI(t){let n={},i={},s={},o="",c=new Ka([],n,s,o,i,Te,t,null,{});return new Ql("",new Pn(c,[]))}var ar=class{constructor(n,i,s,o,c,h,f,m){this.urlSubject=n,this.paramsSubject=i,this.queryParamsSubject=s,this.fragmentSubject=o,this.dataSubject=c,this.outlet=h,this.component=f,this._futureSnapshot=m,this.title=this.dataSubject?.pipe(qe(_=>_[tc]))??be(void 0),this.url=n,this.params=i,this.queryParams=s,this.fragment=o,this.data=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(qe(n=>ko(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(qe(n=>ko(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bp(t,n,i="emptyOnly"){let s,{routeConfig:o}=t;return n!==null&&(i==="always"||o?.path===""||!n.component&&!n.routeConfig?.loadComponent)?s={params:F(F({},n.params),t.params),data:F(F({},n.data),t.data),resolve:F(F(F(F({},t.data),n.data),o?.data),t._resolvedData)}:s={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},o&&R0(o)&&(s.resolve[tc]=o.title),s}var Ka=class{get title(){return this.data?.[tc]}constructor(n,i,s,o,c,h,f,m,_){this.url=n,this.params=i,this.queryParams=s,this.fragment=o,this.data=c,this.outlet=h,this.component=f,this.routeConfig=m,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ko(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ko(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(s=>s.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${i}')`}},Ql=class extends Gl{constructor(n,i){super(i),this.url=n,qp(this,i)}toString(){return k0(this._root)}};function qp(t,n){n.value._routerState=t,n.children.forEach(i=>qp(t,i))}function k0(t){let n=t.children.length>0?` { ${t.children.map(k0).join(", ")} } `:"";return`${t.value}${n}`}function lp(t){if(t.snapshot){let n=t.snapshot,i=t._futureSnapshot;t.snapshot=i,Ps(n.queryParams,i.queryParams)||t.queryParamsSubject.next(i.queryParams),n.fragment!==i.fragment&&t.fragmentSubject.next(i.fragment),Ps(n.params,i.params)||t.paramsSubject.next(i.params),bI(n.url,i.url)||t.urlSubject.next(i.url),Ps(n.data,i.data)||t.dataSubject.next(i.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Op(t,n){let i=Ps(t.params,n.params)&&EI(t.url,n.url),s=!t.parent!=!n.parent;return i&&!s&&(!t.parent||Op(t.parent,n.parent))}function R0(t){return typeof t.title=="string"||t.title===null}var $p=(()=>{let n=class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Te,this.activateEvents=new Tt,this.deactivateEvents=new Tt,this.attachEvents=new Tt,this.detachEvents=new Tt,this.parentContexts=te(Kl),this.location=te(xo),this.changeDetector=te(Co),this.environmentInjector=te(Wn),this.inputBinder=te(Up,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(s){if(s.name){let{firstChange:o,previousValue:c}=s.name;if(o)return;this.isTrackedInParentContexts(c)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(c)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(s){return this.parentContexts.getContext(s)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let s=this.parentContexts.getContext(this.name);s?.route&&(s.attachRef?this.attach(s.attachRef,s.route):this.activateWith(s.route,s.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _e(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _e(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _e(4012,!1);this.location.detach();let s=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(s.instance),s}attach(s,o){this.activated=s,this._activatedRoute=o,this.location.insert(s.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(s.instance)}deactivate(){if(this.activated){let s=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(s)}}activateWith(s,o){if(this.isActivated)throw new _e(4013,!1);this._activatedRoute=s;let c=this.location,f=s.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,_=new kp(s,m,c.injector);this.activated=c.createComponent(f,{index:c.length,injector:_,environmentInjector:o??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275dir=vo({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_o]});let t=n;return t})(),kp=class t{__ngOutletInjector(n){return new t(this.route,this.childContexts,n)}constructor(n,i,s){this.route=n,this.childContexts=i,this.parent=s}get(n,i){return n===ar?this.route:n===Kl?this.childContexts:this.parent.get(n,i)}},Up=new $e("");function GI(t,n,i){let s=Ja(t,n._root,i?i._root:void 0);return new Zl(s,n)}function Ja(t,n,i){if(i&&t.shouldReuseRoute(n.value,i.value.snapshot)){let s=i.value;s._futureSnapshot=n.value;let o=ZI(t,n,i);return new Pn(s,o)}else{if(t.shouldAttach(n.value)){let c=t.retrieve(n.value);if(c!==null){let h=c.route;return h.value._futureSnapshot=n.value,h.children=n.children.map(f=>Ja(t,f)),h}}let s=QI(n.value),o=n.children.map(c=>Ja(t,c));return new Pn(s,o)}}function ZI(t,n,i){return n.children.map(s=>{for(let o of i.children)if(t.shouldReuseRoute(s.value,o.value.snapshot))return Ja(t,s,o);return Ja(t,s)})}function QI(t){return new ar(new Nt(t.url),new Nt(t.params),new Nt(t.queryParams),new Nt(t.fragment),new Nt(t.data),t.outlet,t.component,t)}var N0="ngNavigationCancelingError";function F0(t,n){let{redirectTo:i,navigationBehaviorOptions:s}=Ro(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=P0(!1,Ln.Redirect);return o.url=i,o.navigationBehaviorOptions=s,o}function P0(t,n){let i=new Error(`NavigationCancelingError: ${t||""}`);return i[N0]=!0,i.cancellationCode=n,i}function YI(t){return L0(t)&&Ro(t.url)}function L0(t){return!!t&&t[N0]}var XI=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=Mt({type:n,selectors:[["ng-component"]],standalone:!0,features:[At],decls:1,vars:0,template:function(o,c){o&1&&Js(0,"router-outlet")},dependencies:[$p],encapsulation:2});let t=n;return t})();function KI(t,n){return t.providers&&!t._injector&&(t._injector=Zf(t.providers,n,`Route: ${t.path}`)),t._injector??n}function Hp(t){let n=t.children&&t.children.map(Hp),i=n?ie(F({},t),{children:n}):F({},t);return!i.component&&!i.loadComponent&&(n||i.loadChildren)&&i.outlet&&i.outlet!==Te&&(i.component=XI),i}function Ls(t){return t.outlet||Te}function JI(t,n){let i=t.filter(s=>Ls(s)===n);return i.push(...t.filter(s=>Ls(s)!==n)),i}function nc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let i=n.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var eM=(t,n,i,s)=>qe(o=>(new Rp(n,o.targetRouterState,o.currentRouterState,i,s).activate(t),o)),Rp=class{constructor(n,i,s,o,c){this.routeReuseStrategy=n,this.futureState=i,this.currState=s,this.forwardEvent=o,this.inputBindingEnabled=c}activate(n){let i=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,s,n),lp(this.futureState.root),this.activateChildRoutes(i,s,n)}deactivateChildRoutes(n,i,s){let o=Mo(i);n.children.forEach(c=>{let h=c.value.outlet;this.deactivateRoutes(c,o[h],s),delete o[h]}),Object.values(o).forEach(c=>{this.deactivateRouteAndItsChildren(c,s)})}deactivateRoutes(n,i,s){let o=n.value,c=i?i.value:null;if(o===c)if(o.component){let h=s.getContext(o.outlet);h&&this.deactivateChildRoutes(n,i,h.children)}else this.deactivateChildRoutes(n,i,s);else c&&this.deactivateRouteAndItsChildren(i,s)}deactivateRouteAndItsChildren(n,i){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,i):this.deactivateRouteAndOutlet(n,i)}detachAndStoreRouteSubtree(n,i){let s=i.getContext(n.value.outlet),o=s&&n.value.component?s.children:i,c=Mo(n);for(let h of Object.values(c))this.deactivateRouteAndItsChildren(h,o);if(s&&s.outlet){let h=s.outlet.detach(),f=s.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:h,route:n,contexts:f})}}deactivateRouteAndOutlet(n,i){let s=i.getContext(n.value.outlet),o=s&&n.value.component?s.children:i,c=Mo(n);for(let h of Object.values(c))this.deactivateRouteAndItsChildren(h,o);s&&(s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated()),s.attachRef=null,s.route=null)}activateChildRoutes(n,i,s){let o=Mo(i);n.children.forEach(c=>{this.activateRoutes(c,o[c.value.outlet],s),this.forwardEvent(new Tp(c.value.snapshot))}),n.children.length&&this.forwardEvent(new Ep(n.value.snapshot))}activateRoutes(n,i,s){let o=n.value,c=i?i.value:null;if(lp(o),o===c)if(o.component){let h=s.getOrCreateContext(o.outlet);this.activateChildRoutes(n,i,h.children)}else this.activateChildRoutes(n,i,s);else if(o.component){let h=s.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let f=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(f.contexts),h.attachRef=f.componentRef,h.route=f.route.value,h.outlet&&h.outlet.attach(f.componentRef,f.route.value),lp(f.route.value),this.activateChildRoutes(n,null,h.children)}else{let f=nc(o.snapshot);h.attachRef=null,h.route=o,h.injector=f,h.outlet&&h.outlet.activateWith(o,h.injector),this.activateChildRoutes(n,null,h.children)}}else this.activateChildRoutes(n,null,s)}},Yl=class{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},Oo=class{constructor(n,i){this.component=n,this.route=i}};function tM(t,n,i){let s=t._root,o=n?n._root:null;return $a(s,o,i,[s.value])}function nM(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function Po(t,n){let i=Symbol(),s=n.get(t,i);return s===i?typeof t=="function"&&!Fv(t)?t:n.get(t):s}function $a(t,n,i,s,o={canDeactivateChecks:[],canActivateChecks:[]}){let c=Mo(n);return t.children.forEach(h=>{sM(h,c[h.value.outlet],i,s.concat([h.value]),o),delete c[h.value.outlet]}),Object.entries(c).forEach(([h,f])=>Wa(f,i.getContext(h),o)),o}function sM(t,n,i,s,o={canDeactivateChecks:[],canActivateChecks:[]}){let c=t.value,h=n?n.value:null,f=i?i.getContext(t.value.outlet):null;if(h&&c.routeConfig===h.routeConfig){let m=iM(h,c,c.routeConfig.runGuardsAndResolvers);m?o.canActivateChecks.push(new Yl(s)):(c.data=h.data,c._resolvedData=h._resolvedData),c.component?$a(t,n,f?f.children:null,s,o):$a(t,n,i,s,o),m&&f&&f.outlet&&f.outlet.isActivated&&o.canDeactivateChecks.push(new Oo(f.outlet.component,h))}else h&&Wa(n,f,o),o.canActivateChecks.push(new Yl(s)),c.component?$a(t,null,f?f.children:null,s,o):$a(t,null,i,s,o);return o}function iM(t,n,i){if(typeof i=="function")return i(t,n);switch(i){case"pathParamsChange":return!rr(t.url,n.url);case"pathParamsOrQueryParamsChange":return!rr(t.url,n.url)||!Ps(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Op(t,n)||!Ps(t.queryParams,n.queryParams);case"paramsChange":default:return!Op(t,n)}}function Wa(t,n,i){let s=Mo(t),o=t.value;Object.entries(s).forEach(([c,h])=>{o.component?n?Wa(h,n.children.getContext(c),i):Wa(h,null,i):Wa(h,n,i)}),o.component?n&&n.outlet&&n.outlet.isActivated?i.canDeactivateChecks.push(new Oo(n.outlet.component,o)):i.canDeactivateChecks.push(new Oo(null,o)):i.canDeactivateChecks.push(new Oo(null,o))}function sc(t){return typeof t=="function"}function rM(t){return typeof t=="boolean"}function oM(t){return t&&sc(t.canLoad)}function aM(t){return t&&sc(t.canActivate)}function cM(t){return t&&sc(t.canActivateChild)}function uM(t){return t&&sc(t.canDeactivate)}function lM(t){return t&&sc(t.canMatch)}function V0(t){return t instanceof Gs||t?.name==="EmptyError"}var jl=Symbol("INITIAL_VALUE");function No(){return ls(t=>ju(t.map(n=>n.pipe(Zs(1),id(jl)))).pipe(qe(n=>{for(let i of n)if(i!==!0){if(i===jl)return jl;if(i===!1||i instanceof bi)return i}return!0}),us(n=>n!==jl),Zs(1)))}function hM(t,n){return Ft(i=>{let{targetSnapshot:s,currentSnapshot:o,guards:{canActivateChecks:c,canDeactivateChecks:h}}=i;return h.length===0&&c.length===0?be(ie(F({},i),{guardsResult:!0})):dM(h,s,o,t).pipe(Ft(f=>f&&rM(f)?fM(s,c,t,n):be(f)),qe(f=>ie(F({},i),{guardsResult:f})))})}function dM(t,n,i,s){return St(t).pipe(Ft(o=>yM(o.component,o.route,i,n,s)),Ts(o=>o!==!0,!0))}function fM(t,n,i,s){return St(n).pipe(no(o=>to(mM(o.route.parent,s),pM(o.route,s),vM(t,o.path,i),gM(t,o.route,i))),Ts(o=>o!==!0,!0))}function pM(t,n){return t!==null&&n&&n(new Sp(t)),be(!0)}function mM(t,n){return t!==null&&n&&n(new Cp(t)),be(!0)}function gM(t,n,i){let s=n.routeConfig?n.routeConfig.canActivate:null;if(!s||s.length===0)return be(!0);let o=s.map(c=>Bu(()=>{let h=nc(n)??i,f=Po(c,h),m=aM(f)?f.canActivate(n,t):er(h,()=>f(n,t));return xi(m).pipe(Ts())}));return be(o).pipe(No())}function vM(t,n,i){let s=n[n.length-1],c=n.slice(0,n.length-1).reverse().map(h=>nM(h)).filter(h=>h!==null).map(h=>Bu(()=>{let f=h.guards.map(m=>{let _=nc(h.node)??i,x=Po(m,_),I=cM(x)?x.canActivateChild(s,t):er(_,()=>x(s,t));return xi(I).pipe(Ts())});return be(f).pipe(No())}));return be(c).pipe(No())}function yM(t,n,i,s,o){let c=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!c||c.length===0)return be(!0);let h=c.map(f=>{let m=nc(n)??o,_=Po(f,m),x=uM(_)?_.canDeactivate(t,n,i,s):er(m,()=>_(t,n,i,s));return xi(x).pipe(Ts())});return be(h).pipe(No())}function _M(t,n,i,s){let o=n.canLoad;if(o===void 0||o.length===0)return be(!0);let c=o.map(h=>{let f=Po(h,t),m=oM(f)?f.canLoad(n,i):er(t,()=>f(n,i));return xi(m)});return be(c).pipe(No(),j0(s))}function j0(t){return Yh(Xt(n=>{if(Ro(n))throw F0(t,n)}),qe(n=>n===!0))}function wM(t,n,i,s){let o=n.canMatch;if(!o||o.length===0)return be(!0);let c=o.map(h=>{let f=Po(h,t),m=lM(f)?f.canMatch(n,i):er(t,()=>f(n,i));return xi(m)});return be(c).pipe(No(),j0(s))}var ec=class{constructor(n){this.segmentGroup=n||null}},Xl=class extends Error{constructor(n){super(),this.urlTree=n}};function Io(t){return Jr(new ec(t))}function bM(t){return Jr(new _e(4e3,!1))}function DM(t){return Jr(P0(!1,Ln.GuardRejected))}var Np=class{constructor(n,i){this.urlSerializer=n,this.urlTree=i}lineralizeSegments(n,i){let s=[],o=i.root;for(;;){if(s=s.concat(o.segments),o.numberOfChildren===0)return be(s);if(o.numberOfChildren>1||!o.children[Te])return bM(n.redirectTo);o=o.children[Te]}}applyRedirectCommands(n,i,s){let o=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),n,s);if(i.startsWith("/"))throw new Xl(o);return o}applyRedirectCreateUrlTree(n,i,s,o){let c=this.createSegmentGroup(n,i.root,s,o);return new bi(c,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(n,i){let s={};return Object.entries(n).forEach(([o,c])=>{if(typeof c=="string"&&c.startsWith(":")){let f=c.substring(1);s[o]=i[f]}else s[o]=c}),s}createSegmentGroup(n,i,s,o){let c=this.createSegments(n,i.segments,s,o),h={};return Object.entries(i.children).forEach(([f,m])=>{h[f]=this.createSegmentGroup(n,m,s,o)}),new Ye(c,h)}createSegments(n,i,s,o){return i.map(c=>c.path.startsWith(":")?this.findPosParam(n,c,o):this.findOrReturn(c,s))}findPosParam(n,i,s){let o=s[i.path.substring(1)];if(!o)throw new _e(4001,!1);return o}findOrReturn(n,i){let s=0;for(let o of i){if(o.path===n.path)return i.splice(s),o;s++}return n}},Fp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xM(t,n,i,s,o){let c=zp(t,n,i);return c.matched?(s=KI(n,s),wM(s,n,i,o).pipe(qe(h=>h===!0?c:F({},Fp)))):be(c)}function zp(t,n,i){if(n.path==="**")return CM(i);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||i.length>0)?F({},Fp):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let o=(n.matcher||wI)(i,t,n);if(!o)return F({},Fp);let c={};Object.entries(o.posParams??{}).forEach(([f,m])=>{c[f]=m.path});let h=o.consumed.length>0?F(F({},c),o.consumed[o.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:o.consumed,remainingSegments:i.slice(o.consumed.length),parameters:h,positionalParamSegments:o.posParams??{}}}function CM(t){return{matched:!0,parameters:t.length>0?y0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function g0(t,n,i,s){return i.length>0&&TM(t,i,s)?{segmentGroup:new Ye(n,SM(s,new Ye(i,t.children))),slicedSegments:[]}:i.length===0&&IM(t,i,s)?{segmentGroup:new Ye(t.segments,EM(t,i,s,t.children)),slicedSegments:i}:{segmentGroup:new Ye(t.segments,t.children),slicedSegments:i}}function EM(t,n,i,s){let o={};for(let c of i)if(Jl(t,n,c)&&!s[Ls(c)]){let h=new Ye([],{});o[Ls(c)]=h}return F(F({},s),o)}function SM(t,n){let i={};i[Te]=n;for(let s of t)if(s.path===""&&Ls(s)!==Te){let o=new Ye([],{});i[Ls(s)]=o}return i}function TM(t,n,i){return i.some(s=>Jl(t,n,s)&&Ls(s)!==Te)}function IM(t,n,i){return i.some(s=>Jl(t,n,s))}function Jl(t,n,i){return(t.hasChildren()||n.length>0)&&i.pathMatch==="full"?!1:i.path===""}function MM(t,n,i,s){return Ls(t)!==s&&(s===Te||!Jl(n,i,t))?!1:zp(n,t,i).matched}function AM(t,n,i){return n.length===0&&!t.children[i]}var Pp=class{};function OM(t,n,i,s,o,c,h="emptyOnly"){return new Lp(t,n,i,s,o,h,c).recognize()}var kM=31,Lp=class{constructor(n,i,s,o,c,h,f){this.injector=n,this.configLoader=i,this.rootComponentType=s,this.config=o,this.urlTree=c,this.paramsInheritanceStrategy=h,this.urlSerializer=f,this.applyRedirects=new Np(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new _e(4002,`'${n.segmentGroup}'`)}recognize(){let n=g0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(qe(i=>{let s=new Ka([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,{},Te,this.rootComponentType,null,{}),o=new Pn(s,i),c=new Ql("",o),h=jI(s,[],this.urlTree.queryParams,this.urlTree.fragment);return h.queryParams=this.urlTree.queryParams,c.url=this.urlSerializer.serialize(h),this.inheritParamsAndData(c._root,null),{state:c,tree:h}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n,Te).pipe(mi(s=>{if(s instanceof Xl)return this.urlTree=s.urlTree,this.match(s.urlTree.root);throw s instanceof ec?this.noMatchError(s):s}))}inheritParamsAndData(n,i){let s=n.value,o=Bp(s,i,this.paramsInheritanceStrategy);s.params=Object.freeze(o.params),s.data=Object.freeze(o.data),n.children.forEach(c=>this.inheritParamsAndData(c,s))}processSegmentGroup(n,i,s,o){return s.segments.length===0&&s.hasChildren()?this.processChildren(n,i,s):this.processSegment(n,i,s,s.segments,o,!0).pipe(qe(c=>c instanceof Pn?[c]:[]))}processChildren(n,i,s){let o=[];for(let c of Object.keys(s.children))c==="primary"?o.unshift(c):o.push(c);return St(o).pipe(no(c=>{let h=s.children[c],f=JI(i,c);return this.processSegmentGroup(n,f,h,c)}),sd((c,h)=>(c.push(...h),c)),gi(null),nd(),Ft(c=>{if(c===null)return Io(s);let h=B0(c);return RM(h),be(h)}))}processSegment(n,i,s,o,c,h){return St(i).pipe(no(f=>this.processSegmentAgainstRoute(f._injector??n,i,f,s,o,c,h).pipe(mi(m=>{if(m instanceof ec)return be(null);throw m}))),Ts(f=>!!f),mi(f=>{if(V0(f))return AM(s,o,c)?be(new Pp):Io(s);throw f}))}processSegmentAgainstRoute(n,i,s,o,c,h,f){return MM(s,o,c,h)?s.redirectTo===void 0?this.matchSegmentAgainstRoute(n,o,s,c,h):this.allowRedirects&&f?this.expandSegmentAgainstRouteUsingRedirect(n,o,i,s,c,h):Io(o):Io(o)}expandSegmentAgainstRouteUsingRedirect(n,i,s,o,c,h){let{matched:f,consumedSegments:m,positionalParamSegments:_,remainingSegments:x}=zp(i,o,c);if(!f)return Io(i);o.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kM&&(this.allowRedirects=!1));let I=this.applyRedirects.applyRedirectCommands(m,o.redirectTo,_);return this.applyRedirects.lineralizeSegments(o,I).pipe(Ft(L=>this.processSegment(n,s,i,L.concat(x),h,!1)))}matchSegmentAgainstRoute(n,i,s,o,c){let h=xM(i,s,o,n,this.urlSerializer);return s.path==="**"&&(i.children={}),h.pipe(ls(f=>f.matched?(n=s._injector??n,this.getChildConfig(n,s,o).pipe(ls(({routes:m})=>{let _=s._loadedInjector??n,{consumedSegments:x,remainingSegments:I,parameters:L}=f,z=new Ka(x,L,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,FM(s),Ls(s),s.component??s._loadedComponent??null,s,PM(s)),{segmentGroup:he,slicedSegments:pe}=g0(i,x,I,m);if(pe.length===0&&he.hasChildren())return this.processChildren(_,m,he).pipe(qe(Oe=>Oe===null?null:new Pn(z,Oe)));if(m.length===0&&pe.length===0)return be(new Pn(z,[]));let Fe=Ls(s)===c;return this.processSegment(_,m,he,pe,Fe?Te:c,!0).pipe(qe(Oe=>new Pn(z,Oe instanceof Pn?[Oe]:[])))}))):Io(i)))}getChildConfig(n,i,s){return i.children?be({routes:i.children,injector:n}):i.loadChildren?i._loadedRoutes!==void 0?be({routes:i._loadedRoutes,injector:i._loadedInjector}):_M(n,i,s,this.urlSerializer).pipe(Ft(o=>o?this.configLoader.loadChildren(n,i).pipe(Xt(c=>{i._loadedRoutes=c.routes,i._loadedInjector=c.injector})):DM(i))):be({routes:[],injector:n})}};function RM(t){t.sort((n,i)=>n.value.outlet===Te?-1:i.value.outlet===Te?1:n.value.outlet.localeCompare(i.value.outlet))}function NM(t){let n=t.value.routeConfig;return n&&n.path===""}function B0(t){let n=[],i=new Set;for(let s of t){if(!NM(s)){n.push(s);continue}let o=n.find(c=>s.value.routeConfig===c.value.routeConfig);o!==void 0?(o.children.push(...s.children),i.add(o)):n.push(s)}for(let s of i){let o=B0(s.children);n.push(new Pn(s.value,o))}return n.filter(s=>!i.has(s))}function FM(t){return t.data||{}}function PM(t){return t.resolve||{}}function LM(t,n,i,s,o,c){return Ft(h=>OM(t,n,i,s,h.extractedUrl,o,c).pipe(qe(({state:f,tree:m})=>ie(F({},h),{targetSnapshot:f,urlAfterRedirects:m}))))}function VM(t,n){return Ft(i=>{let{targetSnapshot:s,guards:{canActivateChecks:o}}=i;if(!o.length)return be(i);let c=new Set(o.map(m=>m.route)),h=new Set;for(let m of c)if(!h.has(m))for(let _ of q0(m))h.add(_);let f=0;return St(h).pipe(no(m=>c.has(m)?jM(m,s,t,n):(m.data=Bp(m,m.parent,t).resolve,be(void 0))),Xt(()=>f++),so(1),Ft(m=>f===h.size?be(i):On))})}function q0(t){let n=t.children.map(i=>q0(i)).flat();return[t,...n]}function jM(t,n,i,s){let o=t.routeConfig,c=t._resolve;return o?.title!==void 0&&!R0(o)&&(c[tc]=o.title),BM(c,t,n,s).pipe(qe(h=>(t._resolvedData=h,t.data=Bp(t,t.parent,i).resolve,null)))}function BM(t,n,i,s){let o=fp(t);if(o.length===0)return be({});let c={};return St(o).pipe(Ft(h=>qM(t[h],n,i,s).pipe(Ts(),Xt(f=>{c[h]=f}))),so(1),td(c),mi(h=>V0(h)?On:Jr(h)))}function qM(t,n,i,s){let o=nc(n)??s,c=Po(t,o),h=c.resolve?c.resolve(n,i):er(o,()=>c(n,i));return xi(h)}function hp(t){return ls(n=>{let i=t(n);return i?St(i).pipe(qe(()=>n)):be(n)})}var $0=(()=>{let n=class n{buildTitle(s){let o,c=s.root;for(;c!==void 0;)o=this.getResolvedTitleForRoute(c)??o,c=c.children.find(h=>h.outlet===Te);return o}getResolvedTitleForRoute(s){return s.data[tc]}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:()=>te($M),providedIn:"root"});let t=n;return t})(),$M=(()=>{let n=class n extends $0{constructor(s){super(),this.title=s}updateTitle(s){let o=this.buildTitle(s);o!==void 0&&this.title.setTitle(o)}};n.\u0275fac=function(o){return new(o||n)(Ue(h0))},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),Wp=new $e("",{providedIn:"root",factory:()=>({})}),Gp=new $e(""),UM=(()=>{let n=class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=te(Xf)}loadComponent(s){if(this.componentLoaders.get(s))return this.componentLoaders.get(s);if(s._loadedComponent)return be(s._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(s);let o=xi(s.loadComponent()).pipe(qe(U0),Xt(h=>{this.onLoadEndListener&&this.onLoadEndListener(s),s._loadedComponent=h}),ua(()=>{this.componentLoaders.delete(s)})),c=new Kr(o,()=>new rn).pipe(Xr());return this.componentLoaders.set(s,c),c}loadChildren(s,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return be({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);let h=HM(o,this.compiler,s,this.onLoadEndListener).pipe(ua(()=>{this.childrenLoaders.delete(o)})),f=new Kr(h,()=>new rn).pipe(Xr());return this.childrenLoaders.set(o,f),f}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function HM(t,n,i,s){return xi(t.loadChildren()).pipe(qe(U0),Ft(o=>o instanceof Ea||Array.isArray(o)?be(o):St(n.compileModuleAsync(o))),qe(o=>{s&&s(t);let c,h,f=!1;return Array.isArray(o)?(h=o,f=!0):(c=o.create(i).injector,h=c.get(Gp,[],{optional:!0,self:!0}).flat()),{routes:h.map(Hp),injector:c}}))}function zM(t){return t&&typeof t=="object"&&"default"in t}function U0(t){return zM(t)?t.default:t}var Zp=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:()=>te(WM),providedIn:"root"});let t=n;return t})(),WM=(()=>{let n=class n{shouldProcessUrl(s){return!0}extract(s){return s}merge(s,o){return s}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),GM=new $e("");var ZM=(()=>{let n=class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new rn,this.transitionAbortSubject=new rn,this.configLoader=te(UM),this.environmentInjector=te(Wn),this.urlSerializer=te(jp),this.rootContexts=te(Kl),this.location=te(La),this.inputBindingEnabled=te(Up,{optional:!0})!==null,this.titleStrategy=te($0),this.options=te(Wp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=te(Zp),this.createViewTransition=te(GM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>be(void 0),this.rootComponentType=null;let s=c=>this.events.next(new Dp(c)),o=c=>this.events.next(new xp(c));this.configLoader.onLoadEndListener=o,this.configLoader.onLoadStartListener=s}complete(){this.transitions?.complete()}handleNavigationRequest(s){let o=++this.navigationId;this.transitions?.next(ie(F(F({},this.transitions.value),s),{id:o}))}setupNavigations(s,o,c){return this.transitions=new Nt({id:0,currentUrlTree:o,currentRawUrl:o,extractedUrl:this.urlHandlingStrategy.extract(o),urlAfterRedirects:this.urlHandlingStrategy.extract(o),rawUrl:o,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:za,restoredState:null,currentSnapshot:c.snapshot,targetSnapshot:null,currentRouterState:c,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(us(h=>h.id!==0),qe(h=>ie(F({},h),{extractedUrl:this.urlHandlingStrategy.extract(h.rawUrl)})),ls(h=>{let f=!1,m=!1;return be(h).pipe(ls(_=>{if(this.navigationId>h.id)return this.cancelNavigationTransition(h,"",Ln.SupersededByNewNavigation),On;this.currentTransition=h,this.currentNavigation={id:_.id,initialUrl:_.rawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?ie(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let x=!s.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),I=_.extras.onSameUrlNavigation??s.onSameUrlNavigation;if(!x&&I!=="reload"){let L="";return this.events.next(new or(_.id,this.urlSerializer.serialize(_.rawUrl),L,vp.IgnoredSameUrlNavigation)),_.resolve(null),On}if(this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return be(_).pipe(ls(L=>{let z=this.transitions?.getValue();return this.events.next(new Za(L.id,this.urlSerializer.serialize(L.extractedUrl),L.source,L.restoredState)),z!==this.transitions?.getValue()?On:Promise.resolve(L)}),LM(this.environmentInjector,this.configLoader,this.rootComponentType,s.config,this.urlSerializer,this.paramsInheritanceStrategy),Xt(L=>{h.targetSnapshot=L.targetSnapshot,h.urlAfterRedirects=L.urlAfterRedirects,this.currentNavigation=ie(F({},this.currentNavigation),{finalUrl:L.urlAfterRedirects});let z=new Wl(L.id,this.urlSerializer.serialize(L.extractedUrl),this.urlSerializer.serialize(L.urlAfterRedirects),L.targetSnapshot);this.events.next(z)}));if(x&&this.urlHandlingStrategy.shouldProcessUrl(_.currentRawUrl)){let{id:L,extractedUrl:z,source:he,restoredState:pe,extras:Fe}=_,Oe=new Za(L,this.urlSerializer.serialize(z),he,pe);this.events.next(Oe);let bt=O0(this.rootComponentType).snapshot;return this.currentTransition=h=ie(F({},_),{targetSnapshot:bt,urlAfterRedirects:z,extras:ie(F({},Fe),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=z,be(h)}else{let L="";return this.events.next(new or(_.id,this.urlSerializer.serialize(_.extractedUrl),L,vp.IgnoredByUrlHandlingStrategy)),_.resolve(null),On}}),Xt(_=>{let x=new yp(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(x)}),qe(_=>(this.currentTransition=h=ie(F({},_),{guards:tM(_.targetSnapshot,_.currentSnapshot,this.rootContexts)}),h)),hM(this.environmentInjector,_=>this.events.next(_)),Xt(_=>{if(h.guardsResult=_.guardsResult,Ro(_.guardsResult))throw F0(this.urlSerializer,_.guardsResult);let x=new _p(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.events.next(x)}),us(_=>_.guardsResult?!0:(this.cancelNavigationTransition(_,"",Ln.GuardRejected),!1)),hp(_=>{if(_.guards.canActivateChecks.length)return be(_).pipe(Xt(x=>{let I=new wp(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(I)}),ls(x=>{let I=!1;return be(x).pipe(VM(this.paramsInheritanceStrategy,this.environmentInjector),Xt({next:()=>I=!0,complete:()=>{I||this.cancelNavigationTransition(x,"",Ln.NoDataFromResolver)}}))}),Xt(x=>{let I=new bp(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(I)}))}),hp(_=>{let x=I=>{let L=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&L.push(this.configLoader.loadComponent(I.routeConfig).pipe(Xt(z=>{I.component=z}),qe(()=>{})));for(let z of I.children)L.push(...x(z));return L};return ju(x(_.targetSnapshot.root)).pipe(gi(null),Zs(1))}),hp(()=>this.afterPreactivation()),ls(()=>{let{currentSnapshot:_,targetSnapshot:x}=h,I=this.createViewTransition?.(this.environmentInjector,_.root,x.root);return I?St(I).pipe(qe(()=>h)):be(h)}),qe(_=>{let x=GI(s.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return this.currentTransition=h=ie(F({},_),{targetRouterState:x}),this.currentNavigation.targetRouterState=x,h}),Xt(()=>{this.events.next(new Ya)}),eM(this.rootContexts,s.routeReuseStrategy,_=>this.events.next(_),this.inputBindingEnabled),Zs(1),Xt({next:_=>{f=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ei(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects))),this.titleStrategy?.updateTitle(_.targetRouterState.snapshot),_.resolve(!0)},complete:()=>{f=!0}}),rd(this.transitionAbortSubject.pipe(Xt(_=>{throw _}))),ua(()=>{!f&&!m&&this.cancelNavigationTransition(h,"",Ln.SupersededByNewNavigation),this.currentTransition?.id===h.id&&(this.currentNavigation=null,this.currentTransition=null)}),mi(_=>{if(m=!0,L0(_))this.events.next(new Di(h.id,this.urlSerializer.serialize(h.extractedUrl),_.message,_.cancellationCode)),YI(_)?this.events.next(new Xa(_.url)):h.resolve(!1);else{this.events.next(new Qa(h.id,this.urlSerializer.serialize(h.extractedUrl),_,h.targetSnapshot??void 0));try{h.resolve(s.errorHandler(_))}catch(x){this.options.resolveNavigationPromiseOnError?h.resolve(!1):h.reject(x)}}return On}))}))}cancelNavigationTransition(s,o,c){let h=new Di(s.id,this.urlSerializer.serialize(s.extractedUrl),o,c);this.events.next(h),s.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function QM(t){return t!==za}var YM=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:()=>te(XM),providedIn:"root"});let t=n;return t})(),Vp=class{shouldDetach(n){return!1}store(n,i){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,i){return n.routeConfig===i.routeConfig}},XM=(()=>{let n=class n extends Vp{};n.\u0275fac=(()=>{let s;return function(c){return(s||(s=If(n)))(c||n)}})(),n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),H0=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:()=>te(KM),providedIn:"root"});let t=n;return t})(),KM=(()=>{let n=class n extends H0{constructor(){super(...arguments),this.location=te(La),this.urlSerializer=te(jp),this.options=te(Wp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=te(Zp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new bi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=O0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(s){return this.location.subscribe(o=>{o.type==="popstate"&&s(o.url,o.state)})}handleRouterEvent(s,o){if(s instanceof Za)this.stateMemento=this.createStateMemento();else if(s instanceof or)this.rawUrlTree=o.initialUrl;else if(s instanceof Wl){if(this.urlUpdateStrategy==="eager"&&!o.extras.skipLocationChange){let c=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl);this.setBrowserUrl(c,o)}}else s instanceof Ya?(this.currentUrlTree=o.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl),this.routerState=o.targetRouterState,this.urlUpdateStrategy==="deferred"&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o))):s instanceof Di&&(s.code===Ln.GuardRejected||s.code===Ln.NoDataFromResolver)?this.restoreHistory(o):s instanceof Qa?this.restoreHistory(o,!0):s instanceof ei&&(this.lastSuccessfulId=s.id,this.currentPageId=this.browserPageId)}setBrowserUrl(s,o){let c=this.urlSerializer.serialize(s);if(this.location.isCurrentPathEqualTo(c)||o.extras.replaceUrl){let h=this.browserPageId,f=F(F({},o.extras.state),this.generateNgRouterState(o.id,h));this.location.replaceState(c,"",f)}else{let h=F(F({},o.extras.state),this.generateNgRouterState(o.id,this.browserPageId+1));this.location.go(c,"",h)}}restoreHistory(s,o=!1){if(this.canceledNavigationResolution==="computed"){let c=this.browserPageId,h=this.currentPageId-c;h!==0?this.location.historyGo(h):this.currentUrlTree===s.finalUrl&&h===0&&(this.resetState(s),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(o&&this.resetState(s),this.resetUrlToCurrentUrlTree())}resetState(s){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,s.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(s,o){return this.canceledNavigationResolution==="computed"?{navigationId:s,\u0275routerPageId:o}:{navigationId:s}}};n.\u0275fac=(()=>{let s;return function(c){return(s||(s=If(n)))(c||n)}})(),n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),Ua=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ua||{});function JM(t,n){t.events.pipe(us(i=>i instanceof ei||i instanceof Di||i instanceof Qa||i instanceof or),qe(i=>i instanceof ei||i instanceof or?Ua.COMPLETE:(i instanceof Di?i.code===Ln.Redirect||i.code===Ln.SupersededByNewNavigation:!1)?Ua.REDIRECTING:Ua.FAILED),us(i=>i!==Ua.REDIRECTING),Zs(1)).subscribe(()=>{n()})}function eA(t){throw t}var tA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},eh=(()=>{let n=class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=te(Rl),this.stateManager=te(H0),this.options=te(Wp,{optional:!0})||{},this.pendingTasks=te(Al),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=te(ZM),this.urlSerializer=te(jp),this.location=te(La),this.urlHandlingStrategy=te(Zp),this._events=new rn,this.errorHandler=this.options.errorHandler||eA,this.navigated=!1,this.routeReuseStrategy=te(YM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=te(Gp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!te(Up,{optional:!0}),this.eventsSubscription=new Rt,this.isNgZoneEnabled=te(It)instanceof It&&It.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:s=>{this.console.warn(s)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let s=this.navigationTransitions.events.subscribe(o=>{try{let c=this.navigationTransitions.currentTransition,h=this.navigationTransitions.currentNavigation;if(c!==null&&h!==null){if(this.stateManager.handleRouterEvent(o,h),o instanceof Di&&o.code!==Ln.Redirect&&o.code!==Ln.SupersededByNewNavigation)this.navigated=!0;else if(o instanceof ei)this.navigated=!0;else if(o instanceof Xa){let f=this.urlHandlingStrategy.merge(o.url,c.currentRawUrl),m={info:c.extras.info,skipLocationChange:c.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||QM(c.source)};this.scheduleNavigation(f,za,null,m,{resolve:c.resolve,reject:c.reject,promise:c.promise})}}iA(o)&&this._events.next(o)}catch(c){this.navigationTransitions.transitionAbortSubject.next(c)}});this.eventsSubscription.add(s)}resetRootComponentType(s){this.routerState.root.component=s,this.navigationTransitions.rootComponentType=s}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),za,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((s,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(s,"popstate",o)},0)})}navigateToSyncWithBrowser(s,o,c){let h={replaceUrl:!0},f=c?.navigationId?c:null;if(c){let _=F({},c);delete _.navigationId,delete _.\u0275routerPageId,Object.keys(_).length!==0&&(h.state=_)}let m=this.parseUrl(s);this.scheduleNavigation(m,o,f,h)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(s){this.config=s.map(Hp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(s,o={}){let{relativeTo:c,queryParams:h,fragment:f,queryParamsHandling:m,preserveFragment:_}=o,x=_?this.currentUrlTree.fragment:f,I=null;switch(m){case"merge":I=F(F({},this.currentUrlTree.queryParams),h);break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=h||null}I!==null&&(I=this.removeEmptyProps(I));let L;try{let z=c?c.snapshot:this.routerState.snapshot.root;L=T0(z)}catch{(typeof s[0]!="string"||!s[0].startsWith("/"))&&(s=[]),L=this.currentUrlTree.root}return I0(L,s,I,x??null)}navigateByUrl(s,o={skipLocationChange:!1}){let c=Ro(s)?s:this.parseUrl(s),h=this.urlHandlingStrategy.merge(c,this.rawUrlTree);return this.scheduleNavigation(h,za,null,o)}navigate(s,o={skipLocationChange:!1}){return sA(s),this.navigateByUrl(this.createUrlTree(s,o),o)}serializeUrl(s){return this.urlSerializer.serialize(s)}parseUrl(s){try{return this.urlSerializer.parse(s)}catch{return this.urlSerializer.parse("/")}}isActive(s,o){let c;if(o===!0?c=F({},tA):o===!1?c=F({},nA):c=o,Ro(s))return d0(this.currentUrlTree,s,c);let h=this.parseUrl(s);return d0(this.currentUrlTree,h,c)}removeEmptyProps(s){return Object.entries(s).reduce((o,[c,h])=>(h!=null&&(o[c]=h),o),{})}scheduleNavigation(s,o,c,h,f){if(this.disposed)return Promise.resolve(!1);let m,_,x;f?(m=f.resolve,_=f.reject,x=f.promise):x=new Promise((L,z)=>{m=L,_=z});let I=this.pendingTasks.add();return JM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(I))}),this.navigationTransitions.handleNavigationRequest({source:o,restoredState:c,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:s,extras:h,resolve:m,reject:_,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(L=>Promise.reject(L))}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function sA(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new _e(4008,!1)}function iA(t){return!(t instanceof Ya)&&!(t instanceof Xa)}var Fo=(()=>{let n=class n{constructor(s,o,c,h,f,m){this.router=s,this.route=o,this.tabIndexAttribute=c,this.renderer=h,this.el=f,this.locationStrategy=m,this.href=null,this.commands=null,this.onChanges=new rn,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let _=f.nativeElement.tagName?.toLowerCase();this.isAnchorElement=_==="a"||_==="area",this.isAnchorElement?this.subscription=s.events.subscribe(x=>{x instanceof ei&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(s){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",s)}ngOnChanges(s){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(s){s!=null?(this.commands=Array.isArray(s)?s:[s],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(s,o,c,h,f){let m=this.urlTree;if(m===null||this.isAnchorElement&&(s!==0||o||c||h||f||typeof this.target=="string"&&this.target!="_self"))return!0;let _={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(m,_),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let s=this.urlTree;this.href=s!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(s)):null;let o=this.href===null?null:Gy(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",o)}applyAttributeValue(s,o){let c=this.renderer,h=this.el.nativeElement;o!==null?c.setAttribute(h,s,o):c.removeAttribute(h,s)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};n.\u0275fac=function(o){return new(o||n)(hn(eh),hn(ar),Mf("tabindex"),hn(Do),hn(ks),hn(So))},n.\u0275dir=vo({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(o,c){o&1&&Ae("click",function(f){return c.onClick(f.button,f.ctrlKey,f.shiftKey,f.altKey,f.metaKey)}),o&2&&Qf("target",c.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[zn.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Pa],skipLocationChange:[zn.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Pa],replaceUrl:[zn.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Pa],routerLink:"routerLink"},standalone:!0,features:[Gf,_o]});let t=n;return t})(),z0=(()=>{let n=class n{get isActive(){return this._isActive}constructor(s,o,c,h,f){this.router=s,this.element=o,this.renderer=c,this.cdr=h,this.link=f,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Tt,this.routerEventsSubscription=s.events.subscribe(m=>{m instanceof ei&&this.update()})}ngAfterContentInit(){be(this.links.changes,be(null)).pipe(eo()).subscribe(s=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let s=[...this.links.toArray(),this.link].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=St(s).pipe(eo()).subscribe(o=>{this._isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(s){let o=Array.isArray(s)?s:s.split(" ");this.classes=o.filter(c=>!!c)}ngOnChanges(s){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let s=this.hasActiveLinks();this.classes.forEach(o=>{s?this.renderer.addClass(this.element.nativeElement,o):this.renderer.removeClass(this.element.nativeElement,o)}),s&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==s&&(this._isActive=s,this.cdr.markForCheck(),this.isActiveChange.emit(s))})}isLinkActive(s){let o=rA(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return c=>{let h=c.urlTree;return h?s.isActive(h,o):!1}}hasActiveLinks(){let s=this.isLinkActive(this.router);return this.link&&s(this.link)||this.links.some(s)}};n.\u0275fac=function(o){return new(o||n)(hn(eh),hn(ks),hn(Do),hn(Co),hn(Fo,8))},n.\u0275dir=vo({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(o,c,h){if(o&1&&F_(h,Fo,5),o&2){let f;P_(f=L_())&&(c.links=f)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[_o]});let t=n;return t})();function rA(t){return!!t.paths}var oA=new $e("");function W0(t,...n){return pl([{provide:Gp,multi:!0,useValue:t},[],{provide:ar,useFactory:aA,deps:[eh]},{provide:Yf,multi:!0,useFactory:cA},n.map(i=>i.\u0275providers)])}function aA(t){return t.routerState.root}function cA(){let t=te(Oa);return n=>{let i=t.get(Fa);if(n!==i.components[0])return;let s=t.get(eh),o=t.get(uA);t.get(lA)===1&&s.initialNavigation(),t.get(hA,null,Me.Optional)?.setUpPreloading(),t.get(oA,null,Me.Optional)?.init(),s.resetRootComponentType(i.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var uA=new $e("",{factory:()=>new rn}),lA=new $e("",{providedIn:"root",factory:()=>1});var hA=new $e("");(function(t,n){typeof exports=="object"&&typeof module=="object"?module.exports=n():typeof define=="function"&&define.amd?define([],n):typeof exports=="object"?exports.Tone=n():t.Tone=n()})(typeof self<"u"?self:void 0,()=>(()=>{var t={382:function(o,c,h){(function(f,m,_,x){"use strict";var I=function(Z,Y,K){return{endTime:Y,insertTime:K,type:"exponentialRampToValue",value:Z}},L=function(Z,Y,K){return{endTime:Y,insertTime:K,type:"linearRampToValue",value:Z}},z=function(Z,Y){return{startTime:Y,type:"setValue",value:Z}},he=function(Z,Y,K){return{duration:K,startTime:Y,type:"setValueCurve",values:Z}},pe=function(Z,Y,K){var Ee=K.startTime,re=K.target,Ke=K.timeConstant;return re+(Y-re)*Math.exp((Ee-Z)/Ke)},Fe=function(Z){return Z.type==="exponentialRampToValue"},Oe=function(Z){return Z.type==="linearRampToValue"},bt=function(Z){return Fe(Z)||Oe(Z)},Dt=function(Z){return Z.type==="setValue"},gt=function(Z){return Z.type==="setValueCurve"},wn=function Z(Y,K,Ee,re){var Ke=Y[K];return Ke===void 0?re:bt(Ke)||Dt(Ke)?Ke.value:gt(Ke)?Ke.values[Ke.values.length-1]:pe(Ee,Z(Y,K-1,Ke.startTime,re),Ke)},Ut=function(Z,Y,K,Ee,re){return K===void 0?[Ee.insertTime,re]:bt(K)?[K.endTime,K.value]:Dt(K)?[K.startTime,K.value]:gt(K)?[K.startTime+K.duration,K.values[K.values.length-1]]:[K.startTime,wn(Z,Y-1,K.startTime,re)]},vt=function(Z){return Z.type==="cancelAndHold"},Vn=function(Z){return Z.type==="cancelScheduledValues"},bn=function(Z){return vt(Z)||Vn(Z)?Z.cancelTime:Fe(Z)||Oe(Z)?Z.endTime:Z.startTime},gs=function(Z,Y,K,Ee){var re=Ee.endTime,Ke=Ee.value;return K===Ke?Ke:0<K&&0<Ke||K<0&&Ke<0?K*Math.pow(Ke/K,(Z-Y)/(re-Y)):0},Vs=function(Z,Y,K,Ee){return K+(Z-Y)/(Ee.endTime-Y)*(Ee.value-K)},ic=function(Z,Y){var K=Y.duration,Ee=Y.startTime,re=Y.values;return function(Ke,rt){var ot=Math.floor(rt),Ht=Math.ceil(rt);return ot===Ht?Ke[ot]:(1-(rt-ot))*Ke[ot]+(1-(Ht-rt))*Ke[Ht]}(re,(Z-Ee)/K*(re.length-1))},vs=function(Z){return Z.type==="setTarget"},Vo=function(){return x(function Z(Y){_(this,Z),this._automationEvents=[],this._currenTime=0,this._defaultValue=Y},[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(Z){var Y=bn(Z);if(vt(Z)||Vn(Z)){var K=this._automationEvents.findIndex(function(xn){return Vn(Z)&&gt(xn)?xn.startTime+xn.duration>=Y:bn(xn)>=Y}),Ee=this._automationEvents[K];if(K!==-1&&(this._automationEvents=this._automationEvents.slice(0,K)),vt(Z)){var re=this._automationEvents[this._automationEvents.length-1];if(Ee!==void 0&&bt(Ee)){if(re!==void 0&&vs(re))throw new Error("The internal list is malformed.");var Ke=re===void 0?Ee.insertTime:gt(re)?re.startTime+re.duration:bn(re),rt=re===void 0?this._defaultValue:gt(re)?re.values[re.values.length-1]:re.value,ot=Fe(Ee)?gs(Y,Ke,rt,Ee):Vs(Y,Ke,rt,Ee),Ht=Fe(Ee)?I(ot,Y,this._currenTime):L(ot,Y,this._currenTime);this._automationEvents.push(Ht)}if(re!==void 0&&vs(re)&&this._automationEvents.push(z(this.getValue(Y),Y)),re!==void 0&&gt(re)&&re.startTime+re.duration>Y){var Ci=Y-re.startTime,xt=(re.values.length-1)/re.duration,Jn=Math.max(2,1+Math.ceil(Ci*xt)),ti=Ci/(Jn-1)*xt,Ei=re.values.slice(0,Jn);if(ti<1)for(var es=1;es<Jn;es+=1){var ni=ti*es%1;Ei[es]=re.values[es-1]*(1-ni)+re.values[es]*ni}this._automationEvents[this._automationEvents.length-1]=he(Ei,re.startTime,Ci)}}}else{var Dn=this._automationEvents.findIndex(function(xn){return bn(xn)>Y}),Si=Dn===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[Dn-1];if(Si!==void 0&&gt(Si)&&bn(Si)+Si.duration>Y)return!1;var jo=Fe(Z)?I(Z.value,Z.endTime,this._currenTime):Oe(Z)?L(Z.value,Y,this._currenTime):Z;if(Dn===-1)this._automationEvents.push(jo);else{if(gt(Z)&&Y+Z.duration>bn(this._automationEvents[Dn]))return!1;this._automationEvents.splice(Dn,0,jo)}}return!0}},{key:"flush",value:function(Z){var Y=this._automationEvents.findIndex(function(re){return bn(re)>Z});if(Y>1){var K=this._automationEvents.slice(Y-1),Ee=K[0];vs(Ee)&&K.unshift(z(wn(this._automationEvents,Y-2,Ee.startTime,this._defaultValue),Ee.startTime)),this._automationEvents=K}}},{key:"getValue",value:function(Z){if(this._automationEvents.length===0)return this._defaultValue;var Y=this._automationEvents.findIndex(function(Ei){return bn(Ei)>Z}),K=this._automationEvents[Y],Ee=(Y===-1?this._automationEvents.length:Y)-1,re=this._automationEvents[Ee];if(re!==void 0&&vs(re)&&(K===void 0||!bt(K)||K.insertTime>Z))return pe(Z,wn(this._automationEvents,Ee-1,re.startTime,this._defaultValue),re);if(re!==void 0&&Dt(re)&&(K===void 0||!bt(K)))return re.value;if(re!==void 0&&gt(re)&&(K===void 0||!bt(K)||re.startTime+re.duration>Z))return Z<re.startTime+re.duration?ic(Z,re):re.values[re.values.length-1];if(re!==void 0&&bt(re)&&(K===void 0||!bt(K)))return re.value;if(K!==void 0&&Fe(K)){var Ke=Ut(this._automationEvents,Ee,re,K,this._defaultValue),rt=m(Ke,2),ot=rt[0],Ht=rt[1];return gs(Z,ot,Ht,K)}if(K!==void 0&&Oe(K)){var Ci=Ut(this._automationEvents,Ee,re,K,this._defaultValue),xt=m(Ci,2),Jn=xt[0],ti=xt[1];return Vs(Z,Jn,ti,K)}return this._defaultValue}}])}();f.AutomationEventList=Vo,f.createCancelAndHoldAutomationEvent=function(Z){return{cancelTime:Z,type:"cancelAndHold"}},f.createCancelScheduledValuesAutomationEvent=function(Z){return{cancelTime:Z,type:"cancelScheduledValues"}},f.createExponentialRampToValueAutomationEvent=function(Z,Y){return{endTime:Y,type:"exponentialRampToValue",value:Z}},f.createLinearRampToValueAutomationEvent=function(Z,Y){return{endTime:Y,type:"linearRampToValue",value:Z}},f.createSetTargetAutomationEvent=function(Z,Y,K){return{startTime:Y,target:Z,timeConstant:K,type:"setTarget"}},f.createSetValueAutomationEvent=z,f.createSetValueCurveAutomationEvent=he})(c,h(424),h(690),h(728))},897:o=>{o.exports=function(c,h){(h==null||h>c.length)&&(h=c.length);for(var f=0,m=new Array(h);f<h;f++)m[f]=c[f];return m},o.exports.__esModule=!0,o.exports.default=o.exports},372:o=>{o.exports=function(c){if(Array.isArray(c))return c},o.exports.__esModule=!0,o.exports.default=o.exports},690:o=>{o.exports=function(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")},o.exports.__esModule=!0,o.exports.default=o.exports},728:(o,c,h)=>{var f=h(62);function m(_,x){for(var I=0;I<x.length;I++){var L=x[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(_,f(L.key),L)}}o.exports=function(_,x,I){return x&&m(_.prototype,x),I&&m(_,I),Object.defineProperty(_,"prototype",{writable:!1}),_},o.exports.__esModule=!0,o.exports.default=o.exports},872:o=>{o.exports=function(c,h){var f=c==null?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(f!=null){var m,_,x,I,L=[],z=!0,he=!1;try{if(x=(f=f.call(c)).next,h===0){if(Object(f)!==f)return;z=!1}else for(;!(z=(m=x.call(f)).done)&&(L.push(m.value),L.length!==h);z=!0);}catch(pe){he=!0,_=pe}finally{try{if(!z&&f.return!=null&&(I=f.return(),Object(I)!==I))return}finally{if(he)throw _}}return L}},o.exports.__esModule=!0,o.exports.default=o.exports},218:o=>{o.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},o.exports.__esModule=!0,o.exports.default=o.exports},424:(o,c,h)=>{var f=h(372),m=h(872),_=h(116),x=h(218);o.exports=function(I,L){return f(I)||m(I,L)||_(I,L)||x()},o.exports.__esModule=!0,o.exports.default=o.exports},36:(o,c,h)=>{var f=h(698).default;o.exports=function(m,_){if(f(m)!="object"||!m)return m;var x=m[Symbol.toPrimitive];if(x!==void 0){var I=x.call(m,_||"default");if(f(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(m)},o.exports.__esModule=!0,o.exports.default=o.exports},62:(o,c,h)=>{var f=h(698).default,m=h(36);o.exports=function(_){var x=m(_,"string");return f(x)=="symbol"?x:x+""},o.exports.__esModule=!0,o.exports.default=o.exports},698:o=>{function c(h){return o.exports=c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},o.exports.__esModule=!0,o.exports.default=o.exports,c(h)}o.exports=c,o.exports.__esModule=!0,o.exports.default=o.exports},116:(o,c,h)=>{var f=h(897);o.exports=function(m,_){if(m){if(typeof m=="string")return f(m,_);var x=Object.prototype.toString.call(m).slice(8,-1);return x==="Object"&&m.constructor&&(x=m.constructor.name),x==="Map"||x==="Set"?Array.from(m):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?f(m,_):void 0}},o.exports.__esModule=!0,o.exports.default=o.exports}},n={};function i(o){var c=n[o];if(c!==void 0)return c.exports;var h=n[o]={exports:{}};return t[o].call(h.exports,h,h.exports,i),h.exports}i.d=(o,c)=>{for(var h in c)i.o(c,h)&&!i.o(o,h)&&Object.defineProperty(o,h,{enumerable:!0,get:c[h]})},i.o=(o,c)=>Object.prototype.hasOwnProperty.call(o,c),i.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var s={};return(()=>{"use strict";i.r(s),i.d(s,{AMOscillator:()=>Ir,AMSynth:()=>Mh,Abs:()=>Jm,Add:()=>Pi,AmplitudeEnvelope:()=>Or,Analyser:()=>Hr,AudioToGain:()=>Ic,AutoFilter:()=>Uc,AutoPanner:()=>Hc,AutoWah:()=>zc,BaseContext:()=>xh,BiquadFilter:()=>Rr,BitCrusher:()=>Wc,Buffer:()=>FD,BufferSource:()=>LD,Buffers:()=>PD,Channel:()=>di,Chebyshev:()=>Zc,Chorus:()=>Qc,Clock:()=>Oi,Compressor:()=>Cs,Context:()=>vr,Convolver:()=>yu,CrossFade:()=>ji,DCMeter:()=>Nh,Delay:()=>mn,Destination:()=>SD,Distortion:()=>Yc,Draw:()=>OD,DuoSynth:()=>Nc,EQ3:()=>vu,Emitter:()=>gr,Envelope:()=>Bt,FFT:()=>lu,FMOscillator:()=>Ni,FMSynth:()=>Fc,FatOscillator:()=>Mr,FeedbackCombFilter:()=>Pr,FeedbackDelay:()=>Kc,Filter:()=>gn,Follower:()=>Ur,Freeverb:()=>eu,Frequency:()=>sD,FrequencyClass:()=>un,FrequencyEnvelope:()=>Nr,FrequencyShifter:()=>Jc,Gain:()=>ae,GainToAudio:()=>eg,Gate:()=>fu,GrainPlayer:()=>Oc,GreaterThan:()=>Jo,GreaterThanZero:()=>kc,IntervalTimeline:()=>Qm,JCReverb:()=>tu,LFO:()=>nn,Limiter:()=>pu,Listener:()=>MD,Loop:()=>Br,LowpassCombFilter:()=>Vr,Master:()=>TD,MembraneSynth:()=>Fr,Merge:()=>Ws,MetalSynth:()=>Pc,Meter:()=>uu,MidSideCompressor:()=>mu,MidSideMerge:()=>sa,MidSideSplit:()=>na,Midi:()=>aD,MidiClass:()=>Cr,Mono:()=>Fh,MonoSynth:()=>ui,MultibandCompressor:()=>gu,MultibandSplit:()=>zr,Multiply:()=>ut,Negate:()=>Ih,Noise:()=>$s,NoiseSynth:()=>Lc,Offline:()=>oD,OfflineContext:()=>yr,OmniOscillator:()=>bs,OnePoleFilter:()=>Lr,Oscillator:()=>tn,PWMOscillator:()=>Ar,PanVol:()=>ia,Panner:()=>$r,Panner3D:()=>du,Param:()=>fe,Part:()=>qr,Pattern:()=>Bc,Phaser:()=>iu,PingPongDelay:()=>nu,PitchShift:()=>su,Player:()=>Li,Players:()=>Ac,PluckSynth:()=>Vc,PolySynth:()=>jc,Pow:()=>ki,PulseOscillator:()=>Fi,Recorder:()=>ra,Reverb:()=>ru,Sampler:()=>jr,Scale:()=>Ds,ScaleExp:()=>ea,Sequence:()=>qc,Signal:()=>le,Solo:()=>wt,Split:()=>li,StateTimeline:()=>br,StereoWidener:()=>ou,Subtract:()=>Vi,SyncedSignal:()=>dD,Synth:()=>zs,Ticks:()=>cD,TicksClass:()=>dt,Time:()=>eD,TimeClass:()=>Sn,Timeline:()=>En,ToneAudioBuffer:()=>Le,ToneAudioBuffers:()=>xr,ToneAudioNode:()=>H,ToneBufferSource:()=>qs,ToneEvent:()=>os,ToneOscillatorNode:()=>Tr,Transport:()=>CD,TransportTime:()=>iD,TransportTimeClass:()=>Et,Tremolo:()=>au,Unit:()=>c,UserMedia:()=>Sr,Vibrato:()=>cu,Volume:()=>ws,WaveShaper:()=>$n,Waveform:()=>hu,Zero:()=>Mc,connect:()=>ln,connectSeries:()=>Tn,connectSignal:()=>Xo,context:()=>RD,dbToGain:()=>_r,debug:()=>o,defaultArg:()=>qn,disconnect:()=>Sh,fanIn:()=>rD,ftom:()=>ci,gainToDb:()=>Qo,getContext:()=>ct,getDestination:()=>ID,getDraw:()=>kD,getListener:()=>AD,getTransport:()=>ED,immediate:()=>xD,intervalToFrequencyRatio:()=>wr,isArray:()=>Wt,isBoolean:()=>vh,isDefined:()=>we,isFunction:()=>Bm,isNote:()=>Wo,isNumber:()=>Cn,isObject:()=>js,isString:()=>ss,isUndef:()=>pn,loaded:()=>ND,mtof:()=>Ch,now:()=>DD,optionsFromArguments:()=>S,setContext:()=>bc,start:()=>Jb,supported:()=>Zb,version:()=>h});var o={};i.r(o),i.d(o,{assert:()=>ce,assertContextRunning:()=>yh,assertRange:()=>Gt,assertUsedScheduleTime:()=>Um,enterScheduledCallback:()=>_h,log:()=>Hm,setLogger:()=>Qb,warn:()=>fr});var c={};i.r(c);let h="14.9.17";var f=i(382);let m=new WeakSet,_=new WeakMap,x=new WeakMap,I=new WeakMap,L=new WeakMap,z=new WeakMap,he=new WeakMap,pe=new WeakMap,Fe=new WeakMap,Oe=new WeakMap,bt={construct:()=>bt},Dt=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,gt=(l,e)=>{let r=[],a=l.replace(/^[\s]+/,""),u=a.match(Dt);for(;u!==null;){let d=u[1].slice(1,-1),p=u[0].replace(/([\s]+)?;?$/,"").replace(d,new URL(d,e).toString());r.push(p),a=a.slice(u[0].length).replace(/^[\s]+/,""),u=a.match(Dt)}return[r.join(";"),a]},wn=l=>{if(l!==void 0&&!Array.isArray(l))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Ut=l=>{if(!(e=>{try{new new Proxy(e,bt)}catch{return!1}return!0})(l))throw new TypeError("The given value for processorCtor should be a constructor.");if(l.prototype===null||typeof l.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},vt=(l,e)=>{let r=l.get(e);if(r===void 0)throw new Error("A value with the given key could not be found.");return r},Vn=(l,e)=>{let r=Array.from(l).filter(e);if(r.length>1)throw Error("More than one element was found.");if(r.length===0)throw Error("No element was found.");let[a]=r;return l.delete(a),a},bn=(l,e,r,a)=>{let u=vt(l,e),d=Vn(u,p=>p[0]===r&&p[1]===a);return u.size===0&&l.delete(e),d},gs=l=>vt(he,l),Vs=l=>{if(m.has(l))throw new Error("The AudioNode is already stored.");m.add(l),gs(l).forEach(e=>e(!0))},ic=l=>"port"in l,vs=l=>{if(!m.has(l))throw new Error("The AudioNode is not stored.");m.delete(l),gs(l).forEach(e=>e(!1))},Vo=(l,e)=>{!ic(l)&&e.every(r=>r.size===0)&&vs(l)},Z={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Y=(l,e)=>l.context===e,K=l=>{try{l.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Ee=()=>new DOMException("","IndexSizeError"),re=l=>{var e;l.getChannelData=(e=l.getChannelData,r=>{try{return e.call(l,r)}catch(a){throw a.code===12?Ee():a}})},Ke={numberOfChannels:1},rt=-34028234663852886e22,ot=-rt,Ht=l=>m.has(l),Ci={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},xt=l=>vt(_,l),Jn=l=>vt(I,l),ti=(l,e)=>{let{activeInputs:r}=xt(l);r.forEach(u=>u.forEach(([d])=>{e.includes(l)||ti(d,[...e,l])}));let a=(u=>"playbackRate"in u)(l)?[l.playbackRate]:ic(l)?Array.from(l.parameters.values()):(u=>"frequency"in u&&"gain"in u)(l)?[l.Q,l.detune,l.frequency,l.gain]:(u=>"offset"in u)(l)?[l.offset]:(u=>!("frequency"in u)&&"gain"in u)(l)?[l.gain]:(u=>"detune"in u&&"frequency"in u)(l)?[l.detune,l.frequency]:(u=>"pan"in u)(l)?[l.pan]:[];for(let u of a){let d=Jn(u);d!==void 0&&d.activeInputs.forEach(([p])=>ti(p,e))}Ht(l)&&vs(l)},Ei=l=>{ti(l.destination,[])},es=l=>"context"in l,ni=l=>es(l[0]),Dn=(l,e,r,a)=>{for(let u of l)if(r(u)){if(a)return!1;throw Error("The set contains at least one similar element.")}return l.add(e),!0},Si=(l,e,[r,a],u)=>{Dn(l,[e,r,a],d=>d[0]===e&&d[1]===r,u)},jo=(l,[e,r,a],u)=>{let d=l.get(e);d===void 0?l.set(e,new Set([[r,a]])):Dn(d,[r,a],p=>p[0]===r,u)},xn=l=>"inputs"in l,rc=(l,e,r,a)=>{if(xn(e)){let u=e.inputs[a];return l.connect(u,r,0),[u,r,0]}return l.connect(e,r,a),[e,r,a]},Yp=(l,e,r)=>{for(let a of l)if(a[0]===e&&a[1]===r)return l.delete(a),a;return null},Xp=(l,e)=>{if(!gs(l).delete(e))throw new Error("Missing the expected event listener.")},Kp=(l,e,r)=>{let a=vt(l,e),u=Vn(a,d=>d[0]===r);return a.size===0&&l.delete(e),u},oc=(l,e,r,a)=>{xn(e)?l.disconnect(e.inputs[a],r,0):l.disconnect(e,r,a)},at=l=>vt(x,l),Bo=l=>vt(L,l),Ti=l=>pe.has(l),ac=l=>!m.has(l),Jp=(l,e)=>new Promise(r=>{if(e!==null)r(!0);else{let a=l.createScriptProcessor(256,1,1),u=l.createGain(),d=l.createBuffer(1,2,44100),p=d.getChannelData(0);p[0]=1,p[1]=1;let g=l.createBufferSource();g.buffer=d,g.loop=!0,g.connect(a).connect(l.destination),g.connect(u),g.disconnect(u),a.onaudioprocess=v=>{let y=v.inputBuffer.getChannelData(0);Array.prototype.some.call(y,w=>w===1)?r(!0):r(!1),g.stop(),a.onaudioprocess=null,g.disconnect(a),a.disconnect(l.destination)},g.start()}}),th=(l,e)=>{let r=new Map;for(let a of l)for(let u of a){let d=r.get(u);r.set(u,d===void 0?1:d+1)}r.forEach((a,u)=>e(u,a))},cc=l=>"context"in l,cw=l=>{let e=new Map;l.connect=(r=>(a,u=0,d=0)=>{let p=cc(a)?r(a,u,d):r(a,u),g=e.get(a);return g===void 0?e.set(a,[{input:d,output:u}]):g.every(v=>v.input!==d||v.output!==u)&&g.push({input:d,output:u}),p})(l.connect.bind(l)),l.disconnect=(r=>(a,u,d)=>{if(r.apply(l),a===void 0)e.clear();else if(typeof a=="number")for(let[p,g]of e){let v=g.filter(y=>y.output!==a);v.length===0?e.delete(p):e.set(p,v)}else if(e.has(a))if(u===void 0)e.delete(a);else{let p=e.get(a);if(p!==void 0){let g=p.filter(v=>v.output!==u&&(v.input!==d||d===void 0));g.length===0?e.delete(a):e.set(a,g)}}for(let[p,g]of e)g.forEach(v=>{cc(p)?l.connect(p,v.output,v.input):l.connect(p,v.output)})})(l.disconnect)},nh=(l,e,r,a,u)=>{let[d,p]=((g,v,y,w)=>{let{activeInputs:b,passiveInputs:C}=xt(v),D=Yp(b[w],g,y);return D===null?[bn(C,g,y,w)[2],!1]:[D[2],!0]})(l,r,a,u);if(d!==null&&(Xp(l,d),!p||e||Ti(l)||oc(at(l),at(r),a,u)),Ht(r)){let{activeInputs:g}=xt(r);Vo(r,g)}},sh=(l,e,r,a)=>{let[u,d]=((p,g,v)=>{let{activeInputs:y,passiveInputs:w}=Jn(g),b=Yp(y,p,v);return b===null?[Kp(w,p,v)[1],!1]:[b[2],!0]})(l,r,a);u!==null&&(Xp(l,u),!d||e||Ti(l)||at(l).disconnect(Bo(r),a))};class em{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,r=null){return this._map.forEach((a,u)=>e.call(r,a,u,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}let uw={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function uc(l,e,r,a,u){if(typeof l.copyFromChannel=="function")e[r].byteLength===0&&(e[r]=new Float32Array(128)),l.copyFromChannel(e[r],a,u);else{let d=l.getChannelData(a);if(e[r].byteLength===0)e[r]=d.slice(u,u+128);else{let p=new Float32Array(d.buffer,u*Float32Array.BYTES_PER_ELEMENT,128);e[r].set(p)}}}let tm=(l,e,r,a,u)=>{typeof l.copyToChannel=="function"?e[r].byteLength!==0&&l.copyToChannel(e[r],a,u):e[r].byteLength!==0&&l.getChannelData(a).set(e[r],u)},lc=(l,e)=>{let r=[];for(let a=0;a<l;a+=1){let u=[],d=typeof e=="number"?e:e[a];for(let p=0;p<d;p+=1)u.push(new Float32Array(128));r.push(u)}return r},lw=(l,e,r,a,u,d,p)=>Re(void 0,null,function*(){let g=e===null?128*Math.ceil(l.context.length/128):e.length,v=a.channelCount*a.numberOfInputs,y=u.reduce((E,O)=>E+O,0),w=y===0?null:r.createBuffer(y,g,r.sampleRate);if(d===void 0)throw new Error("Missing the processor constructor.");let b=xt(l),C=yield((E,O)=>{let k=vt(Oe,E),P=at(O);return vt(k,P)})(r,l),D=lc(a.numberOfInputs,a.channelCount),T=lc(a.numberOfOutputs,u),M=Array.from(l.parameters.keys()).reduce((E,O)=>ie(F({},E),{[O]:new Float32Array(128)}),{});for(let E=0;E<g;E+=128){if(a.numberOfInputs>0&&e!==null)for(let O=0;O<a.numberOfInputs;O+=1)for(let k=0;k<a.channelCount;k+=1)uc(e,D[O],k,k,E);d.parameterDescriptors!==void 0&&e!==null&&d.parameterDescriptors.forEach(({name:O},k)=>{uc(e,M,O,v+k,E)});for(let O=0;O<a.numberOfInputs;O+=1)for(let k=0;k<u[O];k+=1)T[O][k].byteLength===0&&(T[O][k]=new Float32Array(128));try{let O=D.map((P,j)=>b.activeInputs[j].size===0?[]:P),k=p(E/r.sampleRate,r.sampleRate,()=>C.process(O,T,M));if(w!==null)for(let P=0,j=0;P<a.numberOfOutputs;P+=1){for(let R=0;R<u[P];R+=1)tm(w,T[P],R,j+R,E);j+=u[P]}if(!k)break}catch(O){l.dispatchEvent(new ErrorEvent("processorerror",{colno:O.colno,filename:O.filename,lineno:O.lineno,message:O.message}));break}}return w}),hw={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},dw={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},fw={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},pw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},mw={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},nm=l=>{let{port1:e,port2:r}=new MessageChannel;return new Promise(a=>{let u=()=>{r.onmessage=null,e.close(),r.close(),a()};r.onmessage=()=>u();try{e.postMessage(l,[l])}catch{}finally{u()}})},gw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},hc=(l,e,r)=>{let a=e[r];if(a===void 0)throw l();return a},vw={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},yw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Lt=()=>new DOMException("","InvalidStateError"),dc=()=>new DOMException("","InvalidAccessError"),_w={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},sm=(l,e,r,a,u,d,p,g,v,y,w)=>{let b=y.length,C=g;for(let D=0;D<b;D+=1){let T=r[0]*y[D];for(let M=1;M<u;M+=1){let E=C-M&v-1;T+=r[M]*d[E],T-=l[M]*p[E]}for(let M=u;M<a;M+=1)T+=r[M]*d[C-M&v-1];for(let M=u;M<e;M+=1)T-=l[M]*p[C-M&v-1];d[C]=y[D],p[C]=T,C=C+1&v-1,w[D]=T}return C},ww={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},qo=l=>{let e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{let r=l.decodeAudioData(e.buffer,()=>{});return r!==void 0&&(r.catch(()=>{}),!0)}catch{}return!1},ht=(l,e,r)=>{let a=e[r];a!==void 0&&a!==l[r]&&(l[r]=a)},Ot=(l,e)=>{ht(l,e,"channelCount"),ht(l,e,"channelCountMode"),ht(l,e,"channelInterpretation")},im=l=>typeof l.getFloatTimeDomainData=="function",yt=(l,e,r)=>{let a=e[r];a!==void 0&&a!==l[r].value&&(l[r].value=a)},ih=l=>{l.start=(e=>(r=0,a=0,u)=>{if(typeof u=="number"&&u<0||a<0||r<0)throw new RangeError("The parameters can't be negative.");e.call(l,r,a,u)})(l.start)},rh=l=>{var e;l.stop=(e=l.stop,(r=0)=>{if(r<0)throw new RangeError("The parameter can't be negative.");e.call(l,r)})},rm=(l,e)=>l===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(l*e))))),om=(l,e)=>{let r=l.createBiquadFilter();return Ot(r,e),yt(r,e,"Q"),yt(r,e,"detune"),yt(r,e,"frequency"),yt(r,e,"gain"),ht(r,e,"type"),r},$o=(l,e)=>{let r=l.createChannelSplitter(e.numberOfOutputs);return Ot(r,e),(a=>{let u=a.numberOfOutputs;Object.defineProperty(a,"channelCount",{get:()=>u,set:d=>{if(d!==u)throw Lt()}}),Object.defineProperty(a,"channelCountMode",{get:()=>"explicit",set:d=>{if(d!=="explicit")throw Lt()}}),Object.defineProperty(a,"channelInterpretation",{get:()=>"discrete",set:d=>{if(d!=="discrete")throw Lt()}})})(r),r},cr=(l,e)=>(l.connect=e.connect.bind(e),l.disconnect=e.disconnect.bind(e),l),am=(l,e)=>{let r=l.createDelay(e.maxDelayTime);return Ot(r,e),yt(r,e,"delayTime"),r},fn=(l,e)=>{let r=l.createGain();return Ot(r,e),yt(r,e,"gain"),r};function bw(l,e){let r=e[0]*e[0]+e[1]*e[1];return[(l[0]*e[0]+l[1]*e[1])/r,(l[1]*e[0]-l[0]*e[1])/r]}function cm(l,e){let r=[0,0];for(let d=l.length-1;d>=0;d-=1)u=e,r=[(a=r)[0]*u[0]-a[1]*u[1],a[0]*u[1]+a[1]*u[0]],r[0]+=l[d];var a,u;return r}let Uo=(l,e,r,a)=>l.createScriptProcessor(e,r,a),cn=()=>new DOMException("","NotSupportedError"),Dw={numberOfChannels:1},xw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Cw={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Ew={disableNormalization:!1},Sw={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Tw=()=>new DOMException("","UnknownError"),Iw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},um=(l,e,r)=>l.copyFromChannel===void 0?l.getChannelData(r)[0]:(l.copyFromChannel(e,r),e[0]),lm=l=>{if(l===null)return!1;let e=l.length;return e%2!=0?l[Math.floor(e/2)]!==0:l[e/2-1]+l[e/2]!==0},Ho=(l,e,r,a)=>{let u=l;for(;!u.hasOwnProperty(e);)u=Object.getPrototypeOf(u);let{get:d,set:p}=Object.getOwnPropertyDescriptor(u,e);Object.defineProperty(l,e,{get:r(d),set:a(p)})},hm=(l,e,r)=>{try{l.setValueAtTime(e,r)}catch(a){if(a.code!==9)throw a;hm(l,e,r+1e-7)}},oh=l=>{let e=l.createOscillator();try{e.start(-1)}catch(r){return r instanceof RangeError}return!1},dm=l=>{let e=l.createBuffer(1,1,44100),r=l.createBufferSource();r.buffer=e,r.start(),r.stop();try{return r.stop(),!0}catch{return!1}},ah=l=>{let e=l.createOscillator();try{e.stop(-1)}catch(r){return r instanceof RangeError}return!1},Mw=()=>{try{new DOMException}catch{return!1}return!0},Aw=()=>new Promise(l=>{let e=new ArrayBuffer(0),{port1:r,port2:a}=new MessageChannel;r.onmessage=({data:u})=>l(u!==null),a.postMessage(e,[e])}),fm=(l,e)=>{let r=e.createGain();l.connect(r);let a=(u=>()=>{u.call(l,r),l.removeEventListener("ended",a)})(l.disconnect);l.addEventListener("ended",a),cr(l,r),l.stop=(u=>{let d=!1;return(p=0)=>{if(d)try{u.call(l,p)}catch{r.gain.setValueAtTime(0,p)}else u.call(l,p),d=!0}})(l.stop)},ur=(l,e)=>r=>{let a={value:l};return Object.defineProperties(r,{currentTarget:a,target:a}),typeof e=="function"?e.call(l,r):e.handleEvent.call(l,r)},Ow=(l=>(e,r,[a,u,d],p)=>{l(e[u],[r,a,d],g=>g[0]===r&&g[1]===a,p)})(Dn),kw=(l=>(e,r,[a,u,d],p)=>{let g=e.get(a);g===void 0?e.set(a,new Set([[u,r,d]])):l(g,[u,r,d],v=>v[0]===u&&v[1]===r,p)})(Dn),Rw=(l=>(e,r,a,u)=>l(e[u],d=>d[0]===r&&d[1]===a))(Vn),pm=new WeakMap,Nw=(l=>e=>{var r;return(r=l.get(e))!==null&&r!==void 0?r:0})(pm),jn=(fc=new Map,zo=new WeakMap,(l,e)=>{let r=zo.get(l);if(r!==void 0)return r;let a=fc.get(l);if(a!==void 0)return a;try{let u=e();return u instanceof Promise?(fc.set(l,u),u.catch(()=>!1).then(d=>(fc.delete(l),zo.set(l,d),d))):(zo.set(l,u),u)}catch{return zo.set(l,!1),!1}});var fc,zo;let ts=typeof window>"u"?null:window,mm=((l,e)=>(r,a)=>{let u=r.createAnalyser();if(Ot(u,a),!(a.maxDecibels>a.minDecibels))throw e();return ht(u,a,"fftSize"),ht(u,a,"maxDecibels"),ht(u,a,"minDecibels"),ht(u,a,"smoothingTimeConstant"),l(im,()=>im(u))||(d=>{d.getFloatTimeDomainData=p=>{let g=new Uint8Array(p.length);d.getByteTimeDomainData(g);let v=Math.max(g.length,d.fftSize);for(let y=0;y<v;y+=1)p[y]=.0078125*(g[y]-128);return p}})(u),u})(jn,Ee),ch=(l=>e=>{let r=l(e);if(r.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return r.renderer})(xt),zt=((l,e,r)=>(a,u,d)=>Re(void 0,null,function*(){let p=l(a);yield Promise.all(p.activeInputs.map((g,v)=>Array.from(g).map(b=>Re(void 0,[b],function*([y,w]){let C=e(y),D=yield C.render(y,u),T=a.context.destination;r(y)||a===T&&r(a)||D.connect(d,w,v)}))).reduce((g,v)=>[...g,...v],[]))}))(xt,ch,Ti),Fw=((l,e,r)=>()=>{let a=new WeakMap;return{render(u,d){let p=a.get(d);return p!==void 0?Promise.resolve(p):((g,v)=>Re(this,null,function*(){let y=e(g);if(!Y(y,v)){let w={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,fftSize:y.fftSize,maxDecibels:y.maxDecibels,minDecibels:y.minDecibels,smoothingTimeConstant:y.smoothingTimeConstant};y=l(v,w)}return a.set(v,y),yield r(g,v,y),y}))(u,d)}}})(mm,at,zt),it=(gm=z,l=>{let e=gm.get(l);if(e===void 0)throw Lt();return e});var gm;let Vt=(l=>l===null?null:l.hasOwnProperty("OfflineAudioContext")?l.OfflineAudioContext:l.hasOwnProperty("webkitOfflineAudioContext")?l.webkitOfflineAudioContext:null)(ts),Je=(l=>e=>l!==null&&e instanceof l)(Vt),vm=new WeakMap,ym=(l=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,r,a){if(r!==null){let u=this._listeners.get(r);u===void 0&&(u=l(this,r),typeof r=="function"&&this._listeners.set(r,u)),this._nativeEventTarget.addEventListener(e,u,a)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,r,a){let u=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(e,u===void 0?null:u,a)}})(ur),si=(l=>l===null?null:l.hasOwnProperty("AudioContext")?l.AudioContext:l.hasOwnProperty("webkitAudioContext")?l.webkitAudioContext:null)(ts),uh=(l=>e=>l!==null&&e instanceof l)(si),lh=(l=>e=>l!==null&&typeof l.AudioNode=="function"&&e instanceof l.AudioNode)(ts),_m=(l=>e=>l!==null&&typeof l.AudioParam=="function"&&e instanceof l.AudioParam)(ts),lr=(l=>l===null?null:l.hasOwnProperty("AudioWorkletNode")?l.AudioWorkletNode:null)(ts),Ct=((l,e,r,a,u,d,p,g,v,y,w,b,C,D,T,M)=>class extends y{constructor(E,O,k,P){super(k),this._context=E,this._nativeAudioNode=k;let j=w(E);b(j)&&r(Jp,()=>Jp(j,M))!==!0&&cw(k),x.set(this,k),he.set(this,new Set),E.state!=="closed"&&O&&Vs(this),l(this,P,k)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(E){this._nativeAudioNode.channelCount=E}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(E){this._nativeAudioNode.channelCountMode=E}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(E){this._nativeAudioNode.channelInterpretation=E}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(E,O=0,k=0){if(O<0||O>=this._nativeAudioNode.numberOfOutputs)throw u();let P=w(this._context),j=T(P);if(C(E)||D(E))throw d();if(es(E)){let A=at(E);try{let V=rc(this._nativeAudioNode,A,O,k),N=ac(this);(j||N)&&this._nativeAudioNode.disconnect(...V),this.context.state!=="closed"&&!N&&ac(E)&&Vs(E)}catch(V){throw V.code===12?d():V}if(e(this,E,O,k,j)){let V=v([this],E);th(V,a(j))}return E}let R=Bo(E);if(R.name==="playbackRate"&&R.maxValue===1024)throw p();try{this._nativeAudioNode.connect(R,O),(j||ac(this))&&this._nativeAudioNode.disconnect(R,O)}catch(A){throw A.code===12?d():A}if(((A,V,N,q)=>{let{activeInputs:B,passiveInputs:U}=Jn(V),{outputs:$}=xt(A),W=gs(A),se=J=>{let oe=at(A),me=Bo(V);if(J){let ee=Kp(U,A,N);Si(B,A,ee,!1),q||Ti(A)||oe.connect(me,N)}else{let ee=((ye,ke,ft)=>Vn(ye,mt=>mt[0]===ke&&mt[1]===ft))(B,A,N);jo(U,ee,!1),q||Ti(A)||oe.disconnect(me,N)}};return!!Dn($,[V,N],J=>J[0]===V&&J[1]===N,!0)&&(W.add(se),Ht(A)?Si(B,A,[N,se],!0):jo(U,[A,N,se],!0),!0)})(this,E,O,j)){let A=v([this],E);th(A,a(j))}}disconnect(E,O,k){let P,j=w(this._context),R=T(j);if(E===void 0)P=((A,V)=>{let N=xt(A),q=[];for(let B of N.outputs)ni(B)?nh(A,V,...B):sh(A,V,...B),q.push(B[0]);return N.outputs.clear(),q})(this,R);else if(typeof E=="number"){if(E<0||E>=this.numberOfOutputs)throw u();P=((A,V,N)=>{let q=xt(A),B=[];for(let U of q.outputs)U[1]===N&&(ni(U)?nh(A,V,...U):sh(A,V,...U),B.push(U[0]),q.outputs.delete(U));return B})(this,R,E)}else{if(O!==void 0&&(O<0||O>=this.numberOfOutputs)||es(E)&&k!==void 0&&(k<0||k>=E.numberOfInputs))throw u();if(P=((A,V,N,q,B)=>{let U=xt(A);return Array.from(U.outputs).filter($=>!($[0]!==N||q!==void 0&&$[1]!==q||B!==void 0&&$[2]!==B)).map($=>(ni($)?nh(A,V,...$):sh(A,V,...$),U.outputs.delete($),$[0]))})(this,R,E,O,k),P.length===0)throw d()}for(let A of P){let V=v([this],A);th(V,g)}}})((wm=_,(l,e,r)=>{let a=[];for(let u=0;u<r.numberOfInputs;u+=1)a.push(new Set);wm.set(l,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),((l,e,r,a,u,d,p,g,v,y,w,b,C)=>{let D=new WeakMap;return(T,M,E,O,k)=>{let{activeInputs:P,passiveInputs:j}=d(M),{outputs:R}=d(T),A=g(T),V=N=>{let q=v(M),B=v(T);if(N){let U=bn(j,T,E,O);l(P,T,U,!1),k||b(T)||r(B,q,E,O),C(M)&&Vs(M)}else{let U=a(P,T,E,O);e(j,O,U,!1),k||b(T)||u(B,q,E,O);let $=p(M);if($===0)w(M)&&Vo(M,P);else{let W=D.get(M);W!==void 0&&clearTimeout(W),D.set(M,setTimeout(()=>{w(M)&&Vo(M,P)},1e3*$))}}};return!!y(R,[M,E,O],N=>N[0]===M&&N[1]===E&&N[2]===O,!0)&&(A.add(V),w(T)?l(P,T,[E,O,V],!0):e(j,O,[T,E,V],!0),!0)}})(Ow,kw,rc,Rw,oc,xt,Nw,gs,at,Dn,Ht,Ti,ac),jn,((l,e,r,a,u,d)=>p=>(g,v)=>{let y=l.get(g);if(y===void 0){if(!p&&d(g)){let w=a(g),{outputs:b}=r(g);for(let C of b)if(ni(C)){let D=a(C[0]);e(w,D,C[1],C[2])}else{let D=u(C[0]);w.disconnect(D,C[1])}}l.set(g,v)}else l.set(g,y+v)})(pe,oc,xt,at,Bo,Ht),Ee,dc,cn,((l,e,r,a,u,d,p,g)=>(v,y)=>{let w=e.get(v);if(w===void 0)throw new Error("Missing the expected cycle count.");let b=d(v.context),C=g(b);if(w===y){if(e.delete(v),!C&&p(v)){let D=a(v),{outputs:T}=r(v);for(let M of T)if(ni(M)){let E=a(M[0]);l(D,E,M[1],M[2])}else{let E=u(M[0]);D.connect(E,M[1])}}}else e.set(v,w-y)})(rc,pe,xt,at,Bo,it,Ht,Je),((l,e,r)=>function a(u,d){let p=es(d)?d:r(l,d);if((v=>"delayTime"in v)(p))return[];if(u[0]===p)return[u];if(u.includes(p))return[];let{outputs:g}=e(p);return Array.from(g).map(v=>a([...u,p],v[0])).reduce((v,y)=>v.concat(y),[])})(vm,xt,vt),ym,it,uh,lh,_m,Je,lr);var wm;let Pw=((l,e,r,a,u,d)=>class extends l{constructor(p,g){let v=u(p),y=F(F({},Z),g),w=a(v,y);super(p,!1,w,d(v)?e():null),this._nativeAnalyserNode=w}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(p){this._nativeAnalyserNode.fftSize=p}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(p){let g=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=p,!(p>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=g,r()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(p){let g=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=p,!(this._nativeAnalyserNode.maxDecibels>p))throw this._nativeAnalyserNode.minDecibels=g,r()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(p){this._nativeAnalyserNode.smoothingTimeConstant=p}getByteFrequencyData(p){this._nativeAnalyserNode.getByteFrequencyData(p)}getByteTimeDomainData(p){this._nativeAnalyserNode.getByteTimeDomainData(p)}getFloatFrequencyData(p){this._nativeAnalyserNode.getFloatFrequencyData(p)}getFloatTimeDomainData(p){this._nativeAnalyserNode.getFloatTimeDomainData(p)}})(Ct,Fw,Ee,mm,it,Je),hh=new WeakSet,bm=(l=>l===null?null:l.hasOwnProperty("AudioBuffer")?l.AudioBuffer:null)(ts),Dm=(dh=new Uint32Array(1),l=>(dh[0]=l,dh[0]));var dh;let fh=((l,e)=>r=>{r.copyFromChannel=(a,u,d=0)=>{let p=l(d),g=l(u);if(g>=r.numberOfChannels)throw e();let v=r.length,y=r.getChannelData(g),w=a.length;for(let b=p<0?-p:0;b+p<v&&b<w;b+=1)a[b]=y[b+p]},r.copyToChannel=(a,u,d=0)=>{let p=l(d),g=l(u);if(g>=r.numberOfChannels)throw e();let v=r.length,y=r.getChannelData(g),w=a.length;for(let b=p<0?-p:0;b+p<v&&b<w;b+=1)y[b+p]=a[b]}})(Dm,Ee),ph=(l=>e=>{e.copyFromChannel=(r=>(a,u,d=0)=>{let p=l(d),g=l(u);if(p<e.length)return r.call(e,a,g,p)})(e.copyFromChannel),e.copyToChannel=(r=>(a,u,d=0)=>{let p=l(d),g=l(u);if(p<e.length)return r.call(e,a,g,p)})(e.copyToChannel)})(Dm),xm=((l,e,r,a,u,d,p,g)=>{let v=null;return class G0{constructor(w){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");let{length:b,numberOfChannels:C,sampleRate:D}=F(F({},Ke),w);v===null&&(v=new u(1,1,44100));let T=a!==null&&e(d,d)?new a({length:b,numberOfChannels:C,sampleRate:D}):v.createBuffer(C,b,D);if(T.numberOfChannels===0)throw r();return typeof T.copyFromChannel!="function"?(p(T),re(T)):e(K,()=>K(T))||g(T),l.add(T),T}static[Symbol.hasInstance](w){return w!==null&&typeof w=="object"&&Object.getPrototypeOf(w)===G0.prototype||l.has(w)}}})(hh,jn,cn,bm,Vt,(l=>()=>{if(l===null)return!1;try{new l({length:1,sampleRate:44100})}catch{return!1}return!0})(bm),fh,ph),pc=(l=>(e,r)=>{let a=l(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.connect(a).connect(e.destination);let u=()=>{r.removeEventListener("ended",u),r.disconnect(a),a.disconnect()};r.addEventListener("ended",u)})(fn),Cm=((l,e,r)=>(a,u,d)=>Re(void 0,null,function*(){let p=e(a);yield Promise.all(Array.from(p.activeInputs).map(y=>Re(void 0,[y],function*([g,v]){let w=l(g),b=yield w.render(g,u);r(g)||b.connect(d,v)})))}))(ch,Jn,Ti),ys=(l=>(e,r,a)=>l(r,e,a))(Cm),hr=((l,e,r,a,u,d,p,g,v,y,w)=>(b,C)=>{let D=b.createBufferSource();return Ot(D,C),yt(D,C,"playbackRate"),ht(D,C,"buffer"),ht(D,C,"loop"),ht(D,C,"loopEnd"),ht(D,C,"loopStart"),e(r,()=>r(b))||(T=>{T.start=(M=>{let E=!1;return(O=0,k=0,P)=>{if(E)throw Lt();M.call(T,O,k,P),E=!0}})(T.start)})(D),e(a,()=>a(b))||(T=>{T.start=(M=>(E=0,O=0,k)=>{let P=T.buffer,j=P===null?O:Math.min(P.duration,O);P!==null&&j>P.duration-.5/T.context.sampleRate?M.call(T,E,0,0):M.call(T,E,j,k)})(T.start)})(D),e(u,()=>u(b))||y(D,b),e(d,()=>d(b))||ih(D),e(p,()=>p(b))||w(D,b),e(g,()=>g(b))||rh(D),l(b,D),D})(pc,jn,l=>{let e=l.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},l=>{let e=l.createBufferSource(),r=l.createBuffer(1,1,44100);e.buffer=r;try{e.start(0,1)}catch{return!1}return!0},l=>{let e=l.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},oh,dm,ah,0,(l=>(e,r)=>{let a=r.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=a),l(e,"buffer",u=>()=>{let d=u.call(e);return d===a?null:d},u=>d=>u.call(e,d===null?a:d))})(Ho),fm),_s=((l,e)=>(r,a,u)=>(l(a).replay(u),e(a,r,u)))((l=>e=>{let r=l(e);if(r.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return r.renderer})(Jn),Cm),Lw=((l,e,r,a,u)=>()=>{let d=new WeakMap,p=null,g=null;return{set start(v){p=v},set stop(v){g=v},render(v,y){let w=d.get(y);return w!==void 0?Promise.resolve(w):((b,C)=>Re(this,null,function*(){let D=r(b),T=Y(D,C);if(!T){let M={buffer:D.buffer,channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation,loop:D.loop,loopEnd:D.loopEnd,loopStart:D.loopStart,playbackRate:D.playbackRate.value};D=e(C,M),p!==null&&D.start(...p),g!==null&&D.stop(g)}return d.set(C,D),T?yield l(C,b.playbackRate,D.playbackRate):yield a(C,b.playbackRate,D.playbackRate),yield u(b,C,D),D}))(v,y)}}})(ys,hr,at,_s,zt),ns=((l,e,r,a,u,d,p,g,v,y,w,b,C)=>(D,T,M,E=null,O=null)=>{let k=M.value,P=new f.AutomationEventList(k),j=T?(A=>({replay(V){for(let N of A)if(N.type==="exponentialRampToValue"){let{endTime:q,value:B}=N;V.exponentialRampToValueAtTime(B,q)}else if(N.type==="linearRampToValue"){let{endTime:q,value:B}=N;V.linearRampToValueAtTime(B,q)}else if(N.type==="setTarget"){let{startTime:q,target:B,timeConstant:U}=N;V.setTargetAtTime(B,q,U)}else if(N.type==="setValue"){let{startTime:q,value:B}=N;V.setValueAtTime(B,q)}else{if(N.type!=="setValueCurve")throw new Error("Can't apply an unknown automation.");{let{duration:q,startTime:B,values:U}=N;V.setValueCurveAtTime(U,B,q)}}}}))(P):null,R={get defaultValue(){return k},get maxValue(){return E===null?M.maxValue:E},get minValue(){return O===null?M.minValue:O},get value(){return M.value},set value(A){M.value=A,R.setValueAtTime(A,D.context.currentTime)},cancelAndHoldAtTime(A){if(typeof M.cancelAndHoldAtTime=="function")j===null&&P.flush(D.context.currentTime),P.add(u(A)),M.cancelAndHoldAtTime(A);else{let V=Array.from(P).pop();j===null&&P.flush(D.context.currentTime),P.add(u(A));let N=Array.from(P).pop();M.cancelScheduledValues(A),V!==N&&N!==void 0&&(N.type==="exponentialRampToValue"?M.exponentialRampToValueAtTime(N.value,N.endTime):N.type==="linearRampToValue"?M.linearRampToValueAtTime(N.value,N.endTime):N.type==="setValue"?M.setValueAtTime(N.value,N.startTime):N.type==="setValueCurve"&&M.setValueCurveAtTime(N.values,N.startTime,N.duration))}return R},cancelScheduledValues:A=>(j===null&&P.flush(D.context.currentTime),P.add(d(A)),M.cancelScheduledValues(A),R),exponentialRampToValueAtTime(A,V){if(A===0)throw new RangeError;if(!Number.isFinite(V)||V<0)throw new RangeError;let N=D.context.currentTime;return j===null&&P.flush(N),Array.from(P).length===0&&(P.add(y(k,N)),M.setValueAtTime(k,N)),P.add(p(A,V)),M.exponentialRampToValueAtTime(A,V),R},linearRampToValueAtTime(A,V){let N=D.context.currentTime;return j===null&&P.flush(N),Array.from(P).length===0&&(P.add(y(k,N)),M.setValueAtTime(k,N)),P.add(g(A,V)),M.linearRampToValueAtTime(A,V),R},setTargetAtTime:(A,V,N)=>(j===null&&P.flush(D.context.currentTime),P.add(v(A,V,N)),M.setTargetAtTime(A,V,N),R),setValueAtTime:(A,V)=>(j===null&&P.flush(D.context.currentTime),P.add(y(A,V)),M.setValueAtTime(A,V),R),setValueCurveAtTime(A,V,N){let q=A instanceof Float32Array?A:new Float32Array(A);if(b!==null&&b.name==="webkitAudioContext"){let B=V+N,U=D.context.sampleRate,$=Math.ceil(V*U),W=Math.floor(B*U),se=W-$,J=new Float32Array(se);for(let me=0;me<se;me+=1){let ee=(q.length-1)/N*(($+me)/U-V),ye=Math.floor(ee),ke=Math.ceil(ee);J[me]=ye===ke?q[ye]:(1-(ee-ye))*q[ye]+(1-(ke-ee))*q[ke]}j===null&&P.flush(D.context.currentTime),P.add(w(J,V,N)),M.setValueCurveAtTime(J,V,N);let oe=W/U;oe<B&&C(R,J[J.length-1],oe),C(R,q[q.length-1],B)}else j===null&&P.flush(D.context.currentTime),P.add(w(q,V,N)),M.setValueCurveAtTime(q,V,N);return R}};return r.set(R,M),e.set(R,D),l(R,j),R})((Em=I,(l,e)=>{Em.set(l,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),vm,L,0,f.createCancelAndHoldAutomationEvent,f.createCancelScheduledValuesAutomationEvent,f.createExponentialRampToValueAutomationEvent,f.createLinearRampToValueAutomationEvent,f.createSetTargetAutomationEvent,f.createSetValueAutomationEvent,f.createSetValueCurveAutomationEvent,si,hm);var Em;let Vw=((l,e,r,a,u,d,p,g)=>class extends l{constructor(v,y){let w=d(v),b=F(F({},Ci),y),C=u(w,b),D=p(w),T=D?e():null;super(v,!1,C,T),this._audioBufferSourceNodeRenderer=T,this._isBufferNullified=!1,this._isBufferSet=b.buffer!==null,this._nativeAudioBufferSourceNode=C,this._onended=null,this._playbackRate=r(this,D,C.playbackRate,ot,rt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(v){if(this._nativeAudioBufferSourceNode.buffer=v,v!==null){if(this._isBufferSet)throw a();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(v){this._nativeAudioBufferSourceNode.loop=v}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(v){this._nativeAudioBufferSourceNode.loopEnd=v}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(v){this._nativeAudioBufferSourceNode.loopStart=v}get onended(){return this._onended}set onended(v){let y=typeof v=="function"?g(this,v):null;this._nativeAudioBufferSourceNode.onended=y;let w=this._nativeAudioBufferSourceNode.onended;this._onended=w!==null&&w===y?v:w}get playbackRate(){return this._playbackRate}start(v=0,y=0,w){if(this._nativeAudioBufferSourceNode.start(v,y,w),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=w===void 0?[v,y]:[v,y,w]),this.context.state!=="closed"){Vs(this);let b=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",b),Ht(this)&&vs(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",b)}}stop(v=0){this._nativeAudioBufferSourceNode.stop(v),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=v)}})(Ct,Lw,ns,Lt,hr,it,Je,ur),jw=((l,e,r,a,u,d,p,g)=>class extends l{constructor(v,y){let w=d(v),b=p(w),C=u(w,y,b);super(v,!1,C,b?(D=>{let T=new WeakMap;return{render(M,E){let O=T.get(E);return O!==void 0?Promise.resolve(O):((k,P)=>Re(this,null,function*(){let j=P.destination;return T.set(P,j),yield D(k,P,j),j}))(M,E)}}})(g):null),this._isNodeOfNativeOfflineAudioContext=b,this._nativeAudioDestinationNode=C}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(v){if(this._isNodeOfNativeOfflineAudioContext)throw a();if(v>this._nativeAudioDestinationNode.maxChannelCount)throw r();this._nativeAudioDestinationNode.channelCount=v}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(v){if(this._isNodeOfNativeOfflineAudioContext)throw a();this._nativeAudioDestinationNode.channelCountMode=v}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Ct,0,Ee,Lt,((l,e)=>(r,a,u)=>{let d=r.destination;if(d.channelCount!==a)try{d.channelCount=a}catch{}u&&d.channelCountMode!=="explicit"&&(d.channelCountMode="explicit"),d.maxChannelCount===0&&Object.defineProperty(d,"maxChannelCount",{value:a});let p=l(r,{channelCount:a,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,gain:1});return e(p,"channelCount",g=>()=>g.call(p),g=>v=>{g.call(p,v);try{d.channelCount=v}catch(y){if(v>d.maxChannelCount)throw y}}),e(p,"channelCountMode",g=>()=>g.call(p),g=>v=>{g.call(p,v),d.channelCountMode=v}),e(p,"channelInterpretation",g=>()=>g.call(p),g=>v=>{g.call(p,v),d.channelInterpretation=v}),Object.defineProperty(p,"maxChannelCount",{get:()=>d.maxChannelCount}),p.connect(d),p})(fn,Ho),it,Je,zt),Bw=((l,e,r,a,u)=>()=>{let d=new WeakMap;return{render(p,g){let v=d.get(g);return v!==void 0?Promise.resolve(v):((y,w)=>Re(this,null,function*(){let b=r(y),C=Y(b,w);if(!C){let D={Q:b.Q.value,channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,detune:b.detune.value,frequency:b.frequency.value,gain:b.gain.value,type:b.type};b=e(w,D)}return d.set(w,b),C?(yield l(w,y.Q,b.Q),yield l(w,y.detune,b.detune),yield l(w,y.frequency,b.frequency),yield l(w,y.gain,b.gain)):(yield a(w,y.Q,b.Q),yield a(w,y.detune,b.detune),yield a(w,y.frequency,b.frequency),yield a(w,y.gain,b.gain)),yield u(y,w,b),b}))(p,g)}}})(ys,om,at,_s,zt),Ii=(l=>(e,r)=>l.set(e,r))(pm),qw=((l,e,r,a,u,d,p,g)=>class extends l{constructor(v,y){let w=d(v),b=F(F({},hw),y),C=u(w,b),D=p(w);super(v,!1,C,D?r():null),this._Q=e(this,D,C.Q,ot,rt),this._detune=e(this,D,C.detune,1200*Math.log2(ot),-1200*Math.log2(ot)),this._frequency=e(this,D,C.frequency,v.sampleRate/2,0),this._gain=e(this,D,C.gain,40*Math.log10(ot),rt),this._nativeBiquadFilterNode=C,g(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(v){this._nativeBiquadFilterNode.type=v}getFrequencyResponse(v,y,w){try{this._nativeBiquadFilterNode.getFrequencyResponse(v,y,w)}catch(b){throw b.code===11?a():b}if(v.length!==y.length||y.length!==w.length)throw a()}})(Ct,ns,Bw,dc,om,it,Je,Ii),ii=((l,e)=>(r,a,u)=>{let d=new Set;return r.connect=(p=>(g,v=0,y=0)=>{let w=d.size===0;if(e(g))return p.call(r,g,v,y),l(d,[g,v,y],b=>b[0]===g&&b[1]===v&&b[2]===y,!0),w&&a(),g;p.call(r,g,v),l(d,[g,v],b=>b[0]===g&&b[1]===v,!0),w&&a()})(r.connect),r.disconnect=(p=>(g,v,y)=>{let w=d.size>0;if(g===void 0)p.apply(r),d.clear();else if(typeof g=="number"){p.call(r,g);for(let C of d)C[1]===g&&d.delete(C)}else{e(g)?p.call(r,g,v,y):p.call(r,g,v);for(let C of d)C[0]!==g||v!==void 0&&C[1]!==v||y!==void 0&&C[2]!==y||d.delete(C)}let b=d.size===0;w&&b&&u()})(r.disconnect),r})(Dn,lh),$w=((l,e)=>(r,a)=>{a.channelCount=1,a.channelCountMode="explicit",Object.defineProperty(a,"channelCount",{get:()=>1,set:()=>{throw l()}}),Object.defineProperty(a,"channelCountMode",{get:()=>"explicit",set:()=>{throw l()}});let u=r.createBufferSource();e(a,()=>{let d=a.numberOfInputs;for(let p=0;p<d;p+=1)u.connect(a,0,p)},()=>u.disconnect(a))})(Lt,ii),ri=((l,e)=>(r,a)=>{let u=r.createChannelMerger(a.numberOfInputs);return l!==null&&l.name==="webkitAudioContext"&&e(r,u),Ot(u,a),u})(si,$w),Uw=((l,e,r)=>()=>{let a=new WeakMap;return{render(u,d){let p=a.get(d);return p!==void 0?Promise.resolve(p):((g,v)=>Re(this,null,function*(){let y=e(g);if(!Y(y,v)){let w={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,numberOfInputs:y.numberOfInputs};y=l(v,w)}return a.set(v,y),yield r(g,v,y),y}))(u,d)}}})(ri,at,zt),Hw=((l,e,r,a,u)=>class extends l{constructor(d,p){let g=a(d),v=F(F({},dw),p);super(d,!1,r(g,v),u(g)?e():null)}})(Ct,Uw,ri,it,Je),zw=((l,e,r)=>()=>{let a=new WeakMap;return{render(u,d){let p=a.get(d);return p!==void 0?Promise.resolve(p):((g,v)=>Re(this,null,function*(){let y=e(g);if(!Y(y,v)){let w={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,numberOfOutputs:y.numberOfOutputs};y=l(v,w)}return a.set(v,y),yield r(g,v,y),y}))(u,d)}}})($o,at,zt),Ww=((l,e,r,a,u,d)=>class extends l{constructor(p,g){let v=a(p),y=(w=>ie(F({},w),{channelCount:w.numberOfOutputs}))(F(F({},fw),g));super(p,!1,r(v,y),u(v)?e():null)}})(Ct,zw,$o,it,Je),Gw=((l,e,r,a)=>(u,g)=>{var v=g,{offset:d}=v,p=oa(v,["offset"]);let y=u.createBuffer(1,2,44100),w=e(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),b=r(u,ie(F({},p),{gain:d})),C=y.getChannelData(0);C[0]=1,C[1]=1,w.buffer=y,w.loop=!0;let D={get bufferSize(){},get channelCount(){return b.channelCount},set channelCount(T){b.channelCount=T},get channelCountMode(){return b.channelCountMode},set channelCountMode(T){b.channelCountMode=T},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(T){b.channelInterpretation=T},get context(){return b.context},get inputs(){return[]},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get offset(){return b.gain},get onended(){return w.onended},set onended(T){w.onended=T},addEventListener:(...T)=>w.addEventListener(T[0],T[1],T[2]),dispatchEvent:(...T)=>w.dispatchEvent(T[0]),removeEventListener:(...T)=>w.removeEventListener(T[0],T[1],T[2]),start(T=0){w.start.call(w,T)},stop(T=0){w.stop.call(w,T)}};return l(u,w),a(cr(D,b),()=>w.connect(b),()=>w.disconnect(b))})(pc,hr,fn,ii),dr=((l,e,r,a,u)=>(d,p)=>{if(d.createConstantSource===void 0)return r(d,p);let g=d.createConstantSource();return Ot(g,p),yt(g,p,"offset"),e(a,()=>a(d))||ih(g),e(u,()=>u(d))||rh(g),l(d,g),g})(pc,jn,Gw,oh,ah),Zw=((l,e,r,a,u)=>()=>{let d=new WeakMap,p=null,g=null;return{set start(v){p=v},set stop(v){g=v},render(v,y){let w=d.get(y);return w!==void 0?Promise.resolve(w):((b,C)=>Re(this,null,function*(){let D=r(b),T=Y(D,C);if(!T){let M={channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation,offset:D.offset.value};D=e(C,M),p!==null&&D.start(p),g!==null&&D.stop(g)}return d.set(C,D),T?yield l(C,b.offset,D.offset):yield a(C,b.offset,D.offset),yield u(b,C,D),D}))(v,y)}}})(ys,dr,at,_s,zt),Qw=((l,e,r,a,u,d,p)=>class extends l{constructor(g,v){let y=u(g),w=F(F({},pw),v),b=a(y,w),C=d(y),D=C?r():null;super(g,!1,b,D),this._constantSourceNodeRenderer=D,this._nativeConstantSourceNode=b,this._offset=e(this,C,b.offset,ot,rt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(g){let v=typeof g=="function"?p(this,g):null;this._nativeConstantSourceNode.onended=v;let y=this._nativeConstantSourceNode.onended;this._onended=y!==null&&y===v?g:y}start(g=0){if(this._nativeConstantSourceNode.start(g),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=g),this.context.state!=="closed"){Vs(this);let v=()=>{this._nativeConstantSourceNode.removeEventListener("ended",v),Ht(this)&&vs(this)};this._nativeConstantSourceNode.addEventListener("ended",v)}}stop(g=0){this._nativeConstantSourceNode.stop(g),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=g)}})(Ct,ns,Zw,dr,it,Je,ur),Sm=((l,e)=>(r,a)=>{let u=r.createConvolver();if(Ot(u,a),a.disableNormalization===u.normalize&&(u.normalize=!a.disableNormalization),ht(u,a,"buffer"),a.channelCount>2||(e(u,"channelCount",d=>()=>d.call(u),d=>p=>{if(p>2)throw l();return d.call(u,p)}),a.channelCountMode==="max"))throw l();return e(u,"channelCountMode",d=>()=>d.call(u),d=>p=>{if(p==="max")throw l();return d.call(u,p)}),u})(cn,Ho),Yw=((l,e,r)=>()=>{let a=new WeakMap;return{render(u,d){let p=a.get(d);return p!==void 0?Promise.resolve(p):((g,v)=>Re(this,null,function*(){let y=e(g);if(!Y(y,v)){let w={buffer:y.buffer,channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,disableNormalization:!y.normalize};y=l(v,w)}return a.set(v,y),xn(y)?yield r(g,v,y.inputs[0]):yield r(g,v,y),y}))(u,d)}}})(Sm,at,zt),Xw=((l,e,r,a,u,d)=>class extends l{constructor(p,g){let v=a(p),y=F(F({},mw),g),w=r(v,y);super(p,!1,w,u(v)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=w,y.buffer!==null&&d(this,y.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(p){if(this._nativeConvolverNode.buffer=p,p===null&&this._nativeConvolverNode.buffer!==null){let g=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=g.createBuffer(1,1,g.sampleRate),this._isBufferNullified=!0,d(this,0)}else this._isBufferNullified=!1,d(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(p){this._nativeConvolverNode.normalize=p}})(Ct,Yw,Sm,it,Je,Ii),Kw=((l,e,r,a,u)=>d=>{let p=new WeakMap;return{render(g,v){let y=p.get(v);return y!==void 0?Promise.resolve(y):((w,b)=>Re(this,null,function*(){let C=r(w),D=Y(C,b);if(!D){let T={channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,delayTime:C.delayTime.value,maxDelayTime:d};C=e(b,T)}return p.set(b,C),D?yield l(b,w.delayTime,C.delayTime):yield a(b,w.delayTime,C.delayTime),yield u(w,b,C),C}))(g,v)}}})(ys,am,at,_s,zt),Jw=((l,e,r,a,u,d,p)=>class extends l{constructor(g,v){let y=u(g),w=F(F({},gw),v),b=a(y,w),C=d(y);super(g,!1,b,C?r(w.maxDelayTime):null),this._delayTime=e(this,C,b.delayTime),p(this,w.maxDelayTime)}get delayTime(){return this._delayTime}})(Ct,ns,Kw,am,it,Je,Ii),Tm=(l=>(e,r)=>{let a=e.createDynamicsCompressor();if(Ot(a,r),r.channelCount>2||r.channelCountMode==="max")throw l();return yt(a,r,"attack"),yt(a,r,"knee"),yt(a,r,"ratio"),yt(a,r,"release"),yt(a,r,"threshold"),a})(cn),eb=((l,e,r,a,u)=>()=>{let d=new WeakMap;return{render(p,g){let v=d.get(g);return v!==void 0?Promise.resolve(v):((y,w)=>Re(this,null,function*(){let b=r(y),C=Y(b,w);if(!C){let D={attack:b.attack.value,channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,knee:b.knee.value,ratio:b.ratio.value,release:b.release.value,threshold:b.threshold.value};b=e(w,D)}return d.set(w,b),C?(yield l(w,y.attack,b.attack),yield l(w,y.knee,b.knee),yield l(w,y.ratio,b.ratio),yield l(w,y.release,b.release),yield l(w,y.threshold,b.threshold)):(yield a(w,y.attack,b.attack),yield a(w,y.knee,b.knee),yield a(w,y.ratio,b.ratio),yield a(w,y.release,b.release),yield a(w,y.threshold,b.threshold)),yield u(y,w,b),b}))(p,g)}}})(ys,Tm,at,_s,zt),tb=((l,e,r,a,u,d,p,g)=>class extends l{constructor(v,y){let w=d(v),b=F(F({},vw),y),C=a(w,b),D=p(w);super(v,!1,C,D?r():null),this._attack=e(this,D,C.attack),this._knee=e(this,D,C.knee),this._nativeDynamicsCompressorNode=C,this._ratio=e(this,D,C.ratio),this._release=e(this,D,C.release),this._threshold=e(this,D,C.threshold),g(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(v){let y=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=v,v>2)throw this._nativeDynamicsCompressorNode.channelCount=y,u()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(v){let y=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=v,v==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=y,u()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Ct,ns,eb,Tm,cn,it,Je,Ii),nb=((l,e,r,a,u)=>()=>{let d=new WeakMap;return{render(p,g){let v=d.get(g);return v!==void 0?Promise.resolve(v):((y,w)=>Re(this,null,function*(){let b=r(y),C=Y(b,w);if(!C){let D={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:b.gain.value};b=e(w,D)}return d.set(w,b),C?yield l(w,y.gain,b.gain):yield a(w,y.gain,b.gain),yield u(y,w,b),b}))(p,g)}}})(ys,fn,at,_s,zt),sb=((l,e,r,a,u,d)=>class extends l{constructor(p,g){let v=u(p),y=F(F({},yw),g),w=a(v,y),b=d(v);super(p,!1,w,b?r():null),this._gain=e(this,b,w.gain,ot,rt)}get gain(){return this._gain}})(Ct,ns,nb,fn,it,Je),ib=((l,e,r,a)=>(u,d,{channelCount:p,channelCountMode:g,channelInterpretation:v,feedback:y,feedforward:w})=>{let b=rm(d,u.sampleRate),C=y instanceof Float64Array?y:new Float64Array(y),D=w instanceof Float64Array?w:new Float64Array(w),T=C.length,M=D.length,E=Math.min(T,M);if(T===0||T>20)throw a();if(C[0]===0)throw e();if(M===0||M>20)throw a();if(D[0]===0)throw e();if(C[0]!==1){for(let A=0;A<M;A+=1)D[A]/=C[0];for(let A=1;A<T;A+=1)C[A]/=C[0]}let O=r(u,b,p,p);O.channelCount=p,O.channelCountMode=g,O.channelInterpretation=v;let k=[],P=[],j=[];for(let A=0;A<p;A+=1){k.push(0);let V=new Float32Array(32),N=new Float32Array(32);V.fill(0),N.fill(0),P.push(V),j.push(N)}O.onaudioprocess=A=>{let V=A.inputBuffer,N=A.outputBuffer,q=V.numberOfChannels;for(let B=0;B<q;B+=1){let U=V.getChannelData(B),$=N.getChannelData(B);k[B]=sm(C,T,D,M,E,P[B],j[B],k[B],32,U,$)}};let R=u.sampleRate/2;return cr({get bufferSize(){return b},get channelCount(){return O.channelCount},set channelCount(A){O.channelCount=A},get channelCountMode(){return O.channelCountMode},set channelCountMode(A){O.channelCountMode=A},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(A){O.channelInterpretation=A},get context(){return O.context},get inputs(){return[O]},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},addEventListener:(...A)=>O.addEventListener(A[0],A[1],A[2]),dispatchEvent:(...A)=>O.dispatchEvent(A[0]),getFrequencyResponse(A,V,N){if(A.length!==V.length||V.length!==N.length)throw l();let q=A.length;for(let B=0;B<q;B+=1){let U=-Math.PI*(A[B]/R),$=[Math.cos(U),Math.sin(U)],W=bw(cm(D,$),cm(C,$));V[B]=Math.sqrt(W[0]*W[0]+W[1]*W[1]),N[B]=Math.atan2(W[1],W[0])}},removeEventListener:(...A)=>O.removeEventListener(A[0],A[1],A[2])},O)})(dc,Lt,Uo,cn),mc=((l,e,r,a)=>u=>l(qo,()=>qo(u))?Promise.resolve(l(a,a)).then(d=>{if(!d){let p=r(u,512,0,1);u.oncomplete=()=>{p.onaudioprocess=null,p.disconnect()},p.onaudioprocess=()=>u.currentTime,p.connect(u.destination)}return u.startRendering()}):new Promise(d=>{let p=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});u.oncomplete=g=>{p.disconnect(),d(g.renderedBuffer)},p.connect(u.destination),u.startRendering()}))(jn,fn,Uo,((l,e)=>()=>{if(e===null)return Promise.resolve(!1);let r=new e(1,1,44100),a=l(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(u=>{r.oncomplete=()=>{a.disconnect(),u(r.currentTime!==0)},r.startRendering()})})(fn,Vt)),rb=((l,e,r,a,u)=>(d,p)=>{let g=new WeakMap,v=null;return{render(y,w){let b=g.get(w);return b!==void 0?Promise.resolve(b):((C,D)=>Re(this,null,function*(){let T=null,M=e(C),E=Y(M,D);if(D.createIIRFilter===void 0?T=l(D,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):E||(M=D.createIIRFilter(p,d)),g.set(D,T===null?M:T),T!==null){if(v===null){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");let k=new r(C.context.destination.channelCount,C.context.length,D.sampleRate);v=Re(this,null,function*(){return yield a(C,k,k.destination),((P,j,R,A)=>{let V=R instanceof Float64Array?R:new Float64Array(R),N=A instanceof Float64Array?A:new Float64Array(A),q=V.length,B=N.length,U=Math.min(q,B);if(V[0]!==1){for(let oe=0;oe<q;oe+=1)N[oe]/=V[0];for(let oe=1;oe<B;oe+=1)V[oe]/=V[0]}let $=new Float32Array(32),W=new Float32Array(32),se=j.createBuffer(P.numberOfChannels,P.length,P.sampleRate),J=P.numberOfChannels;for(let oe=0;oe<J;oe+=1){let me=P.getChannelData(oe),ee=se.getChannelData(oe);$.fill(0),W.fill(0),sm(V,q,N,B,U,$,W,0,32,me,ee)}return se})(yield u(k),D,d,p)})}let O=yield v;return T.buffer=O,T.start(0),T}return yield a(C,D,M),M}))(y,w)}}})(hr,at,Vt,zt,mc),ob=(l=>(e,r,a)=>{if(e.createIIRFilter===void 0)return l(e,r,a);let u=e.createIIRFilter(a.feedforward,a.feedback);return Ot(u,a),u})(ib),ab=((l,e,r,a,u,d)=>class extends l{constructor(p,g){let v=a(p),y=u(v),w=F(F({},_w),g),b=e(v,y?null:p.baseLatency,w);super(p,!1,b,y?r(w.feedback,w.feedforward):null),(C=>{var D;C.getFrequencyResponse=(D=C.getFrequencyResponse,(T,M,E)=>{if(T.length!==M.length||M.length!==E.length)throw dc();return D.call(C,T,M,E)})})(b),this._nativeIIRFilterNode=b,d(this,1)}getFrequencyResponse(p,g,v){return this._nativeIIRFilterNode.getFrequencyResponse(p,g,v)}})(Ct,ob,rb,it,Je,Ii),cb=((l,e,r,a,u,d,p,g)=>(v,y)=>{let w=y.listener,{forwardX:b,forwardY:C,forwardZ:D,positionX:T,positionY:M,positionZ:E,upX:O,upY:k,upZ:P}=w.forwardX===void 0?(()=>{let j=new Float32Array(1),R=e(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),A=p(y),V=!1,N=[0,0,-1,0,1,0],q=[0,0,0],B=()=>{if(V)return;V=!0;let se=a(y,256,9,0);se.onaudioprocess=({inputBuffer:J})=>{let oe=[d(J,j,0),d(J,j,1),d(J,j,2),d(J,j,3),d(J,j,4),d(J,j,5)];oe.some((ee,ye)=>ee!==N[ye])&&(w.setOrientation(...oe),N=oe);let me=[d(J,j,6),d(J,j,7),d(J,j,8)];me.some((ee,ye)=>ee!==q[ye])&&(w.setPosition(...me),q=me)},R.connect(se)},U=se=>J=>{J!==N[se]&&(N[se]=J,w.setOrientation(...N))},$=se=>J=>{J!==q[se]&&(q[se]=J,w.setPosition(...q))},W=(se,J,oe)=>{let me=r(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:J});me.connect(R,0,se),me.start(),Object.defineProperty(me.offset,"defaultValue",{get:()=>J});let ee=l({context:v},A,me.offset,ot,rt);var ye,ke,ft,mt,Qe,vn,sn;return g(ee,"value",Ze=>()=>Ze.call(ee),Ze=>de=>{try{Ze.call(ee,de)}catch(Q){if(Q.code!==9)throw Q}B(),A&&oe(de)}),ee.cancelAndHoldAtTime=(ye=ee.cancelAndHoldAtTime,A?()=>{throw u()}:(...Ze)=>{let de=ye.apply(ee,Ze);return B(),de}),ee.cancelScheduledValues=(ke=ee.cancelScheduledValues,A?()=>{throw u()}:(...Ze)=>{let de=ke.apply(ee,Ze);return B(),de}),ee.exponentialRampToValueAtTime=(ft=ee.exponentialRampToValueAtTime,A?()=>{throw u()}:(...Ze)=>{let de=ft.apply(ee,Ze);return B(),de}),ee.linearRampToValueAtTime=(mt=ee.linearRampToValueAtTime,A?()=>{throw u()}:(...Ze)=>{let de=mt.apply(ee,Ze);return B(),de}),ee.setTargetAtTime=(Qe=ee.setTargetAtTime,A?()=>{throw u()}:(...Ze)=>{let de=Qe.apply(ee,Ze);return B(),de}),ee.setValueAtTime=(vn=ee.setValueAtTime,A?()=>{throw u()}:(...Ze)=>{let de=vn.apply(ee,Ze);return B(),de}),ee.setValueCurveAtTime=(sn=ee.setValueCurveAtTime,A?()=>{throw u()}:(...Ze)=>{let de=sn.apply(ee,Ze);return B(),de}),ee};return{forwardX:W(0,0,U(0)),forwardY:W(1,0,U(1)),forwardZ:W(2,-1,U(2)),positionX:W(6,0,$(0)),positionY:W(7,0,$(1)),positionZ:W(8,0,$(2)),upX:W(3,0,U(3)),upY:W(4,1,U(4)),upZ:W(5,0,U(5))}})():w;return{get forwardX(){return b},get forwardY(){return C},get forwardZ(){return D},get positionX(){return T},get positionY(){return M},get positionZ(){return E},get upX(){return O},get upY(){return k},get upZ(){return P}}})(ns,ri,dr,Uo,cn,um,Je,Ho),Im=new WeakMap,ub=((l,e,r,a,u,d)=>class extends r{constructor(p,g){super(p),this._nativeContext=p,z.set(this,p),a(p)&&u.set(p,new Set),this._destination=new l(this,g),this._listener=e(this,p),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(p){let g=typeof p=="function"?d(this,p):null;this._nativeContext.onstatechange=g;let v=this._nativeContext.onstatechange;this._onstatechange=v!==null&&v===g?p:v}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(jw,cb,ym,Je,Im,ur),Mm=((l,e,r,a,u,d)=>(p,g)=>{let v=p.createOscillator();return Ot(v,g),yt(v,g,"detune"),yt(v,g,"frequency"),g.periodicWave!==void 0?v.setPeriodicWave(g.periodicWave):ht(v,g,"type"),e(r,()=>r(p))||ih(v),e(a,()=>a(p))||d(v,p),e(u,()=>u(p))||rh(v),l(p,v),v})(pc,jn,oh,dm,ah,fm),lb=((l,e,r,a,u)=>()=>{let d=new WeakMap,p=null,g=null,v=null;return{set periodicWave(y){p=y},set start(y){g=y},set stop(y){v=y},render(y,w){let b=d.get(w);return b!==void 0?Promise.resolve(b):((C,D)=>Re(this,null,function*(){let T=r(C),M=Y(T,D);if(!M){let E={channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,detune:T.detune.value,frequency:T.frequency.value,periodicWave:p===null?void 0:p,type:T.type};T=e(D,E),g!==null&&T.start(g),v!==null&&T.stop(v)}return d.set(D,T),M?(yield l(D,C.detune,T.detune),yield l(D,C.frequency,T.frequency)):(yield a(D,C.detune,T.detune),yield a(D,C.frequency,T.frequency)),yield u(C,D,T),T}))(y,w)}}})(ys,Mm,at,_s,zt),hb=((l,e,r,a,u,d,p)=>class extends l{constructor(g,v){let y=u(g),w=F(F({},xw),v),b=r(y,w),C=d(y),D=C?a():null,T=g.sampleRate/2;super(g,!1,b,D),this._detune=e(this,C,b.detune,153600,-153600),this._frequency=e(this,C,b.frequency,T,-T),this._nativeOscillatorNode=b,this._onended=null,this._oscillatorNodeRenderer=D,this._oscillatorNodeRenderer!==null&&w.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=w.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(g){let v=typeof g=="function"?p(this,g):null;this._nativeOscillatorNode.onended=v;let y=this._nativeOscillatorNode.onended;this._onended=y!==null&&y===v?g:y}get type(){return this._nativeOscillatorNode.type}set type(g){this._nativeOscillatorNode.type=g,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(g){this._nativeOscillatorNode.setPeriodicWave(g),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=g)}start(g=0){if(this._nativeOscillatorNode.start(g),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=g),this.context.state!=="closed"){Vs(this);let v=()=>{this._nativeOscillatorNode.removeEventListener("ended",v),Ht(this)&&vs(this)};this._nativeOscillatorNode.addEventListener("ended",v)}}stop(g=0){this._nativeOscillatorNode.stop(g),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=g)}})(Ct,ns,Mm,lb,it,Je,ur),Am=(l=>(e,r)=>{let a=l(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=e.createBuffer(1,2,44100);return a.buffer=u,a.loop=!0,a.connect(r),a.start(),()=>{a.stop(),a.disconnect(r)}})(hr),db=((l,e,r,a,u)=>(d,y)=>{var w=y,{curve:p,oversample:g}=w,v=oa(w,["curve","oversample"]);let b=d.createWaveShaper(),C=d.createWaveShaper();Ot(b,v),Ot(C,v);let D=r(d,ie(F({},v),{gain:1})),T=r(d,ie(F({},v),{gain:-1})),M=r(d,ie(F({},v),{gain:1})),E=r(d,ie(F({},v),{gain:-1})),O=null,k=!1,P=null,j={get bufferSize(){},get channelCount(){return b.channelCount},set channelCount(R){D.channelCount=R,T.channelCount=R,b.channelCount=R,M.channelCount=R,C.channelCount=R,E.channelCount=R},get channelCountMode(){return b.channelCountMode},set channelCountMode(R){D.channelCountMode=R,T.channelCountMode=R,b.channelCountMode=R,M.channelCountMode=R,C.channelCountMode=R,E.channelCountMode=R},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(R){D.channelInterpretation=R,T.channelInterpretation=R,b.channelInterpretation=R,M.channelInterpretation=R,C.channelInterpretation=R,E.channelInterpretation=R},get context(){return b.context},get curve(){return P},set curve(R){if(R!==null&&R.length<2)throw e();if(R===null)b.curve=R,C.curve=R;else{let A=R.length,V=new Float32Array(A+2-A%2),N=new Float32Array(A+2-A%2);V[0]=R[0],N[0]=-R[A-1];let q=Math.ceil((A+1)/2),B=(A+1)/2-1;for(let U=1;U<q;U+=1){let $=U/q*B,W=Math.floor($),se=Math.ceil($);V[U]=W===se?R[W]:(1-($-W))*R[W]+(1-(se-$))*R[se],N[U]=W===se?-R[A-1-W]:-(1-($-W))*R[A-1-W]-(1-(se-$))*R[A-1-se]}V[q]=A%2==1?R[q-1]:(R[q-2]+R[q-1])/2,b.curve=V,C.curve=N}P=R,k&&(a(P)&&O===null?O=l(d,D):O!==null&&(O(),O=null))},get inputs(){return[D]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get oversample(){return b.oversample},set oversample(R){b.oversample=R,C.oversample=R},addEventListener:(...R)=>D.addEventListener(R[0],R[1],R[2]),dispatchEvent:(...R)=>D.dispatchEvent(R[0]),removeEventListener:(...R)=>D.removeEventListener(R[0],R[1],R[2])};return p!==null&&(j.curve=p instanceof Float32Array?p:new Float32Array(p)),g!==j.oversample&&(j.oversample=g),u(cr(j,M),()=>{D.connect(b).connect(M),D.connect(T).connect(C).connect(E).connect(M),k=!0,a(P)&&(O=l(d,D))},()=>{D.disconnect(b),b.disconnect(M),D.disconnect(T),T.disconnect(C),C.disconnect(E),E.disconnect(M),k=!1,O!==null&&(O(),O=null)})})(Am,Lt,fn,lm,ii),gc=((l,e,r,a,u,d,p)=>(g,v)=>{let y=g.createWaveShaper();if(d!==null&&d.name==="webkitAudioContext"&&g.createGain().gain.automationRate===void 0)return r(g,v);Ot(y,v);let w=v.curve===null||v.curve instanceof Float32Array?v.curve:new Float32Array(v.curve);if(w!==null&&w.length<2)throw e();ht(y,{curve:w},"curve"),ht(y,v,"oversample");let b=null,C=!1;return p(y,"curve",D=>()=>D.call(y),D=>T=>(D.call(y,T),C&&(a(T)&&b===null?b=l(g,y):a(T)||b===null||(b(),b=null)),T)),u(y,()=>{C=!0,a(y.curve)&&(b=l(g,y))},()=>{C=!1,b!==null&&(b(),b=null)})})(Am,Lt,db,lm,ii,si,Ho),fb=((l,e,r,a,u,d,p,g,v,y)=>(w,B)=>{var U=B,{coneInnerAngle:b,coneOuterAngle:C,coneOuterGain:D,distanceModel:T,maxDistance:M,orientationX:E,orientationY:O,orientationZ:k,panningModel:P,positionX:j,positionY:R,positionZ:A,refDistance:V,rolloffFactor:N}=U,q=oa(U,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]);let $=w.createPanner();if(q.channelCount>2||q.channelCountMode==="max")throw p();Ot($,q);let W={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},se=r(w,ie(F({},W),{channelInterpretation:"speakers",numberOfInputs:6})),J=a(w,ie(F({},q),{gain:1})),oe=a(w,ie(F({},W),{gain:1})),me=a(w,ie(F({},W),{gain:0})),ee=a(w,ie(F({},W),{gain:0})),ye=a(w,ie(F({},W),{gain:0})),ke=a(w,ie(F({},W),{gain:0})),ft=a(w,ie(F({},W),{gain:0})),mt=u(w,256,6,1),Qe=d(w,ie(F({},W),{curve:new Float32Array([1,1]),oversample:"none"})),vn=[E,O,k],sn=[j,R,A],Ze=new Float32Array(1);mt.onaudioprocess=({inputBuffer:Q})=>{let Qt=[v(Q,Ze,0),v(Q,Ze,1),v(Q,Ze,2)];Qt.some((Bi,qi)=>Bi!==vn[qi])&&($.setOrientation(...Qt),vn=Qt);let fi=[v(Q,Ze,3),v(Q,Ze,4),v(Q,Ze,5)];fi.some((Bi,qi)=>Bi!==sn[qi])&&($.setPosition(...fi),sn=fi)},Object.defineProperty(me.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ee.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ye.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ke.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ft.gain,"defaultValue",{get:()=>0});let de={get bufferSize(){},get channelCount(){return $.channelCount},set channelCount(Q){if(Q>2)throw p();J.channelCount=Q,$.channelCount=Q},get channelCountMode(){return $.channelCountMode},set channelCountMode(Q){if(Q==="max")throw p();J.channelCountMode=Q,$.channelCountMode=Q},get channelInterpretation(){return $.channelInterpretation},set channelInterpretation(Q){J.channelInterpretation=Q,$.channelInterpretation=Q},get coneInnerAngle(){return $.coneInnerAngle},set coneInnerAngle(Q){$.coneInnerAngle=Q},get coneOuterAngle(){return $.coneOuterAngle},set coneOuterAngle(Q){$.coneOuterAngle=Q},get coneOuterGain(){return $.coneOuterGain},set coneOuterGain(Q){if(Q<0||Q>1)throw e();$.coneOuterGain=Q},get context(){return $.context},get distanceModel(){return $.distanceModel},set distanceModel(Q){$.distanceModel=Q},get inputs(){return[J]},get maxDistance(){return $.maxDistance},set maxDistance(Q){if(Q<0)throw new RangeError;$.maxDistance=Q},get numberOfInputs(){return $.numberOfInputs},get numberOfOutputs(){return $.numberOfOutputs},get orientationX(){return oe.gain},get orientationY(){return me.gain},get orientationZ(){return ee.gain},get panningModel(){return $.panningModel},set panningModel(Q){$.panningModel=Q},get positionX(){return ye.gain},get positionY(){return ke.gain},get positionZ(){return ft.gain},get refDistance(){return $.refDistance},set refDistance(Q){if(Q<0)throw new RangeError;$.refDistance=Q},get rolloffFactor(){return $.rolloffFactor},set rolloffFactor(Q){if(Q<0)throw new RangeError;$.rolloffFactor=Q},addEventListener:(...Q)=>J.addEventListener(Q[0],Q[1],Q[2]),dispatchEvent:(...Q)=>J.dispatchEvent(Q[0]),removeEventListener:(...Q)=>J.removeEventListener(Q[0],Q[1],Q[2])};return b!==de.coneInnerAngle&&(de.coneInnerAngle=b),C!==de.coneOuterAngle&&(de.coneOuterAngle=C),D!==de.coneOuterGain&&(de.coneOuterGain=D),T!==de.distanceModel&&(de.distanceModel=T),M!==de.maxDistance&&(de.maxDistance=M),E!==de.orientationX.value&&(de.orientationX.value=E),O!==de.orientationY.value&&(de.orientationY.value=O),k!==de.orientationZ.value&&(de.orientationZ.value=k),P!==de.panningModel&&(de.panningModel=P),j!==de.positionX.value&&(de.positionX.value=j),R!==de.positionY.value&&(de.positionY.value=R),A!==de.positionZ.value&&(de.positionZ.value=A),V!==de.refDistance&&(de.refDistance=V),N!==de.rolloffFactor&&(de.rolloffFactor=N),vn[0]===1&&vn[1]===0&&vn[2]===0||$.setOrientation(...vn),sn[0]===0&&sn[1]===0&&sn[2]===0||$.setPosition(...sn),y(cr(de,$),()=>{J.connect($),l(J,Qe,0,0),Qe.connect(oe).connect(se,0,0),Qe.connect(me).connect(se,0,1),Qe.connect(ee).connect(se,0,2),Qe.connect(ye).connect(se,0,3),Qe.connect(ke).connect(se,0,4),Qe.connect(ft).connect(se,0,5),se.connect(mt).connect(w.destination)},()=>{J.disconnect($),g(J,Qe,0,0),Qe.disconnect(oe),oe.disconnect(se),Qe.disconnect(me),me.disconnect(se),Qe.disconnect(ee),ee.disconnect(se),Qe.disconnect(ye),ye.disconnect(se),Qe.disconnect(ke),ke.disconnect(se),Qe.disconnect(ft),ft.disconnect(se),se.disconnect(mt),mt.disconnect(w.destination)})})(rc,Lt,ri,fn,Uo,gc,cn,oc,um,ii),Om=(l=>(e,r)=>{let a=e.createPanner();return a.orientationX===void 0?l(e,r):(Ot(a,r),yt(a,r,"orientationX"),yt(a,r,"orientationY"),yt(a,r,"orientationZ"),yt(a,r,"positionX"),yt(a,r,"positionY"),yt(a,r,"positionZ"),ht(a,r,"coneInnerAngle"),ht(a,r,"coneOuterAngle"),ht(a,r,"coneOuterGain"),ht(a,r,"distanceModel"),ht(a,r,"maxDistance"),ht(a,r,"panningModel"),ht(a,r,"refDistance"),ht(a,r,"rolloffFactor"),a)})(fb),pb=((l,e,r,a,u,d,p,g,v,y)=>()=>{let w=new WeakMap,b=null;return{render(C,D){let T=w.get(D);return T!==void 0?Promise.resolve(T):((M,E)=>Re(this,null,function*(){let O=null,k=d(M),P={channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation},j=ie(F({},P),{coneInnerAngle:k.coneInnerAngle,coneOuterAngle:k.coneOuterAngle,coneOuterGain:k.coneOuterGain,distanceModel:k.distanceModel,maxDistance:k.maxDistance,panningModel:k.panningModel,refDistance:k.refDistance,rolloffFactor:k.rolloffFactor}),R=Y(k,E);if("bufferSize"in k)O=a(E,ie(F({},P),{gain:1}));else if(!R){let A=ie(F({},j),{orientationX:k.orientationX.value,orientationY:k.orientationY.value,orientationZ:k.orientationZ.value,positionX:k.positionX.value,positionY:k.positionY.value,positionZ:k.positionZ.value});k=u(E,A)}if(w.set(E,O===null?k:O),O!==null){if(b===null){if(p===null)throw new Error("Missing the native OfflineAudioContext constructor.");let W=new p(6,M.context.length,E.sampleRate),se=e(W,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});se.connect(W.destination),b=Re(this,null,function*(){let J=yield Promise.all([M.orientationX,M.orientationY,M.orientationZ,M.positionX,M.positionY,M.positionZ].map((oe,me)=>Re(this,null,function*(){let ee=r(W,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:me===0?1:0});return yield g(W,oe,ee.offset),ee})));for(let oe=0;oe<6;oe+=1)J[oe].connect(se,0,oe),J[oe].start(0);return y(W)})}let A=yield b,V=a(E,ie(F({},P),{gain:1}));yield v(M,E,V);let N=[];for(let W=0;W<A.numberOfChannels;W+=1)N.push(A.getChannelData(W));let q=[N[0][0],N[1][0],N[2][0]],B=[N[3][0],N[4][0],N[5][0]],U=a(E,ie(F({},P),{gain:1})),$=u(E,ie(F({},j),{orientationX:q[0],orientationY:q[1],orientationZ:q[2],positionX:B[0],positionY:B[1],positionZ:B[2]}));V.connect(U).connect($.inputs[0]),$.connect(O);for(let W=128;W<A.length;W+=128){let se=[N[0][W],N[1][W],N[2][W]],J=[N[3][W],N[4][W],N[5][W]];if(se.some((oe,me)=>oe!==q[me])||J.some((oe,me)=>oe!==B[me])){q=se,B=J;let oe=W/E.sampleRate;U.gain.setValueAtTime(0,oe),U=a(E,ie(F({},P),{gain:0})),$=u(E,ie(F({},j),{orientationX:q[0],orientationY:q[1],orientationZ:q[2],positionX:B[0],positionY:B[1],positionZ:B[2]})),U.gain.setValueAtTime(1,oe),V.connect(U).connect($.inputs[0]),$.connect(O)}}return O}return R?(yield l(E,M.orientationX,k.orientationX),yield l(E,M.orientationY,k.orientationY),yield l(E,M.orientationZ,k.orientationZ),yield l(E,M.positionX,k.positionX),yield l(E,M.positionY,k.positionY),yield l(E,M.positionZ,k.positionZ)):(yield g(E,M.orientationX,k.orientationX),yield g(E,M.orientationY,k.orientationY),yield g(E,M.orientationZ,k.orientationZ),yield g(E,M.positionX,k.positionX),yield g(E,M.positionY,k.positionY),yield g(E,M.positionZ,k.positionZ)),xn(k)?yield v(M,E,k.inputs[0]):yield v(M,E,k),k}))(C,D)}}})(ys,ri,dr,fn,Om,at,Vt,_s,zt,mc),mb=((l,e,r,a,u,d,p)=>class extends l{constructor(g,v){let y=u(g),w=F(F({},Cw),v),b=r(y,w),C=d(y);super(g,!1,b,C?a():null),this._nativePannerNode=b,this._orientationX=e(this,C,b.orientationX,ot,rt),this._orientationY=e(this,C,b.orientationY,ot,rt),this._orientationZ=e(this,C,b.orientationZ,ot,rt),this._positionX=e(this,C,b.positionX,ot,rt),this._positionY=e(this,C,b.positionY,ot,rt),this._positionZ=e(this,C,b.positionZ,ot,rt),p(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(g){this._nativePannerNode.coneInnerAngle=g}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(g){this._nativePannerNode.coneOuterAngle=g}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(g){this._nativePannerNode.coneOuterGain=g}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(g){this._nativePannerNode.distanceModel=g}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(g){this._nativePannerNode.maxDistance=g}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(g){this._nativePannerNode.panningModel=g}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(g){this._nativePannerNode.refDistance=g}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(g){this._nativePannerNode.rolloffFactor=g}})(Ct,ns,Om,pb,it,Je,Ii),gb=(l=>(e,{disableNormalization:r,imag:a,real:u})=>{let d=a instanceof Float32Array?a:new Float32Array(a),p=u instanceof Float32Array?u:new Float32Array(u),g=e.createPeriodicWave(p,d,{disableNormalization:r});if(Array.from(a).length<2)throw l();return g})(Ee),vb=((l,e,r,a)=>class Z0{constructor(d,p){let g=e(d),v=(w=>{let{imag:b,real:C}=w;return b===void 0?C===void 0?ie(F({},w),{imag:[0,0],real:[0,0]}):ie(F({},w),{imag:Array.from(C,()=>0),real:C}):C===void 0?ie(F({},w),{imag:b,real:Array.from(b,()=>0)}):ie(F({},w),{imag:b,real:C})})(F(F({},Ew),p)),y=l(g,v);return r.add(y),y}static[Symbol.hasInstance](d){return d!==null&&typeof d=="object"&&Object.getPrototypeOf(d)===Z0.prototype||r.has(d)}})(gb,it,new WeakSet),yb=((l,e,r,a,u,d)=>{let g=new Float32Array([1,1]),v=Math.PI/2,y={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},w=ie(F({},y),{oversample:"none"}),b=(C,D,T,M,E)=>{if(D===1)return((O,k,P,j)=>{let R=new Float32Array(16385),A=new Float32Array(16385);for(let $=0;$<16385;$+=1){let W=$/16384*v;R[$]=Math.cos(W),A[$]=Math.sin(W)}let V=r(O,ie(F({},y),{gain:0})),N=a(O,ie(F({},w),{curve:R})),q=a(O,ie(F({},w),{curve:g})),B=r(O,ie(F({},y),{gain:0})),U=a(O,ie(F({},w),{curve:A}));return{connectGraph(){k.connect(V),k.connect(q.inputs===void 0?q:q.inputs[0]),k.connect(B),q.connect(P),P.connect(N.inputs===void 0?N:N.inputs[0]),P.connect(U.inputs===void 0?U:U.inputs[0]),N.connect(V.gain),U.connect(B.gain),V.connect(j,0,0),B.connect(j,0,1)},disconnectGraph(){k.disconnect(V),k.disconnect(q.inputs===void 0?q:q.inputs[0]),k.disconnect(B),q.disconnect(P),P.disconnect(N.inputs===void 0?N:N.inputs[0]),P.disconnect(U.inputs===void 0?U:U.inputs[0]),N.disconnect(V.gain),U.disconnect(B.gain),V.disconnect(j,0,0),B.disconnect(j,0,1)}}})(C,T,M,E);if(D===2)return((O,k,P,j)=>{let R=new Float32Array(16385),A=new Float32Array(16385),V=new Float32Array(16385),N=new Float32Array(16385),q=Math.floor(8192.5);for(let ke=0;ke<16385;ke+=1)if(ke>q){let ft=(ke-q)/(16384-q)*v;R[ke]=Math.cos(ft),A[ke]=Math.sin(ft),V[ke]=0,N[ke]=1}else{let ft=ke/(16384-q)*v;R[ke]=1,A[ke]=0,V[ke]=Math.cos(ft),N[ke]=Math.sin(ft)}let B=e(O,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),U=r(O,ie(F({},y),{gain:0})),$=a(O,ie(F({},w),{curve:R})),W=r(O,ie(F({},y),{gain:0})),se=a(O,ie(F({},w),{curve:A})),J=a(O,ie(F({},w),{curve:g})),oe=r(O,ie(F({},y),{gain:0})),me=a(O,ie(F({},w),{curve:V})),ee=r(O,ie(F({},y),{gain:0})),ye=a(O,ie(F({},w),{curve:N}));return{connectGraph(){k.connect(B),k.connect(J.inputs===void 0?J:J.inputs[0]),B.connect(U,0),B.connect(W,0),B.connect(oe,1),B.connect(ee,1),J.connect(P),P.connect($.inputs===void 0?$:$.inputs[0]),P.connect(se.inputs===void 0?se:se.inputs[0]),P.connect(me.inputs===void 0?me:me.inputs[0]),P.connect(ye.inputs===void 0?ye:ye.inputs[0]),$.connect(U.gain),se.connect(W.gain),me.connect(oe.gain),ye.connect(ee.gain),U.connect(j,0,0),oe.connect(j,0,0),W.connect(j,0,1),ee.connect(j,0,1)},disconnectGraph(){k.disconnect(B),k.disconnect(J.inputs===void 0?J:J.inputs[0]),B.disconnect(U,0),B.disconnect(W,0),B.disconnect(oe,1),B.disconnect(ee,1),J.disconnect(P),P.disconnect($.inputs===void 0?$:$.inputs[0]),P.disconnect(se.inputs===void 0?se:se.inputs[0]),P.disconnect(me.inputs===void 0?me:me.inputs[0]),P.disconnect(ye.inputs===void 0?ye:ye.inputs[0]),$.disconnect(U.gain),se.disconnect(W.gain),me.disconnect(oe.gain),ye.disconnect(ee.gain),U.disconnect(j,0,0),oe.disconnect(j,0,0),W.disconnect(j,0,1),ee.disconnect(j,0,1)}}})(C,T,M,E);throw u()};return(C,O)=>{var k=O,{channelCount:D,channelCountMode:T,pan:M}=k,E=oa(k,["channelCount","channelCountMode","pan"]);if(T==="max")throw u();let P=l(C,ie(F({},E),{channelCount:1,channelCountMode:T,numberOfInputs:2})),j=r(C,ie(F({},E),{channelCount:D,channelCountMode:T,gain:1})),R=r(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:M}),{connectGraph:A,disconnectGraph:V}=b(C,D,j,R,P);Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"maxValue",{get:()=>1}),Object.defineProperty(R.gain,"minValue",{get:()=>-1});let N={get bufferSize(){},get channelCount(){return j.channelCount},set channelCount(B){j.channelCount!==B&&(q&&V(),{connectGraph:A,disconnectGraph:V}=b(C,B,j,R,P),q&&A()),j.channelCount=B},get channelCountMode(){return j.channelCountMode},set channelCountMode(B){if(B==="clamped-max"||B==="max")throw u();j.channelCountMode=B},get channelInterpretation(){return j.channelInterpretation},set channelInterpretation(B){j.channelInterpretation=B},get context(){return j.context},get inputs(){return[j]},get numberOfInputs(){return j.numberOfInputs},get numberOfOutputs(){return j.numberOfOutputs},get pan(){return R.gain},addEventListener:(...B)=>j.addEventListener(B[0],B[1],B[2]),dispatchEvent:(...B)=>j.dispatchEvent(B[0]),removeEventListener:(...B)=>j.removeEventListener(B[0],B[1],B[2])},q=!1;return d(cr(N,P),()=>{A(),q=!0},()=>{V(),q=!1})}})(ri,$o,fn,gc,cn,ii),km=((l,e)=>(r,a)=>{let u=a.channelCountMode;if(u==="clamped-max")throw e();if(r.createStereoPanner===void 0)return l(r,a);let d=r.createStereoPanner();return Ot(d,a),yt(d,a,"pan"),Object.defineProperty(d,"channelCountMode",{get:()=>u,set:p=>{if(p!==u)throw e()}}),d})(yb,cn),_b=((l,e,r,a,u)=>()=>{let d=new WeakMap;return{render(p,g){let v=d.get(g);return v!==void 0?Promise.resolve(v):((y,w)=>Re(this,null,function*(){let b=r(y),C=Y(b,w);if(!C){let D={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,pan:b.pan.value};b=e(w,D)}return d.set(w,b),C?yield l(w,y.pan,b.pan):yield a(w,y.pan,b.pan),xn(b)?yield u(y,w,b.inputs[0]):yield u(y,w,b),b}))(p,g)}}})(ys,km,at,_s,zt),wb=((l,e,r,a,u,d)=>class extends l{constructor(p,g){let v=u(p),y=F(F({},Sw),g),w=r(v,y),b=d(v);super(p,!1,w,b?a():null),this._pan=e(this,b,w.pan)}get pan(){return this._pan}})(Ct,ns,km,_b,it,Je),bb=((l,e,r)=>()=>{let a=new WeakMap;return{render(u,d){let p=a.get(d);return p!==void 0?Promise.resolve(p):((g,v)=>Re(this,null,function*(){let y=e(g);if(!Y(y,v)){let w={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,curve:y.curve,oversample:y.oversample};y=l(v,w)}return a.set(v,y),xn(y)?yield r(g,v,y.inputs[0]):yield r(g,v,y),y}))(u,d)}}})(gc,at,zt),Db=((l,e,r,a,u,d,p)=>class extends l{constructor(g,v){let y=u(g),w=F(F({},Iw),v),b=r(y,w);super(g,!0,b,d(y)?a():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=b,p(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(g){if(g===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(g.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=g}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(g){this._nativeWaveShaperNode.oversample=g}})(Ct,Lt,gc,bb,it,Je,Ii),Rm=(l=>l!==null&&l.isSecureContext)(ts),mh=(l=>(e,r,a)=>{Object.defineProperties(l,{currentFrame:{configurable:!0,get:()=>Math.round(e*r)},currentTime:{configurable:!0,get:()=>e}});try{return a()}finally{l!==null&&(delete l.currentFrame,delete l.currentTime)}})(ts),Nm=new WeakMap,xb=((l,e)=>r=>{let a=l.get(r);if(a!==void 0)return a;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return a=new e(1,1,44100),l.set(r,a),a})(Nm,Vt),Cb=Rm?((l,e,r,a,u,d,p,g,v,y,w,b,C)=>{let D=0;return(T,M,E={credentials:"omit"})=>{let O=w.get(T);if(O!==void 0&&O.has(M))return Promise.resolve();let k=y.get(T);if(k!==void 0){let R=k.get(M);if(R!==void 0)return R}let P=d(T),j=P.audioWorklet===void 0?u(M).then(([R,A])=>{let[V,N]=gt(R,A);return r(`${V};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${N}
})})(window,'_AWGS')`)}).then(()=>{let R=C._AWGS.pop();if(R===void 0)throw new SyntaxError;a(P.currentTime,P.sampleRate,()=>R(class{},void 0,(A,V)=>{if(A.trim()==="")throw e();let N=Fe.get(P);if(N!==void 0){if(N.has(A))throw e();Ut(V),wn(V.parameterDescriptors),N.set(A,V)}else Ut(V),wn(V.parameterDescriptors),Fe.set(P,new Map([[A,V]]))},P.sampleRate,void 0,void 0))}):Promise.all([u(M),Promise.resolve(l(b,b))]).then(([[R,A],V])=>{let N=D+1;D=N;let[q,B]=gt(R,A),U=new Blob([`${q};((AudioWorkletProcessor,registerProcessor)=>{${B}
})(${V?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${V?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${V?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${N}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),$=URL.createObjectURL(U);return P.audioWorklet.addModule($,E).then(()=>{if(g(P))return P;let W=p(P);return W.audioWorklet.addModule($,E).then(()=>W)}).then(W=>{if(v===null)throw new SyntaxError;try{new v(W,`__sac${N}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL($))});return k===void 0?y.set(T,new Map([[M,j]])):k.set(M,j),j.then(()=>{let R=w.get(T);R===void 0?w.set(T,new Set([M])):R.add(M)}).finally(()=>{let R=y.get(T);R!==void 0&&R.delete(M)}),j}})(jn,cn,(l=>e=>new Promise((r,a)=>{if(l===null)return void a(new SyntaxError);let u=l.document.head;if(u===null)a(new SyntaxError);else{let d=l.document.createElement("script"),p=new Blob([e],{type:"application/javascript"}),g=URL.createObjectURL(p),v=l.onerror,y=()=>{l.onerror=v,URL.revokeObjectURL(g)};l.onerror=(w,b,C,D,T)=>b===g||b===l.location.href&&C===1&&D===1?(y(),a(T),!1):v!==null?v(w,b,C,D,T):void 0,d.onerror=()=>{y(),a(new SyntaxError)},d.onload=()=>{y(),r()},d.src=g,d.type="module",u.appendChild(d)}}))(ts),mh,l=>Re(void 0,null,function*(){try{let e=yield fetch(l);if(e.ok)return[yield e.text(),e.url]}catch{}throw new DOMException("","AbortError")}),it,xb,Je,lr,new WeakMap,new WeakMap,((l,e)=>()=>Re(void 0,null,function*(){if(l===null)return!0;if(e===null)return!1;let r=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),a=new e(1,128,44100),u=URL.createObjectURL(r),d=!1,p=!1;try{yield a.audioWorklet.addModule(u);let g=new l(a,"a",{numberOfOutputs:0}),v=a.createOscillator();g.port.onmessage=()=>d=!0,g.onprocessorerror=()=>p=!0,v.connect(g),v.start(0),yield a.startRendering(),yield new Promise(y=>setTimeout(y))}catch{}finally{URL.revokeObjectURL(u)}return d&&!p}))(lr,Vt),ts):void 0,Eb=((l,e)=>r=>l(r)||e(r))(uh,Je),Sb=((l,e,r,a,u,d,p,g,v,y,w)=>(b,C)=>{let D=p(b)?b:d(b);if(u.has(C)){let T=new DOMException("","DataCloneError");return Promise.reject(T)}try{u.add(C)}catch{}return e(v,()=>v(D))?D.decodeAudioData(C).then(T=>(nm(C).catch(()=>{}),e(g,()=>g(T))||w(T),l.add(T),T)):new Promise((T,M)=>{let E=()=>Re(void 0,null,function*(){try{yield nm(C)}catch{}}),O=k=>{M(k),E()};try{D.decodeAudioData(C,k=>{typeof k.copyFromChannel!="function"&&(y(k),re(k)),l.add(k),E().then(()=>T(k))},k=>{O(k===null?new DOMException("","EncodingError"):k)})}catch(k){O(k)}})})(hh,jn,0,0,new WeakSet,it,Eb,K,qo,fh,ph),Fm=((l,e,r,a,u,d,p,g,v,y,w,b,C,D,T,M,E,O,k,P)=>class extends T{constructor(j,R){super(j,R),this._nativeContext=j,this._audioWorklet=l===void 0?void 0:{addModule:(A,V)=>l(this,A,V)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new u(this)}createBuffer(j,R,A){return new r({length:R,numberOfChannels:j,sampleRate:A})}createBufferSource(){return new a(this)}createChannelMerger(j=6){return new d(this,{numberOfInputs:j})}createChannelSplitter(j=6){return new p(this,{numberOfOutputs:j})}createConstantSource(){return new g(this)}createConvolver(){return new v(this)}createDelay(j=1){return new w(this,{maxDelayTime:j})}createDynamicsCompressor(){return new b(this)}createGain(){return new C(this)}createIIRFilter(j,R){return new D(this,{feedback:R,feedforward:j})}createOscillator(){return new M(this)}createPanner(){return new E(this)}createPeriodicWave(j,R,A={disableNormalization:!1}){return new O(this,ie(F({},A),{imag:R,real:j}))}createStereoPanner(){return new k(this)}createWaveShaper(){return new P(this)}decodeAudioData(j,R,A){return y(this._nativeContext,j).then(V=>(typeof R=="function"&&R(V),V),V=>{throw typeof A=="function"&&A(V),V})}})(Cb,Pw,xm,Vw,qw,Hw,Ww,Qw,Xw,Sb,Jw,tb,sb,ab,ub,hb,mb,vb,wb,Db),Tb=((l,e,r,a)=>class extends l{constructor(u,d){let p=r(u),g=((v,y)=>v.createMediaElementSource(y.mediaElement))(p,d);if(a(p))throw TypeError();super(u,!0,g,null),this._nativeMediaElementAudioSourceNode=g}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(Ct,0,it,Je),Ib=((l,e,r,a)=>class extends l{constructor(u,d){let p=r(u);if(a(p))throw new TypeError;let g=((v,y)=>{let w=v.createMediaStreamDestination();return Ot(w,y),w.numberOfOutputs===1&&Object.defineProperty(w,"numberOfOutputs",{get:()=>0}),w})(p,F(F({},ww),d));super(u,!1,g,null),this._nativeMediaStreamAudioDestinationNode=g}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(Ct,0,it,Je),Mb=((l,e,r,a)=>class extends l{constructor(u,d){let p=r(u),g=((v,{mediaStream:y})=>{let w=y.getAudioTracks();w.sort((D,T)=>D.id<T.id?-1:D.id>T.id?1:0);let b=w.slice(0,1),C=v.createMediaStreamSource(new MediaStream(b));return Object.defineProperty(C,"mediaStream",{value:y}),C})(p,d);if(a(p))throw new TypeError;super(u,!0,g,null),this._nativeMediaStreamAudioSourceNode=g}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Ct,0,it,Je),Ab=((l,e)=>(r,{mediaStreamTrack:a})=>{if(typeof r.createMediaStreamTrackSource=="function")return r.createMediaStreamTrackSource(a);let u=new MediaStream([a]),d=r.createMediaStreamSource(u);if(a.kind!=="audio")throw l();if(e(r))throw new TypeError;return d})(Lt,Je),Ob=((l,e,r)=>class extends l{constructor(a,u){let d=r(a);super(a,!0,e(d,u),null)}})(Ct,Ab,it),kb=((l,e,r,a,u,d,p,g,v)=>class extends l{constructor(y={}){if(v===null)throw new Error("Missing the native AudioContext constructor.");let w;try{w=new v(y)}catch(D){throw D.code===12&&D.message==="sampleRate is not in range"?r():D}if(w===null)throw a();if(!(D=>D===void 0||typeof D=="number"||typeof D=="string"&&(D==="balanced"||D==="interactive"||D==="playback"))(y.latencyHint))throw new TypeError(`The provided value '${y.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(y.sampleRate!==void 0&&w.sampleRate!==y.sampleRate)throw r();super(w,2);let{latencyHint:b}=y,{sampleRate:C}=w;if(this._baseLatency=typeof w.baseLatency=="number"?w.baseLatency:b==="balanced"?512/C:b==="interactive"||b===void 0?256/C:b==="playback"?1024/C:128*Math.max(2,Math.min(128,Math.round(b*C/128)))/C,this._nativeAudioContext=w,v.name==="webkitAudioContext"?(this._nativeGainNode=w.createGain(),this._nativeOscillatorNode=w.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(w.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,w.state==="running"){this._state="suspended";let D=()=>{this._state==="suspended"&&(this._state=null),w.removeEventListener("statechange",D)};w.addEventListener("statechange",D)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Ei(this)}))}createMediaElementSource(y){return new u(this,{mediaElement:y})}createMediaStreamDestination(){return new d(this)}createMediaStreamSource(y){return new p(this,{mediaStream:y})}createMediaStreamTrackSource(y){return new g(this,{mediaStreamTrack:y})}resume(){return this._state==="suspended"?new Promise((y,w)=>{let b=()=>{this._nativeAudioContext.removeEventListener("statechange",b),this._nativeAudioContext.state==="running"?y():this.resume().then(y,w)};this._nativeAudioContext.addEventListener("statechange",b)}):this._nativeAudioContext.resume().catch(y=>{throw y===void 0||y.code===15?e():y})}suspend(){return this._nativeAudioContext.suspend().catch(y=>{throw y===void 0?e():y})}})(Fm,Lt,cn,Tw,Tb,Ib,Mb,Ob,si),gh=(l=>e=>{let r=l.get(e);if(r===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return r})(Im),Rb=(l=>(e,r)=>{l(e).add(r)})(gh),Pm=(l=>(e,r,a=0,u=0)=>{let d=e[a];if(d===void 0)throw l();return cc(r)?d.connect(r,0,u):d.connect(r,0)})(Ee),Nb=(l=>(e,r)=>{l(e).delete(r)})(gh),Lm=(l=>(e,r,a,u=0)=>r===void 0?e.forEach(d=>d.disconnect()):typeof r=="number"?hc(l,e,r).disconnect():cc(r)?a===void 0?e.forEach(d=>d.disconnect(r)):u===void 0?hc(l,e,a).disconnect(r,0):hc(l,e,a).disconnect(r,0,u):a===void 0?e.forEach(d=>d.disconnect(r)):hc(l,e,a).disconnect(r,0))(Ee),Vm=new WeakMap,Fb=((l,e)=>r=>e(l,r))(Vm,vt),Pb=((l,e,r,a,u,d,p,g,v,y,w,b,C)=>(D,T,M,E)=>{if(E.numberOfInputs===0&&E.numberOfOutputs===0)throw v();let O=Array.isArray(E.outputChannelCount)?E.outputChannelCount:Array.from(E.outputChannelCount);if(O.some(G=>G<1))throw v();if(O.length!==E.numberOfOutputs)throw e();if(E.channelCountMode!=="explicit")throw v();let k=E.channelCount*E.numberOfInputs,P=O.reduce((G,He)=>G+He,0),j=M.parameterDescriptors===void 0?0:M.parameterDescriptors.length;if(k+j>6||P>6)throw v();let R=new MessageChannel,A=[],V=[];for(let G=0;G<E.numberOfInputs;G+=1)A.push(p(D,{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,gain:1})),V.push(u(D,{channelCount:E.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:E.channelCount}));let N=[];if(M.parameterDescriptors!==void 0)for(let{defaultValue:G,maxValue:He,minValue:Yt,name:pt}of M.parameterDescriptors){let Ve=d(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:E.parameterData[pt]!==void 0?E.parameterData[pt]:G===void 0?0:G});Object.defineProperties(Ve.offset,{defaultValue:{get:()=>G===void 0?0:G},maxValue:{get:()=>He===void 0?ot:He},minValue:{get:()=>Yt===void 0?rt:Yt}}),N.push(Ve)}let q=a(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,k+j)}),B=rm(T,D.sampleRate),U=g(D,B,k+j,Math.max(1,P)),$=u(D,{channelCount:Math.max(1,P),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,P)}),W=[];for(let G=0;G<E.numberOfOutputs;G+=1)W.push(a(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:O[G]}));for(let G=0;G<E.numberOfInputs;G+=1){A[G].connect(V[G]);for(let He=0;He<E.channelCount;He+=1)V[G].connect(q,He,G*E.channelCount+He)}let se=new em(M.parameterDescriptors===void 0?[]:M.parameterDescriptors.map(({name:G},He)=>{let Yt=N[He];return Yt.connect(q,0,k+He),Yt.start(0),[G,Yt.offset]}));q.connect(U);let J=E.channelInterpretation,oe=null,me=E.numberOfOutputs===0?[U]:W,ee={get bufferSize(){return B},get channelCount(){return E.channelCount},set channelCount(G){throw r()},get channelCountMode(){return E.channelCountMode},set channelCountMode(G){throw r()},get channelInterpretation(){return J},set channelInterpretation(G){for(let He of A)He.channelInterpretation=G;J=G},get context(){return U.context},get inputs(){return A},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get onprocessorerror(){return oe},set onprocessorerror(G){typeof oe=="function"&&ee.removeEventListener("processorerror",oe),oe=typeof G=="function"?G:null,typeof oe=="function"&&ee.addEventListener("processorerror",oe)},get parameters(){return se},get port(){return R.port2},addEventListener:(...G)=>U.addEventListener(G[0],G[1],G[2]),connect:l.bind(null,me),disconnect:y.bind(null,me),dispatchEvent:(...G)=>U.dispatchEvent(G[0]),removeEventListener:(...G)=>U.removeEventListener(G[0],G[1],G[2])},ye=new Map;var ke,ft;R.port1.addEventListener=(ke=R.port1.addEventListener,(...G)=>{if(G[0]==="message"){let He=typeof G[1]=="function"?G[1]:typeof G[1]=="object"&&G[1]!==null&&typeof G[1].handleEvent=="function"?G[1].handleEvent:null;if(He!==null){let Yt=ye.get(G[1]);Yt!==void 0?G[1]=Yt:(G[1]=pt=>{w(D.currentTime,D.sampleRate,()=>He(pt))},ye.set(He,G[1]))}}return ke.call(R.port1,G[0],G[1],G[2])}),R.port1.removeEventListener=(ft=R.port1.removeEventListener,(...G)=>{if(G[0]==="message"){let He=ye.get(G[1]);He!==void 0&&(ye.delete(G[1]),G[1]=He)}return ft.call(R.port1,G[0],G[1],G[2])});let mt=null;Object.defineProperty(R.port1,"onmessage",{get:()=>mt,set:G=>{typeof mt=="function"&&R.port1.removeEventListener("message",mt),mt=typeof G=="function"?G:null,typeof mt=="function"&&(R.port1.addEventListener("message",mt),R.port1.start())}}),M.prototype.port=R.port1;let Qe=null;((G,He,Yt,pt)=>{let Ve=Oe.get(G);Ve===void 0&&(Ve=new WeakMap,Oe.set(G,Ve));let lt=((yn,Es)=>Re(void 0,null,function*(){let Ss=yield(Ph=>new Promise((Lh,VD)=>{let{port1:_u,port2:Vh}=new MessageChannel;_u.onmessage=({data:jh})=>{_u.close(),Vh.close(),Lh(jh)},_u.onmessageerror=({data:jh})=>{_u.close(),Vh.close(),VD(jh)},Vh.postMessage(Ph)}))(Es);return new yn(Ss)}))(Yt,pt);return Ve.set(He,lt),lt})(D,ee,M,E).then(G=>Qe=G);let sn=lc(E.numberOfInputs,E.channelCount),Ze=lc(E.numberOfOutputs,O),de=M.parameterDescriptors===void 0?[]:M.parameterDescriptors.reduce((G,{name:He})=>ie(F({},G),{[He]:new Float32Array(128)}),{}),Q=!0,Qt=()=>{E.numberOfOutputs>0&&U.disconnect($);for(let G=0,He=0;G<E.numberOfOutputs;G+=1){let Yt=W[G];for(let pt=0;pt<O[G];pt+=1)$.disconnect(Yt,He+pt,pt);He+=O[G]}},fi=new Map;U.onaudioprocess=({inputBuffer:G,outputBuffer:He})=>{if(Qe!==null){let Yt=b(ee);for(let pt=0;pt<B;pt+=128){for(let Ve=0;Ve<E.numberOfInputs;Ve+=1)for(let lt=0;lt<E.channelCount;lt+=1)uc(G,sn[Ve],lt,lt,pt);M.parameterDescriptors!==void 0&&M.parameterDescriptors.forEach(({name:Ve},lt)=>{uc(G,de,Ve,k+lt,pt)});for(let Ve=0;Ve<E.numberOfInputs;Ve+=1)for(let lt=0;lt<O[Ve];lt+=1)Ze[Ve][lt].byteLength===0&&(Ze[Ve][lt]=new Float32Array(128));try{let Ve=sn.map((yn,Es)=>{if(Yt[Es].size>0)return fi.set(Es,B/128),yn;let Ss=fi.get(Es);return Ss===void 0?[]:(yn.every(Ph=>Ph.every(Lh=>Lh===0))&&(Ss===1?fi.delete(Es):fi.set(Es,Ss-1)),yn)});Q=w(D.currentTime+pt/D.sampleRate,D.sampleRate,()=>Qe.process(Ve,Ze,de));for(let yn=0,Es=0;yn<E.numberOfOutputs;yn+=1){for(let Ss=0;Ss<O[yn];Ss+=1)tm(He,Ze[yn],Ss,Es+Ss,pt);Es+=O[yn]}}catch(Ve){Q=!1,ee.dispatchEvent(new ErrorEvent("processorerror",{colno:Ve.colno,filename:Ve.filename,lineno:Ve.lineno,message:Ve.message}))}if(!Q){for(let Ve=0;Ve<E.numberOfInputs;Ve+=1){A[Ve].disconnect(V[Ve]);for(let lt=0;lt<E.channelCount;lt+=1)V[pt].disconnect(q,lt,Ve*E.channelCount+lt)}if(M.parameterDescriptors!==void 0){let Ve=M.parameterDescriptors.length;for(let lt=0;lt<Ve;lt+=1){let yn=N[lt];yn.disconnect(q,0,k+lt),yn.stop()}}q.disconnect(U),U.onaudioprocess=null,Bi?Qt():fg();break}}}};let Bi=!1,qi=p(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),dg=()=>U.connect(qi).connect(D.destination),fg=()=>{U.disconnect(qi),qi.disconnect()};return dg(),C(ee,()=>{if(Q){fg(),E.numberOfOutputs>0&&U.connect($);for(let G=0,He=0;G<E.numberOfOutputs;G+=1){let Yt=W[G];for(let pt=0;pt<O[G];pt+=1)$.connect(Yt,He+pt,pt);He+=O[G]}}Bi=!0},()=>{Q&&(dg(),Qt()),Bi=!1})})(Pm,Ee,Lt,ri,$o,dr,fn,Uo,cn,Lm,mh,Fb,ii),Lb=((l,e,r,a,u)=>(d,p,g,v,y,w)=>{if(g!==null)try{let D=new g(d,v,w),T=new Map,M=null;if(Object.defineProperties(D,{channelCount:{get:()=>w.channelCount,set:()=>{throw l()}},channelCountMode:{get:()=>"explicit",set:()=>{throw l()}},onprocessorerror:{get:()=>M,set:E=>{typeof M=="function"&&D.removeEventListener("processorerror",M),M=typeof E=="function"?E:null,typeof M=="function"&&D.addEventListener("processorerror",M)}}}),D.addEventListener=(C=D.addEventListener,(...E)=>{if(E[0]==="processorerror"){let O=typeof E[1]=="function"?E[1]:typeof E[1]=="object"&&E[1]!==null&&typeof E[1].handleEvent=="function"?E[1].handleEvent:null;if(O!==null){let k=T.get(E[1]);k!==void 0?E[1]=k:(E[1]=P=>{P.type==="error"?(Object.defineProperties(P,{type:{value:"processorerror"}}),O(P)):O(new ErrorEvent(E[0],F({},P)))},T.set(O,E[1]))}}return C.call(D,"error",E[1],E[2]),C.call(D,...E)}),D.removeEventListener=(b=D.removeEventListener,(...E)=>{if(E[0]==="processorerror"){let O=T.get(E[1]);O!==void 0&&(T.delete(E[1]),E[1]=O)}return b.call(D,"error",E[1],E[2]),b.call(D,E[0],E[1],E[2])}),w.numberOfOutputs!==0){let E=r(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return D.connect(E).connect(d.destination),u(D,()=>E.disconnect(),()=>E.connect(d.destination))}return D}catch(D){throw D.code===11?a():D}var b,C;if(y===void 0)throw a();return(D=>{let{port1:T}=new MessageChannel;try{T.postMessage(D)}finally{T.close()}})(w),e(d,p,y,w)})(Lt,Pb,fn,cn,ii),Vb=((l,e,r,a,u,d,p,g,v,y,w,b,C,D,T,M)=>(E,O,k)=>{let P=new WeakMap,j=null;return{render(R,A){g(A,R);let V=P.get(A);return V!==void 0?Promise.resolve(V):((N,q)=>Re(this,null,function*(){let B=w(N),U=null,$=Y(B,q),W=Array.isArray(O.outputChannelCount)?O.outputChannelCount:Array.from(O.outputChannelCount);if(b===null){let se=W.reduce((ee,ye)=>ee+ye,0),J=u(q,{channelCount:Math.max(1,se),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,se)}),oe=[];for(let ee=0;ee<N.numberOfOutputs;ee+=1)oe.push(a(q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:W[ee]}));let me=p(q,{channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation,gain:1});me.connect=e.bind(null,oe),me.disconnect=v.bind(null,oe),U=[J,oe,me]}else $||(B=new b(q,E));if(P.set(q,U===null?B:U[2]),U!==null){if(j===null){if(k===void 0)throw new Error("Missing the processor constructor.");if(C===null)throw new Error("Missing the native OfflineAudioContext constructor.");let ye=N.channelCount*N.numberOfInputs,ke=k.parameterDescriptors===void 0?0:k.parameterDescriptors.length,ft=ye+ke;j=lw(N,ft===0?null:yield Re(this,null,function*(){let Qe=new C(ft,128*Math.ceil(N.context.length/128),q.sampleRate),vn=[],sn=[];for(let Q=0;Q<O.numberOfInputs;Q+=1)vn.push(p(Qe,{channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation,gain:1})),sn.push(u(Qe,{channelCount:O.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:O.channelCount}));let Ze=yield Promise.all(Array.from(N.parameters.values()).map(Q=>Re(this,null,function*(){let Qt=d(Qe,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Q.value});return yield D(Qe,Q,Qt.offset),Qt}))),de=a(Qe,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,ye+ke)});for(let Q=0;Q<O.numberOfInputs;Q+=1){vn[Q].connect(sn[Q]);for(let Qt=0;Qt<O.channelCount;Qt+=1)sn[Q].connect(de,Qt,Q*O.channelCount+Qt)}for(let[Q,Qt]of Ze.entries())Qt.connect(de,0,ye+Q),Qt.start(0);return de.connect(Qe.destination),yield Promise.all(vn.map(Q=>T(N,Qe,Q))),M(Qe)}),q,O,W,k,y)}let se=yield j,J=r(q,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[oe,me,ee]=U;se!==null&&(J.buffer=se,J.start(0)),J.connect(oe);for(let ye=0,ke=0;ye<N.numberOfOutputs;ye+=1){let ft=me[ye];for(let mt=0;mt<W[ye];mt+=1)oe.connect(ft,ke+mt,mt);ke+=W[ye]}return ee}if($)for(let[se,J]of N.parameters.entries())yield l(q,J,B.parameters.get(se));else for(let[se,J]of N.parameters.entries())yield D(q,J,B.parameters.get(se));return yield T(N,q,B),B}))(R,A)}}})(ys,Pm,hr,ri,$o,dr,fn,Nb,Lm,mh,at,lr,Vt,_s,zt,mc),jb=(l=>e=>l.get(e))(Nm),Bb=(l=>(e,r)=>{l.set(e,r)})(Vm),jm=Rm?((l,e,r,a,u,d,p,g,v,y,w,b,C,D)=>class extends e{constructor(T,M,E){var O;let k=g(T),P=v(k),j=(U=>ie(F({},U),{outputChannelCount:U.outputChannelCount!==void 0?U.outputChannelCount:U.numberOfInputs===1&&U.numberOfOutputs===1?[U.channelCount]:Array.from({length:U.numberOfOutputs},()=>1)}))(F(F({},uw),E));(U=>{let{port1:$,port2:W}=new MessageChannel;try{$.postMessage(U)}finally{$.close(),W.close()}})(j);let R=Fe.get(k),A=R?.get(M),V=P||k.state!=="closed"?k:(O=p(k))!==null&&O!==void 0?O:k,N=u(V,P?null:T.baseLatency,y,M,A,j);super(T,!0,N,P?a(M,j,A):null);let q=[];N.parameters.forEach((U,$)=>{let W=r(this,P,U);q.push([$,W])}),this._nativeAudioWorkletNode=N,this._onprocessorerror=null,this._parameters=new em(q),P&&l(k,this);let{activeInputs:B}=d(this);b(N,B)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(T){let M=typeof T=="function"?D(this,T):null;this._nativeAudioWorkletNode.onprocessorerror=M;let E=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=E!==null&&E===M?T:E}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(Rb,Ct,ns,Vb,Lb,xt,jb,it,Je,lr,0,Bb,0,ur):void 0,qb=((l,e)=>(r,a,u)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(r,a,u)}catch(d){throw d.name==="SyntaxError"?l():d}})(cn,Vt),$b=((l,e,r,a,u,d,p,g)=>(v,y)=>r(v).render(v,y).then(()=>Promise.all(Array.from(a(y)).map(w=>r(w).render(w,y)))).then(()=>u(y)).then(w=>(typeof w.copyFromChannel!="function"?(p(w),re(w)):e(d,()=>d(w))||g(w),l.add(w),w)))(hh,jn,ch,gh,mc,K,fh,ph),Ub=((l,e,r,a,u)=>class extends l{constructor(d,p,g){let v;if(typeof d=="number"&&p!==void 0&&g!==void 0)v={length:p,numberOfChannels:d,sampleRate:g};else{if(typeof d!="object")throw new Error("The given parameters are not valid.");v=d}let{length:y,numberOfChannels:w,sampleRate:b}=F(F({},Dw),v),C=a(w,y,b);e(qo,()=>qo(C))||C.addEventListener("statechange",(()=>{let D=0,T=M=>{this._state==="running"&&(D>0?(C.removeEventListener("statechange",T),M.stopImmediatePropagation(),this._waitForThePromiseToSettle(M)):D+=1)};return T})()),super(C,w),this._length=y,this._nativeOfflineAudioContext=C,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(r()):(this._state="running",u(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Ei(this)}))}_waitForThePromiseToSettle(d){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(d):setTimeout(()=>this._waitForThePromiseToSettle(d))}})(Fm,jn,Lt,qb,$b),Hb=((l,e)=>r=>{let a=l.get(r);return e(a)||e(r)})(z,uh),zb=((l,e)=>r=>l.has(r)||e(r))(x,lh),Wb=((l,e)=>r=>l.has(r)||e(r))(L,_m),Gb=((l,e)=>r=>{let a=l.get(r);return e(a)||e(r)})(z,Je),Zb=()=>((l,e,r,a,u,d,p,g,v,y,w,b,C,D,T,M)=>Re(void 0,null,function*(){return!!(l(e,e)&&l(r,r)&&l(u,u)&&l(d,d)&&l(g,g)&&l(v,v)&&l(y,y)&&l(w,w)&&l(b,b)&&l(C,C)&&l(D,D))&&(yield Promise.all([l(a,a),l(p,p),l(T,T),l(M,M)])).every(E=>E)}))(jn,(l=>()=>{if(l===null)return!1;let e=new l(1,1,44100).createBuffer(1,1,44100);if(e.copyToChannel===void 0)return!0;let r=new Float32Array(2);try{e.copyFromChannel(r,0,0)}catch{return!1}return!0})(Vt),(l=>()=>{if(l===null)return!1;if(l.prototype!==void 0&&l.prototype.close!==void 0)return!0;let e=new l,r=e.close!==void 0;try{e.close()}catch{}return r})(si),(l=>()=>{if(l===null)return Promise.resolve(!1);let e=new l(1,1,44100);return new Promise(r=>{let a=!0,u=p=>{a&&(a=!1,e.startRendering(),r(p instanceof TypeError))},d;try{d=e.decodeAudioData(null,()=>{},u)}catch(p){u(p)}d!==void 0&&d.catch(u)})})(Vt),(l=>()=>{if(l===null)return!1;let e;try{e=new l({latencyHint:"balanced"})}catch{return!1}return e.close(),!0})(si),(l=>()=>{if(l===null)return!1;let e=new l(1,1,44100).createGain(),r=e.connect(e)===e;return e.disconnect(e),r})(Vt),((l,e)=>()=>Re(void 0,null,function*(){if(l===null)return!0;if(e===null)return!1;let r=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),a=new MessageChannel,u=new e(1,128,44100),d=URL.createObjectURL(r),p=!1;try{yield u.audioWorklet.addModule(d);let g=new l(u,"a",{numberOfOutputs:0}),v=u.createOscillator();yield new Promise(y=>{g.port.onmessage=()=>y(),g.port.postMessage(a.port2,[a.port2])}),g.port.onmessage=()=>p=!0,v.connect(g),v.start(0),yield u.startRendering(),p=yield new Promise(y=>{a.port1.onmessage=({data:w})=>y(w===1),a.port1.postMessage(0)})}catch{}finally{a.port1.close(),URL.revokeObjectURL(d)}return p}))(lr,Vt),(l=>()=>{if(l===null)return!1;let e=new l(1,1,44100).createChannelMerger();if(e.channelCountMode==="max")return!0;try{e.channelCount=2}catch{return!0}return!1})(Vt),(l=>()=>{if(l===null)return!1;let e=new l(1,1,44100);return e.createConstantSource===void 0||e.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY})(Vt),(l=>()=>{if(l===null)return!1;let e=new l(1,1,44100),r=e.createConvolver();r.buffer=e.createBuffer(1,1,e.sampleRate);try{r.buffer=e.createBuffer(1,1,e.sampleRate)}catch{return!1}return!0})(Vt),(l=>()=>{if(l===null)return!1;let e=new l(1,1,44100).createConvolver();try{e.channelCount=1}catch{return!1}return!0})(Vt),Mw,(l=>()=>l!==null&&l.hasOwnProperty("isSecureContext"))(ts),(l=>()=>{if(l===null)return!1;let e=new l;try{return e.createMediaStreamSource(new MediaStream),!1}catch{return!0}finally{e.close()}})(si),(l=>()=>{if(l===null)return Promise.resolve(!1);let e=new l(1,1,44100);if(e.createStereoPanner===void 0||e.createConstantSource===void 0)return Promise.resolve(!0);let r=e.createConstantSource(),a=e.createStereoPanner();return r.channelCount=1,r.offset.value=1,a.channelCount=1,r.start(),r.connect(a).connect(e.destination),e.startRendering().then(u=>u.getChannelData(0)[0]!==1)})(Vt),Aw);function pn(l){return l===void 0}function we(l){return l!==void 0}function Bm(l){return typeof l=="function"}function Cn(l){return typeof l=="number"}function js(l){return Object.prototype.toString.call(l)==="[object Object]"&&l.constructor===Object}function vh(l){return typeof l=="boolean"}function Wt(l){return Array.isArray(l)}function ss(l){return typeof l=="string"}function Wo(l){return ss(l)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(l)}function ce(l,e){if(!l)throw new Error(e)}function Gt(l,e,r=1/0){if(!(e<=l&&l<=r))throw new RangeError(`Value must be within [${e}, ${r}], got: ${l}`)}function yh(l){l.isOffline||l.state==="running"||fr('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let qm=!1,$m=!1;function _h(l){qm=l}function Um(l){pn(l)&&qm&&!$m&&($m=!0,fr("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let wh=console;function Qb(l){wh=l}function Hm(...l){wh.log(...l)}function fr(...l){wh.warn(...l)}let Bs=typeof self=="object"?self:null,Yb=Bs&&(Bs.hasOwnProperty("AudioContext")||Bs.hasOwnProperty("webkitAudioContext"));function is(l,e,r,a){var u,d=arguments.length,p=d<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,r):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(l,e,r,a);else for(var g=l.length-1;g>=0;g--)(u=l[g])&&(p=(d<3?u(p):d>3?u(e,r,p):u(e,r))||p);return d>3&&p&&Object.defineProperty(e,r,p),p}function nt(l,e,r,a){return new(r||(r=Promise))(function(u,d){function p(y){try{v(a.next(y))}catch(w){d(w)}}function g(y){try{v(a.throw(y))}catch(w){d(w)}}function v(y){var w;y.done?u(y.value):(w=y.value,w instanceof r?w:new r(function(b){b(w)})).then(p,g)}v((a=a.apply(l,e||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;class Xb{constructor(e,r,a,u){this._callback=e,this._type=r,this._minimumUpdateInterval=Math.max(128/(u||44100),.001),this.updateInterval=a,this._createClock()}_createWorker(){let e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),r=URL.createObjectURL(e),a=new Worker(r);a.onmessage=this._callback.bind(this),this._worker=a}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var r;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((r=this._worker)===null||r===void 0||r.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Mi(l){return Wb(l)}function oi(l){return zb(l)}function vc(l){return Gb(l)}function pr(l){return Hb(l)}function Kb(l,e){return l==="value"||Mi(e)||oi(e)||function(r){return r instanceof xm}(e)}function Bn(l,...e){if(!e.length)return l;let r=e.shift();if(js(l)&&js(r))for(let a in r)Kb(a,r[a])?l[a]=r[a]:js(r[a])?(l[a]||Object.assign(l,{[a]:{}}),Bn(l[a],r[a])):Object.assign(l,{[a]:r[a]});return Bn(l,...e)}function S(l,e,r=[],a){let u={},d=Array.from(e);if(js(d[0])&&a&&!Reflect.has(d[0],a)&&(Object.keys(d[0]).some(p=>Reflect.has(l,p))||(Bn(u,{[a]:d[0]}),r.splice(r.indexOf(a),1),d.shift())),d.length===1&&js(d[0]))Bn(u,d[0]);else for(let p=0;p<r.length;p++)we(d[p])&&(u[r[p]]=d[p]);return Bn(l,u)}function qn(l,e){return pn(l)?e:l}function Zt(l,e){return e.forEach(r=>{Reflect.has(l,r)&&delete l[r]}),l}let ai=(()=>{class l{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...r){(this.debug||Bs&&this.toString()===Bs.TONE_DEBUG_CLASS)&&Hm(this,...r)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}return l.version=h,l})(),bh=1e-6;function mr(l,e){return l>e+bh}function Dh(l,e){return mr(l,e)||rs(l,e)}function yc(l,e){return l+bh<e}function rs(l,e){return Math.abs(l-e)<bh}function Ai(l,e,r){return Math.max(Math.min(l,r),e)}class En extends ai{constructor(){super(),this.name="Timeline",this._timeline=[];let e=S(En.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(ce(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){let r=this._timeline[this.length-1];ce(Dh(e.time,r.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{let r=this._search(e.time);this._timeline.splice(r+1,0,e)}if(this.length>this.memory){let r=this.length-this.memory;this._timeline.splice(0,r)}return this}remove(e){let r=this._timeline.indexOf(e);return r!==-1&&this._timeline.splice(r,1),this}get(e,r="time"){let a=this._search(e,r);return a!==-1?this._timeline[a]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,r="time"){let a=this._search(e,r);return a+1<this._timeline.length?this._timeline[a+1]:null}getBefore(e){let r=this._timeline.length;if(r>0&&this._timeline[r-1].time<e)return this._timeline[r-1];let a=this._search(e);return a-1>=0?this._timeline[a-1]:null}cancel(e){if(this._timeline.length>1){let r=this._search(e);if(r>=0)if(rs(this._timeline[r].time,e)){for(let a=r;a>=0&&rs(this._timeline[a].time,e);a--)r=a;this._timeline=this._timeline.slice(0,r)}else this._timeline=this._timeline.slice(0,r+1);else this._timeline=[]}else this._timeline.length===1&&Dh(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){let r=this._search(e);return r>=0&&(this._timeline=this._timeline.slice(r+1)),this}previousEvent(e){let r=this._timeline.indexOf(e);return r>0?this._timeline[r-1]:null}_search(e,r="time"){if(this._timeline.length===0)return-1;let a=0,u=this._timeline.length,d=u;if(u>0&&this._timeline[u-1][r]<=e)return u-1;for(;a<d;){let p=Math.floor(a+(d-a)/2),g=this._timeline[p],v=this._timeline[p+1];if(rs(g[r],e)){for(let y=p;y<this._timeline.length&&rs(this._timeline[y][r],e);y++)p=y;return p}if(yc(g[r],e)&&mr(v[r],e))return p;mr(g[r],e)?d=p:a=p+1}return-1}_iterate(e,r=0,a=this._timeline.length-1){this._timeline.slice(r,a+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,r){let a=this._search(e);return a!==-1&&this._iterate(r,0,a),this}forEachAfter(e,r){let a=this._search(e);return this._iterate(r,a+1),this}forEachBetween(e,r,a){let u=this._search(e),d=this._search(r);return u!==-1&&d!==-1?(this._timeline[u].time!==e&&(u+=1),this._timeline[d].time===r&&(d-=1),this._iterate(a,u,d)):u===-1&&this._iterate(a,0,d),this}forEachFrom(e,r){let a=this._search(e);for(;a>=0&&this._timeline[a].time>=e;)a--;return this._iterate(r,a+1),this}forEachAtTime(e,r){let a=this._search(e);if(a!==-1&&rs(this._timeline[a].time,e)){let u=a;for(let d=a;d>=0&&rs(this._timeline[d].time,e);d--)u=d;this._iterate(d=>{r(d)},u,a)}return this}dispose(){return super.dispose(),this._timeline=[],this}}let zm=[];function _c(l){zm.push(l)}let Wm=[];function wc(l){Wm.push(l)}class gr extends ai{constructor(){super(...arguments),this.name="Emitter"}on(e,r){return e.split(/\W+/).forEach(a=>{pn(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(r)}),this}once(e,r){let a=(...u)=>{r(...u),this.off(e,a)};return this.on(e,a),this}off(e,r){return e.split(/\W+/).forEach(a=>{if(pn(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(pn(r))this._events[a]=[];else{let u=this._events[a];for(let d=u.length-1;d>=0;d--)u[d]===r&&u.splice(d,1)}}),this}emit(e,...r){if(this._events&&this._events.hasOwnProperty(e)){let a=this._events[e].slice(0);for(let u=0,d=a.length;u<d;u++)a[u].apply(this,r)}return this}static mixin(e){["on","once","off","emit"].forEach(r=>{let a=Object.getOwnPropertyDescriptor(gr.prototype,r);Object.defineProperty(e.prototype,r,a)})}dispose(){return super.dispose(),this._events=void 0,this}}class xh extends gr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class vr extends xh{constructor(){var e,r;super(),this.name="Context",this._constants=new Map,this._timeouts=new En,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;let a=S(vr.getDefaults(),arguments,["context"]);a.context?(this._context=a.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=function(u){return new kb(u)}({latencyHint:a.latencyHint}),this._latencyHint=a.latencyHint),this._ticker=new Xb(this.emit.bind(this,"tick"),a.clockSource,a.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((r=arguments[0])===null||r===void 0)&&r.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=a.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var e;return this._initialized||(e=this,zm.forEach(r=>r(e)),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,r,a){return this._context.createBuffer(e,r,a)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,r){return this._context.createIIRFilter(e,r)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,r,a){return this._context.createPeriodicWave(e,r,a)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return ce(pr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return ce(pr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return ce(pr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){ce(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){ce(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){ce(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){ce(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,r){return function(a,u,d){return ce(we(jm),"This node only works in a secure context (https or localhost)"),new jm(a,u,d)}(this.rawContext,e,r)}addAudioWorkletModule(e){return nt(this,void 0,void 0,function*(){ce(we(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return nt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return pr(this._context)?this._context.resume():Promise.resolve()}close(){return nt(this,void 0,void 0,function*(){var e;pr(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&(e=this,Wm.forEach(r=>r(e)))})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{let r=this._context.createBuffer(1,128,this._context.sampleRate),a=r.getChannelData(0);for(let d=0;d<a.length;d++)a[d]=e;let u=this._context.createBufferSource();return u.channelCount=1,u.channelCountMode="explicit",u.buffer=r,u.loop=!0,u.start(0),this._constants.set(e,u),u}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){let e=this.now(),r=this._timeouts.peek();for(;this._timeouts.length&&r&&r.time<=e;)r.callback(),this._timeouts.shift(),r=this._timeouts.peek()}setTimeout(e,r){this._timeoutIds++;let a=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:a+r}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(r=>{r.id===e&&this._timeouts.remove(r)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,r){let a=++this._timeoutIds,u=()=>{let d=this.now();this._timeouts.add({callback:()=>{e(),u()},id:a,time:d+r})};return u(),a}}function ue(l,e){Wt(e)?e.forEach(r=>ue(l,r)):Object.defineProperty(l,e,{enumerable:!0,writable:!1})}function Go(l,e){Wt(e)?e.forEach(r=>Go(l,r)):Object.defineProperty(l,e,{writable:!0})}let Ie=()=>{};class Le extends ai{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ie;let e=S(Le.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,ss(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Ie,onload:Ie,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ct().sampleRate}set(e){return e instanceof Le?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return nt(this,void 0,void 0,function*(){let r=Le.load(e).then(a=>{this.set(a),this.onload(this)});Le.downloads.push(r);try{yield r}finally{let a=Le.downloads.indexOf(r);Le.downloads.splice(a,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){let r=Wt(e)&&e[0].length>0,a=r?e.length:1,u=r?e[0].length:e.length,d=ct(),p=d.createBuffer(a,u,d.sampleRate),g=r||a!==1?e:[e];for(let v=0;v<a;v++)p.copyToChannel(g[v],v);return this._buffer=p,this}toMono(e){if(Cn(e))this.fromArray(this.toArray(e));else{let r=new Float32Array(this.length),a=this.numberOfChannels;for(let u=0;u<a;u++){let d=this.toArray(u);for(let p=0;p<d.length;p++)r[p]+=d[p]}r=r.map(u=>u/a),this.fromArray(r)}return this}toArray(e){if(Cn(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{let r=[];for(let a=0;a<this.numberOfChannels;a++)r[a]=this.getChannelData(a);return r}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,r=this.duration){ce(this.loaded,"Buffer is not loaded");let a=Math.floor(e*this.sampleRate),u=Math.floor(r*this.sampleRate);ce(a<u,"The start time must be less than the end time");let d=u-a,p=ct().createBuffer(this.numberOfChannels,d,this.sampleRate);for(let g=0;g<this.numberOfChannels;g++)p.copyToChannel(this.getChannelData(g).subarray(a,u),g);return new Le(p)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Le().fromArray(e)}static fromUrl(e){return nt(this,void 0,void 0,function*(){return yield new Le().load(e)})}static load(e){return nt(this,void 0,void 0,function*(){let r=e.match(/\[([^\]\[]+\|.+)\]$/);if(r){let g=r[1].split("|"),v=g[0];for(let y of g)if(Le.supportsType(y)){v=y;break}e=e.replace(r[0],v)}let a=Le.baseUrl===""||Le.baseUrl.endsWith("/")?Le.baseUrl:Le.baseUrl+"/",u=document.createElement("a");u.href=a+e,u.pathname=(u.pathname+u.hash).split("/").map(encodeURIComponent).join("/");let d=yield fetch(u.href);if(!d.ok)throw new Error(`could not load url: ${e}`);let p=yield d.arrayBuffer();return yield ct().decodeAudioData(p)})}static supportsType(e){let r=e.split("."),a=r[r.length-1];return document.createElement("audio").canPlayType("audio/"+a)!==""}static loaded(){return nt(this,void 0,void 0,function*(){for(yield Promise.resolve();Le.downloads.length;)yield Le.downloads[0]})}}Le.baseUrl="",Le.downloads=[];class yr extends vr{constructor(){var e,r,a;super({clockSource:"offline",context:vc(arguments[0])?arguments[0]:(e=arguments[0],r=arguments[1]*arguments[2],a=arguments[2],new Ub(e,r,a)),lookAhead:0,updateInterval:vc(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=vc(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return nt(this,void 0,void 0,function*(){let r=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,r++;let a=Math.floor(this.sampleRate/128);e&&r%a==0&&(yield new Promise(u=>setTimeout(u,1)))}})}render(e=!0){return nt(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);let r=yield this._context.startRendering();return new Le(r)})}close(){return Promise.resolve()}}let Gm=new class extends xh{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(l,e,r){return{}}createChannelMerger(l){return{}}createChannelSplitter(l){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(l){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(l,e){return{}}createPanner(){return{}}createPeriodicWave(l,e,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(l){return{}}createMediaElementSource(l){return{}}createMediaStreamDestination(){return{}}decodeAudioData(l){return Promise.resolve({})}createAudioWorkletNode(l,e){return{}}get rawContext(){return{}}addAudioWorkletModule(l){return nt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(l,e){return 0}clearTimeout(l){return this}setInterval(l,e){return 0}clearInterval(l){return this}getConstant(l){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(l){}get destination(){return{}}set destination(l){}now(){return 0}immediate(){return 0}},Zo=Gm;function ct(){return Zo===Gm&&Yb&&bc(new vr),Zo}function bc(l,e=!1){e&&Zo.dispose(),Zo=pr(l)?new vr(l):vc(l)?new yr(l):l}function Jb(){return Zo.resume()}if(Bs&&!Bs.TONE_SILENCE_LOGGING){let l="v";h==="dev"&&(l="");let e=` * Tone.js ${l}${h} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function _r(l){return Math.pow(10,l/20)}function Qo(l){return Math.log(l)/Math.LN10*20}function wr(l){return Math.pow(2,l/12)}let Dc=440;function ci(l){return Math.round(Zm(l))}function Zm(l){return 69+12*Math.log2(l/Dc)}function Ch(l){return Dc*Math.pow(2,(l-69)/12)}class Eh extends ai{constructor(e,r,a){super(),this.defaultUnits="s",this._val=r,this._units=a,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,r)=>{let a=parseInt(e,10),u=r==="."?1.5:1;return a===1?this._beatsToUnits(this._getTimeSignature())*u:this._beatsToUnits(4/a)*u},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{let r=parseInt(e,10);return this._beatsToUnits(8/(3*Math.floor(r)))},regexp:/^(\d+)t$/i},tr:{method:(e,r,a)=>{let u=0;return e&&e!=="0"&&(u+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),r&&r!=="0"&&(u+=this._beatsToUnits(parseFloat(r))),a&&a!=="0"&&(u+=this._beatsToUnits(parseFloat(a)/4)),u},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Eh&&this.fromType(this._val),pn(this._val))return this._noArg();if(ss(this._val)&&pn(this._units)){for(let e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(js(this._val)){let e=0;for(let r in this._val)if(we(this._val[r])){let a=this._val[r];e+=new this.constructor(this.context,r).valueOf()*a}return e}if(we(this._units)){let e=this._expressions[this._units],r=this._val.toString().trim().match(e.regexp);return r?e.method.apply(this,r.slice(1)):e.method.call(this,this._val)}return ss(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class Sn extends Eh{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{let r=new Sn(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(r))},regexp:/^@(.+)/}})}quantize(e,r=1){let a=new this.constructor(this.context,e).valueOf(),u=this.valueOf();return u+(Math.round(u/a)*a-u)*r}toNotation(){let e=this.toSeconds(),r=["1m"];for(let d=1;d<9;d++){let p=Math.pow(2,d);r.push(p+"n."),r.push(p+"n"),r.push(p+"t")}r.push("0");let a=r[0],u=new Sn(this.context,r[0]).toSeconds();return r.forEach(d=>{let p=new Sn(this.context,d).toSeconds();Math.abs(p-e)<Math.abs(u-e)&&(a=d,u=p)}),a}toBarsBeatsSixteenths(){let e=this._beatsToUnits(1),r=this.valueOf()/e;r=parseFloat(r.toFixed(4));let a=Math.floor(r/this._getTimeSignature()),u=r%1*4;r=Math.floor(r)%this._getTimeSignature();let d=u.toString();return d.length>3&&(u=parseFloat(parseFloat(d).toFixed(3))),[a,r,u].join(":")}toTicks(){let e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return ci(this.toFrequency())}_now(){return this.context.now()}}function eD(l,e){return new Sn(ct(),l,e)}class un extends Sn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Dc}static set A4(e){(function(r){Dc=r})(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:un.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,r){let a=tD[e.toLowerCase()]+12*(parseInt(r,10)+1);return this.defaultUnits==="midi"?a:un.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,r,a){let u=1;return e&&e!=="0"&&(u*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),r&&r!=="0"&&(u*=this._beatsToUnits(parseFloat(r))),a&&a!=="0"&&(u*=this._beatsToUnits(parseFloat(a)/4)),u}}})}transpose(e){return new un(this.context,this.valueOf()*wr(e))}harmonize(e){return e.map(r=>this.transpose(r))}toMidi(){return ci(this.valueOf())}toNote(){let e=this.toFrequency(),r=Math.log2(e/un.A4),a=Math.round(12*r)+57,u=Math.floor(a/12);return u<0&&(a+=-12*u),nD[a%12]+u.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let e=this._beatsToUnits(1),r=this.valueOf()/e;return Math.floor(r*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(60*e/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return Ch(e)}static ftom(e){return ci(e)}}let tD={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},nD=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function sD(l,e){return new un(ct(),l,e)}class Et extends Sn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function iD(l,e){return new Et(ct(),l,e)}class jt extends ai{constructor(){super();let e=S(jt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:ct()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return Um(e),new Sn(this.context,e).toSeconds()}toFrequency(e){return new un(this.context,e).toFrequency()}toTicks(e){return new Et(this.context,e).toTicks()}_getPartialProperties(e){let r=this.get();return Object.keys(r).forEach(a=>{pn(e[a])&&delete r[a]}),r}get(){let e=this.constructor.getDefaults();return Object.keys(e).forEach(r=>{if(Reflect.has(this,r)){let a=this[r];we(a)&&we(a.value)&&we(a.setValueAtTime)?e[r]=a.value:a instanceof jt?e[r]=a._getPartialProperties(e[r]):Wt(a)||Cn(a)||ss(a)||vh(a)?e[r]=a:delete e[r]}}),e}set(e){return Object.keys(e).forEach(r=>{Reflect.has(this,r)&&we(this[r])&&(this[r]&&we(this[r].value)&&we(this[r].setValueAtTime)?this[r].value!==e[r]&&(this[r].value=e[r]):this[r]instanceof jt?this[r].set(e[r]):this[r]=e[r])}),this}}class br extends En{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){let r=this.get(e);return r!==null?r.state:this._initial}setStateAtTime(e,r,a){return Gt(r,0),this.add(Object.assign({},a,{state:e,time:r})),this}getLastState(e,r){for(let a=this._search(r);a>=0;a--){let u=this._timeline[a];if(u.state===e)return u}}getNextState(e,r){let a=this._search(r);if(a!==-1)for(let u=a;u<this._timeline.length;u++){let d=this._timeline[u];if(d.state===e)return d}}}class fe extends jt{constructor(){super(S(fe.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;let e=S(fe.getDefaults(),arguments,["param","units","convert"]);for(ce(we(e.param)&&(Mi(e.param)||e.param instanceof fe),"param must be an AudioParam");!Mi(e.param);)e.param=e.param._param;this._swappable=!!we(e.swappable)&&e.swappable,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new En(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,we(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(jt.getDefaults(),{convert:!0,units:"number"})}get value(){let e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return we(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return we(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,r){return this.units===r}_assertRange(e){return we(this.maxValue)&&we(this.minValue)&&Gt(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?_r(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?Qo(e):e}setValueAtTime(e,r){let a=this.toSeconds(r),u=this._fromType(e);return ce(isFinite(u)&&isFinite(a),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(r)}`),this._assertRange(u),this.log(this.units,"setValueAtTime",e,a),this._events.add({time:a,type:"setValueAtTime",value:u}),this._param.setValueAtTime(u,a),this}getValueAtTime(e){let r=Math.max(this.toSeconds(e),0),a=this._events.getAfter(r),u=this._events.get(r),d=this._initialValue;if(u===null)d=this._initialValue;else if(u.type!=="setTargetAtTime"||a!==null&&a.type!=="setValueAtTime")if(a===null)d=u.value;else if(a.type==="linearRampToValueAtTime"||a.type==="exponentialRampToValueAtTime"){let p=u.value;if(u.type==="setTargetAtTime"){let g=this._events.getBefore(u.time);p=g===null?this._initialValue:g.value}d=a.type==="linearRampToValueAtTime"?this._linearInterpolate(u.time,p,a.time,a.value,r):this._exponentialInterpolate(u.time,p,a.time,a.value,r)}else d=u.value;else{let p=this._events.getBefore(u.time),g;g=p===null?this._initialValue:p.value,u.type==="setTargetAtTime"&&(d=this._exponentialApproach(u.time,g,u.value,u.constant,r))}return this._toType(d)}setRampPoint(e){e=this.toSeconds(e);let r=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(r)===0&&(r=this._toType(this._minOutput)),this.setValueAtTime(r,e),this}linearRampToValueAtTime(e,r){let a=this._fromType(e),u=this.toSeconds(r);return ce(isFinite(a)&&isFinite(u),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(r)}`),this._assertRange(a),this._events.add({time:u,type:"linearRampToValueAtTime",value:a}),this.log(this.units,"linearRampToValueAtTime",e,u),this._param.linearRampToValueAtTime(a,u),this}exponentialRampToValueAtTime(e,r){let a=this._fromType(e);a=rs(a,0)?this._minOutput:a,this._assertRange(a);let u=this.toSeconds(r);return ce(isFinite(a)&&isFinite(u),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(r)}`),this._events.add({time:u,type:"exponentialRampToValueAtTime",value:a}),this.log(this.units,"exponentialRampToValueAtTime",e,u),this._param.exponentialRampToValueAtTime(a,u),this}exponentialRampTo(e,r,a){return a=this.toSeconds(a),this.setRampPoint(a),this.exponentialRampToValueAtTime(e,a+this.toSeconds(r)),this}linearRampTo(e,r,a){return a=this.toSeconds(a),this.setRampPoint(a),this.linearRampToValueAtTime(e,a+this.toSeconds(r)),this}targetRampTo(e,r,a){return a=this.toSeconds(a),this.setRampPoint(a),this.exponentialApproachValueAtTime(e,a,r),this}exponentialApproachValueAtTime(e,r,a){r=this.toSeconds(r),a=this.toSeconds(a);let u=Math.log(a+1)/Math.log(200);return this.setTargetAtTime(e,r,u),this.cancelAndHoldAtTime(r+.9*a),this.linearRampToValueAtTime(e,r+a),this}setTargetAtTime(e,r,a){let u=this._fromType(e);ce(isFinite(a)&&a>0,"timeConstant must be a number greater than 0");let d=this.toSeconds(r);return this._assertRange(u),ce(isFinite(u)&&isFinite(d),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(r)}`),this._events.add({constant:a,time:d,type:"setTargetAtTime",value:u}),this.log(this.units,"setTargetAtTime",e,d,a),this._param.setTargetAtTime(u,d,a),this}setValueCurveAtTime(e,r,a,u=1){a=this.toSeconds(a),r=this.toSeconds(r);let d=this._fromType(e[0])*u;this.setValueAtTime(this._toType(d),r);let p=a/(e.length-1);for(let g=1;g<e.length;g++){let v=this._fromType(e[g])*u;this.linearRampToValueAtTime(this._toType(v),r+g*p)}return this}cancelScheduledValues(e){let r=this.toSeconds(e);return ce(isFinite(r),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(r),this._param.cancelScheduledValues(r),this.log(this.units,"cancelScheduledValues",r),this}cancelAndHoldAtTime(e){let r=this.toSeconds(e),a=this._fromType(this.getValueAtTime(r));ce(isFinite(r),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",r,"value="+a);let u=this._events.get(r),d=this._events.getAfter(r);return u&&rs(u.time,r)?d?(this._param.cancelScheduledValues(d.time),this._events.cancel(d.time)):(this._param.cancelAndHoldAtTime(r),this._events.cancel(r+this.sampleTime)):d&&(this._param.cancelScheduledValues(d.time),this._events.cancel(d.time),d.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(a),r):d.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(a),r)),this._events.add({time:r,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,r),this}rampTo(e,r=.1,a){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,r,a):this.linearRampTo(e,r,a),this}apply(e){let r=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(r),r);let a=this._events.get(r);if(a&&a.type==="setTargetAtTime"){let u=this._events.getAfter(a.time),d=u?u.time:r+2,p=(d-r)/10;for(let g=r;g<d;g+=p)e.linearRampToValueAtTime(this.getValueAtTime(g),g)}return this._events.forEachAfter(this.context.currentTime,u=>{u.type==="cancelScheduledValues"?e.cancelScheduledValues(u.time):u.type==="setTargetAtTime"?e.setTargetAtTime(u.value,u.time,u.constant):e[u.type](u.value,u.time)}),this}setParam(e){ce(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let r=this.input;return r.disconnect(this._param),this.apply(e),this._param=e,r.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,r,a,u,d){return a+(r-a)*Math.exp(-(d-e)/u)}_linearInterpolate(e,r,a,u,d){return r+(d-e)/(a-e)*(u-r)}_exponentialInterpolate(e,r,a,u,d){return r*Math.pow(u/r,(d-e)/(a-e))}}class H extends jt{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return we(this.input)?Mi(this.input)||this.input instanceof fe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return we(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return we(e)&&(e instanceof H||oi(e))}_getInternalNodes(){let e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){let e=this._getInternalNodes();ce(e.length>0,"ToneAudioNode does not have any internal nodes");let r=e[0];return{channelCount:r.channelCount,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){let r=this._getChannelProperties();this._setChannelProperties(Object.assign(r,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){let r=this._getChannelProperties();this._setChannelProperties(Object.assign(r,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){let r=this._getChannelProperties();this._setChannelProperties(Object.assign(r,{channelInterpretation:e}))}connect(e,r=0,a=0){return ln(this,e,r,a),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return fr("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,r=0,a=0){return Sh(this,e,r,a),this}chain(...e){return Tn(this,...e),this}fan(...e){return e.forEach(r=>this.connect(r)),this}dispose(){return super.dispose(),we(this.input)&&(this.input instanceof H?this.input.dispose():oi(this.input)&&this.input.disconnect()),we(this.output)&&(this.output instanceof H?this.output.dispose():oi(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Tn(...l){let e=l.shift();l.reduce((r,a)=>(r instanceof H?r.connect(a):oi(r)&&ln(r,a),a),e)}function ln(l,e,r=0,a=0){for(ce(we(l),"Cannot connect from undefined node"),ce(we(e),"Cannot connect to undefined node"),(e instanceof H||oi(e))&&ce(e.numberOfInputs>0,"Cannot connect to node with no inputs"),ce(l.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof H||e instanceof fe;)we(e.input)&&(e=e.input);for(;l instanceof H;)we(l.output)&&(l=l.output);Mi(e)?l.connect(e,r):l.connect(e,r,a)}function Sh(l,e,r=0,a=0){if(we(e))for(;e instanceof H;)e=e.input;for(;!oi(l);)we(l.output)&&(l=l.output);Mi(e)?l.disconnect(e,r):oi(e)?l.disconnect(e,r,a):l.disconnect()}function rD(...l){let e=l.pop();we(e)&&l.forEach(r=>ln(r,e))}class ae extends H{constructor(){super(S(ae.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;let e=S(ae.getDefaults(),arguments,["gain","units"]);this.gain=new fe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),ue(this,"gain")}static getDefaults(){return Object.assign(H.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Dr extends H{constructor(e){super(e),this.onended=Ie,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ae({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(r){let a=this.toSeconds(r);return this._startTime!==-1&&a>=this._startTime&&(this._stopTime===-1||a<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(H.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ie})}_startGain(e,r=1){ce(this._startTime===-1,"Source cannot be started more than once");let a=this.toSeconds(this._fadeIn);return this._startTime=e+a,this._startTime=Math.max(this._startTime,this.context.currentTime),a>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(r,e+a):this._gainNode.gain.exponentialApproachValueAtTime(r,e,a)):this._gainNode.gain.setValueAtTime(r,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){ce(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();let r=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+r,this._stopTime=Math.max(this._stopTime,this.now()),r>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,r,e):this._gainNode.gain.targetRampTo(0,r,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{let a=this._curve==="exponential"?2*r:0;this._stopSource(this.now()+a),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ie&&(this.onended(this),this.onended=Ie,!this.context.isOffline)){let e=()=>this.dispose();window.requestIdleCallback!==void 0?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ce(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Ie,this}}class Yo extends Dr{constructor(){super(S(Yo.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();let e=S(Yo.getDefaults(),arguments,["offset"]);ln(this._source,this._gainNode),this.offset=new fe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Dr.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){let r=this.toSeconds(e);return this.log("start",r),this._startGain(r),this._source.start(r),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class le extends H{constructor(){super(S(le.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;let e=S(le.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Yo({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(H.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,r=0,a=0){return Xo(this,e,r,a),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,r){return this._param.setValueAtTime(e,r),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,r){return this._param.linearRampToValueAtTime(e,r),this}exponentialRampToValueAtTime(e,r){return this._param.exponentialRampToValueAtTime(e,r),this}exponentialRampTo(e,r,a){return this._param.exponentialRampTo(e,r,a),this}linearRampTo(e,r,a){return this._param.linearRampTo(e,r,a),this}targetRampTo(e,r,a){return this._param.targetRampTo(e,r,a),this}exponentialApproachValueAtTime(e,r,a){return this._param.exponentialApproachValueAtTime(e,r,a),this}setTargetAtTime(e,r,a){return this._param.setTargetAtTime(e,r,a),this}setValueCurveAtTime(e,r,a,u){return this._param.setValueCurveAtTime(e,r,a,u),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,r,a){return this._param.rampTo(e,r,a),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Xo(l,e,r,a){(e instanceof fe||Mi(e)||e instanceof le&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof le&&(e.overridden=!0)),ln(l,e,r,a)}class xc extends fe{constructor(){super(S(xc.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new En(1/0),this._multiplier=1;let e=S(xc.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(fe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,r,a){r=this.toSeconds(r),this.setRampPoint(r);let u=this._fromType(e),d=this._events.get(r),p=Math.round(Math.max(1/a,1));for(let g=0;g<=p;g++){let v=a*g+r,y=this._exponentialApproach(d.time,d.value,u,a,v);this.linearRampToValueAtTime(this._toType(y),v)}return this}setValueAtTime(e,r){let a=this.toSeconds(r);super.setValueAtTime(e,r);let u=this._events.get(a),d=this._events.previousEvent(u),p=this._getTicksUntilEvent(d,a);return u.ticks=Math.max(p,0),this}linearRampToValueAtTime(e,r){let a=this.toSeconds(r);super.linearRampToValueAtTime(e,r);let u=this._events.get(a),d=this._events.previousEvent(u),p=this._getTicksUntilEvent(d,a);return u.ticks=Math.max(p,0),this}exponentialRampToValueAtTime(e,r){r=this.toSeconds(r);let a=this._fromType(e),u=this._events.get(r),d=Math.round(Math.max(10*(r-u.time),1)),p=(r-u.time)/d;for(let g=0;g<=d;g++){let v=p*g+u.time,y=this._exponentialInterpolate(u.time,u.value,r,a,v);this.linearRampToValueAtTime(this._toType(y),v)}return this}_getTicksUntilEvent(e,r){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(pn(e.ticks)){let p=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(p,e.time)}let a=this._fromType(this.getValueAtTime(e.time)),u=this._fromType(this.getValueAtTime(r)),d=this._events.get(r);return d&&d.time===r&&d.type==="setValueAtTime"&&(u=this._fromType(this.getValueAtTime(r-this.sampleTime))),.5*(r-e.time)*(a+u)+e.ticks}getTicksAtTime(e){let r=this.toSeconds(e),a=this._events.get(r);return Math.max(this._getTicksUntilEvent(a,r),0)}getDurationOfTicks(e,r){let a=this.toSeconds(r),u=this.getTicksAtTime(r);return this.getTimeOfTick(u+e)-a}getTimeOfTick(e){let r=this._events.get(e,"ticks"),a=this._events.getAfter(e,"ticks");if(r&&r.ticks===e)return r.time;if(r&&a&&a.type==="linearRampToValueAtTime"&&r.value!==a.value){let u=this._fromType(this.getValueAtTime(r.time)),d=(this._fromType(this.getValueAtTime(a.time))-u)/(a.time-r.time),p=Math.sqrt(Math.pow(u,2)-2*d*(r.ticks-e)),g=(-u+p)/d,v=(-u-p)/d;return(g>0?g:v)+r.time}return r?r.value===0?1/0:r.time+(e-r.ticks)/r.value:e/this._initialValue}ticksToTime(e,r){return this.getDurationOfTicks(e,r)}timeToTicks(e,r){let a=this.toSeconds(r),u=this.toSeconds(e),d=this.getTicksAtTime(a);return this.getTicksAtTime(a+u)-d}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){let r=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(r,0)}}class Cc extends le{constructor(){super(S(Cc.getDefaults(),arguments,["value"])),this.name="TickSignal";let e=S(Cc.getDefaults(),arguments,["value"]);this.input=this._param=new xc({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(le.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,r){return this._param.ticksToTime(e,r)}timeToTicks(e,r){return this._param.timeToTicks(e,r)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,r){return this._param.getDurationOfTicks(e,r)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Ec extends jt{constructor(){super(S(Ec.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new br,this._tickOffset=new En,this._ticksAtTime=new En,this._secondsAtTime=new En;let e=S(Ec.getDefaults(),arguments,["frequency"]);this.frequency=new Cc({context:this.context,units:e.units,value:e.frequency}),ue(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},jt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,r){let a=this.toSeconds(e);return this._state.getValueAtTime(a)!=="started"&&(this._state.setStateAtTime("started",a),we(r)&&this.setTicksAtTime(r,a),this._ticksAtTime.cancel(a),this._secondsAtTime.cancel(a)),this}stop(e){let r=this.toSeconds(e);if(this._state.getValueAtTime(r)==="stopped"){let a=this._state.get(r);a&&a.time>0&&(this._tickOffset.cancel(a.time),this._state.cancel(a.time))}return this._state.cancel(r),this._state.setStateAtTime("stopped",r),this.setTicksAtTime(0,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r),this}pause(e){let r=this.toSeconds(e);return this._state.getValueAtTime(r)==="started"&&(this._state.setStateAtTime("paused",r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){let r=this.toSeconds(e),a=this._state.getLastState("stopped",r),u=this._ticksAtTime.get(r),d={state:"paused",time:r};this._state.add(d);let p=u||a,g=u?u.ticks:0,v=null;return this._state.forEachBetween(p.time,r+this.sampleTime,y=>{let w=p.time,b=this._tickOffset.get(y.time);b&&b.time>=p.time&&(g=b.ticks,w=b.time),p.state==="started"&&y.state!=="started"&&(g+=this.frequency.getTicksAtTime(y.time)-this.frequency.getTicksAtTime(w),y.time!==d.time&&(v={state:y.state,time:y.time,ticks:g})),p=y}),this._state.remove(d),v&&this._ticksAtTime.add(v),g}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){let r=this.now(),a=this.frequency.timeToTicks(e,r);this.setTicksAtTime(a,r)}getSecondsAtTime(e){e=this.toSeconds(e);let r=this._state.getLastState("stopped",e),a={state:"paused",time:e};this._state.add(a);let u=this._secondsAtTime.get(e),d=u||r,p=u?u.seconds:0,g=null;return this._state.forEachBetween(d.time,e+this.sampleTime,v=>{let y=d.time,w=this._tickOffset.get(v.time);w&&w.time>=d.time&&(p=w.seconds,y=w.time),d.state==="started"&&v.state!=="started"&&(p+=v.time-y,v.time!==a.time&&(g={state:v.state,time:v.time,seconds:p})),d=v}),this._state.remove(a),g&&this._secondsAtTime.add(g),p}setTicksAtTime(e,r){return r=this.toSeconds(r),this._tickOffset.cancel(r),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,r),ticks:e,time:r}),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,r=this.now()){let a=this._tickOffset.get(r),u=this._state.get(r),d=Math.max(a.time,u.time),p=this.frequency.getTicksAtTime(d)+e-a.ticks;return this.frequency.getTimeOfTick(p)}forEachTickBetween(e,r,a){let u=this._state.get(e);this._state.forEachBetween(e,r,p=>{u&&u.state==="started"&&p.state!=="started"&&this.forEachTickBetween(Math.max(u.time,e),p.time-this.sampleTime,a),u=p});let d=null;if(u&&u.state==="started"){let p=Math.max(u.time,e),g=this.frequency.getTicksAtTime(p),v=g-this.frequency.getTicksAtTime(u.time),y=Math.ceil(v)-v;y=rs(y,1)?0:y;let w=this.frequency.getTimeOfTick(g+y);for(;w<r;){try{a(w,Math.round(this.getTicksAtTime(w)))}catch(b){d=b;break}w+=this.frequency.getDurationOfTicks(1,w)}}if(d)throw d;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Oi extends jt{constructor(){super(S(Oi.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Ie,this._lastUpdate=0,this._state=new br("stopped"),this._boundLoop=this._loop.bind(this);let e=S(Oi.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Ec({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,ue(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(jt.getDefaults(),{callback:Ie,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,r){yh(this.context);let a=this.toSeconds(e);return this.log("start",a),this._state.getValueAtTime(a)!=="started"&&(this._state.setStateAtTime("started",a),this._tickSource.start(a,r),a<this._lastUpdate&&this.emit("start",a,r)),this}stop(e){let r=this.toSeconds(e);return this.log("stop",r),this._state.cancel(r),this._state.setStateAtTime("stopped",r),this._tickSource.stop(r),r<this._lastUpdate&&this.emit("stop",r),this}pause(e){let r=this.toSeconds(e);return this._state.getValueAtTime(r)==="started"&&(this._state.setStateAtTime("paused",r),this._tickSource.pause(r),r<this._lastUpdate&&this.emit("pause",r)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,r){return this._tickSource.setTicksAtTime(e,r),this}getTimeOfTick(e,r=this.now()){return this._tickSource.getTimeOfTick(e,r)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,r){let a=this.toSeconds(r),u=this.getTicksAtTime(a);return this._tickSource.getTimeOfTick(u+e,a)}_loop(){let e=this._lastUpdate,r=this.now();this._lastUpdate=r,this.log("loop",e,r),e!==r&&(this._state.forEachBetween(e,r,a=>{switch(a.state){case"started":let u=this._tickSource.getTicksAtTime(a.time);this.emit("start",a.time,u);break;case"stopped":a.time!==0&&this.emit("stop",a.time);break;case"paused":this.emit("pause",a.time)}}),this._tickSource.forEachTickBetween(e,r,(a,u)=>{this.callback(a,u)}))}getStateAtTime(e){let r=this.toSeconds(e);return this._state.getValueAtTime(r)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}gr.mixin(Oi);class mn extends H{constructor(){super(S(mn.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";let e=S(mn.getDefaults(),arguments,["delayTime","maxDelay"]),r=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(r,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(r),this.delayTime=new fe({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),ue(this,"delayTime")}static getDefaults(){return Object.assign(H.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}function oD(l,e,r=2,a=ct().sampleRate){return nt(this,void 0,void 0,function*(){let u=ct(),d=new yr(r,e,a);bc(d),yield l(d);let p=d.render();bc(u);let g=yield p;return new Le(g)})}class xr extends ai{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;let e=S(xr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(r=>{this._loadingCount++;let a=e.urls[r];this.add(r,a,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ie,onload:Ie,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return ce(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,r])=>r.loaded)}add(e,r,a=Ie,u=Ie){return ss(r)?(this.baseUrl&&r.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Le(this.baseUrl+r,a,u))):this._buffers.set(e.toString(),new Le(r,a,u)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Cr extends un{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return ci(super._frequencyToUnits(e))}_ticksToUnits(e){return ci(super._ticksToUnits(e))}_beatsToUnits(e){return ci(super._beatsToUnits(e))}_secondsToUnits(e){return ci(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return Ch(this.toMidi())}transpose(e){return new Cr(this.context,this.toMidi()+e)}}function aD(l,e){return new Cr(ct(),l,e)}class dt extends Et{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function cD(l,e){return new dt(ct(),l,e)}class uD extends jt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new En,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,r){return this._events.add({callback:e,time:this.toSeconds(r)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){let e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){let r=this._events.shift();r&&e-r.time<=this.expiration&&r.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}_c(l=>{l.draw=new uD({context:l})}),wc(l=>{l.draw.dispose()});class Qm extends ai{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){ce(we(e.time),"Events must have a time property"),ce(we(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let r=new lD(e.time,e.time+e.duration,e);for(this._root===null?this._root=r:this._root.insert(r),this._length++;r!==null;)r.updateHeight(),r.updateMax(),this._rebalance(r),r=r.parent;return this}remove(e){if(this._root!==null){let r=[];this._root.search(e.time,r);for(let a of r)if(a.event===e){this._removeNode(a),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,r=>this.remove(r)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,r){e.parent!==null?(e.isLeftChild()?e.parent.left=r:e.parent.right=r,this._rebalance(e.parent)):this._setRoot(r)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{let r,a=null;if(e.getBalance()>0)if(e.left.right===null)r=e.left,r.right=e.right,a=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,a=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,a=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,a=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),a&&this._rebalance(a)}e.dispose()}_rotateLeft(e){let r=e.parent,a=e.isLeftChild(),u=e.right;u&&(e.right=u.left,u.left=e),r!==null?a?r.left=u:r.right=u:this._setRoot(u)}_rotateRight(e){let r=e.parent,a=e.isLeftChild(),u=e.left;u&&(e.left=u.right,u.right=e),r!==null?a?r.left=u:r.right=u:this._setRoot(u)}_rebalance(e){let r=e.getBalance();r>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):r<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){let r=[];if(this._root.search(e,r),r.length>0){let a=r[0];for(let u=1;u<r.length;u++)r[u].low>a.low&&(a=r[u]);return a.event}}return null}forEach(e){if(this._root!==null){let r=[];this._root.traverse(a=>r.push(a)),r.forEach(a=>{a.event&&e(a.event)})}return this}forEachAtTime(e,r){if(this._root!==null){let a=[];this._root.search(e,a),a.forEach(u=>{u.event&&r(u.event)})}return this}forEachFrom(e,r){if(this._root!==null){let a=[];this._root.searchAfter(e,a),a.forEach(u=>{u.event&&r(u.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class lD{constructor(e,r,a){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=a,this.low=e,this.high=r,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,r){e>this.max||(this.left!==null&&this.left.search(e,r),this.low<=e&&this.high>e&&r.push(this),this.low>e||this.right!==null&&this.right.search(e,r))}searchAfter(e,r){this.low>=e&&(r.push(this),this.left!==null&&this.left.searchAfter(e,r)),this.right!==null&&this.right.searchAfter(e,r)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class ws extends H{constructor(){super(S(ws.getDefaults(),arguments,["volume"])),this.name="Volume";let e=S(ws.getDefaults(),arguments,["volume"]);this.input=this.output=new ae({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,ue(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(H.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Sc extends H{constructor(){super(S(Sc.getDefaults(),arguments)),this.name="Destination",this.input=new ws({context:this.context}),this.output=new ae({context:this.context}),this.volume=this.input.volume;let e=S(Sc.getDefaults(),arguments);Tn(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(H.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Tn(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}_c(l=>{l.destination=new Sc({context:l})}),wc(l=>{l.destination.dispose()});class hD extends ai{constructor(e){super(),this.name="TimelineValue",this._timeline=new En({memory:10}),this._initialValue=e}set(e,r){return this._timeline.add({value:e,time:r}),this}get(e){let r=this._timeline.get(e);return r?r.value:this._initialValue}}class In extends H{constructor(){super(Object.assign(S(In.getDefaults(),arguments,["context"])))}connect(e,r=0,a=0){return Xo(this,e,r,a),this}}class $n extends In{constructor(){super(Object.assign(S($n.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;let e=S($n.getDefaults(),arguments,["mapping","length"]);Wt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Bm(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(le.getDefaults(),{length:1024})}setMap(e,r=1024){let a=new Float32Array(r);for(let u=0,d=r;u<d;u++){let p=u/(d-1)*2-1;a[u]=e(p,u)}return this.curve=a,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){ce(["none","2x","4x"].some(r=>r.includes(e)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class ki extends In{constructor(){super(Object.assign(S(ki.getDefaults(),arguments,["value"]))),this.name="Pow";let e=S(ki.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new $n({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(In.getDefaults(),{value:1})}_expFunc(e){return r=>Math.pow(Math.abs(r),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}let Tc=(()=>{class l{constructor(r,a){this.id=l._eventId++,this._remainderTime=0;let u=Object.assign(l.getDefaults(),a);this.transport=r,this.callback=u.callback,this._once=u.once,this.time=Math.floor(u.time),this._remainderTime=u.time-this.time}static getDefaults(){return{callback:Ie,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(r){if(this.callback){let a=this.transport.bpm.getDurationOfTicks(1,r);this.callback(r+this._remainderTime*a),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}return l._eventId=0,l})();class Th extends Tc{constructor(e,r){super(e,r),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let a=Object.assign(Th.getDefaults(),r);this.duration=a.duration,this._interval=a.interval,this._nextTick=a.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Tc.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return yc(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new dt(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){yc(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new dt(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;let r=this.transport.getTicksAtTime(e);mr(r,this.time)&&(this._nextTick=this.floatTime+Math.ceil((r-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Ko extends jt{constructor(){super(S(Ko.getDefaults(),arguments)),this.name="Transport",this._loop=new hD(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new En,this._repeatedEvents=new Qm,this._syncedSignals=[],this._swingAmount=0;let e=S(Ko.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Oi({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),ue(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(jt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,r){if(this._loop.get(e)&&r>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),r=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&r%this._ppq!=0&&r%(2*this._swingTicks)!=0){let a=r%(2*this._swingTicks)/(2*this._swingTicks),u=Math.sin(a*Math.PI)*this._swingAmount;e+=new dt(this.context,2*this._swingTicks/3).toSeconds()*u}_h(!0),this._timeline.forEachAtTime(r,a=>a.invoke(e)),_h(!1)}schedule(e,r){let a=new Tc(this,{callback:e,time:new Et(this.context,r).toTicks()});return this._addEvent(a,this._timeline)}scheduleRepeat(e,r,a,u=1/0){let d=new Th(this,{callback:e,duration:new Sn(this.context,u).toTicks(),interval:new Sn(this.context,r).toTicks(),time:new Et(this.context,a).toTicks()});return this._addEvent(d,this._repeatedEvents)}scheduleOnce(e,r){let a=new Tc(this,{callback:e,once:!0,time:new Et(this.context,r).toTicks()});return this._addEvent(a,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){let r=this._scheduledEvents[e.toString()];r.timeline.remove(r.event),r.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,r){return this._scheduledEvents[e.id.toString()]={event:e,timeline:r},r.add(e),e.id}cancel(e=0){let r=this.toTicks(e);return this._timeline.forEachFrom(r,a=>this.clear(a.id)),this._repeatedEvents.forEachFrom(r,a=>this.clear(a.id)),this}_bindClockEvents(){this._clock.on("start",(e,r)=>{r=new dt(this.context,r).toSeconds(),this.emit("start",e,r)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,r){let a;return this.context.resume(),we(r)&&(a=this.toTicks(r)),this._clock.start(e,a),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Wt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Sn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Sn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,r){return this.loopStart=e,this.loopEnd=r,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new dt(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){let e=this.now(),r=this._clock.getTicksAtTime(e);return new dt(this.context,r).toBarsBeatsSixteenths()}set position(e){let r=this.toTicks(e);this.ticks=r}get seconds(){return this._clock.seconds}set seconds(e){let r=this.now(),a=this._clock.frequency.timeToTicks(e,r);this.ticks=a}get progress(){if(this.loop){let e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){let r=this.now();if(this.state==="started"){let a=this._clock.getTicksAtTime(r),u=r+this._clock.frequency.getDurationOfTicks(Math.ceil(a)-a,r);this.emit("stop",u),this._clock.setTicksAtTime(e,u),this.emit("start",u,this._clock.getSecondsAtTime(u))}else this.emit("ticks",r),this._clock.setTicksAtTime(e,r)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{let r=this.now(),a=e-this.getTicksAtTime(r)%e;return this._clock.nextTickTime(a,r)}}syncSignal(e,r){let a=this.now(),u=this.bpm,d=1/(60/u.getValueAtTime(a)/this.PPQ),p=[];if(e.units==="time"){let v=.015625/d,y=new ae(v),w=new ki(-1),b=new ae(v);u.chain(y,w,b),u=b,d=1/d,p=[y,w,b]}r||(r=e.getValueAtTime(a)!==0?e.getValueAtTime(a)/d:0);let g=new ae(r);return u.connect(g),g.connect(e._param),p.push(g),this._syncedSignals.push({initial:e.value,nodes:p,signal:e}),e.value=0,this}unsyncSignal(e){for(let r=this._syncedSignals.length-1;r>=0;r--){let a=this._syncedSignals[r];a.signal===e&&(a.nodes.forEach(u=>u.dispose()),a.signal.value=a.initial,this._syncedSignals.splice(r,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Go(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}gr.mixin(Ko),_c(l=>{l.transport=new Ko({context:l})}),wc(l=>{l.transport.dispose()});class _t extends H{constructor(e){super(e),this.input=void 0,this._state=new br("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ie,this._syncedStop=Ie,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new ws({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,ue(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(H.getDefaults(),{mute:!1,onstop:Ie,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,r,a){let u=pn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(u=this._clampToCurrentTime(u),this._synced||this._state.getValueAtTime(u)!=="started")if(this.log("start",u),this._state.setStateAtTime("started",u),this._synced){let d=this._state.get(u);d&&(d.offset=this.toSeconds(qn(r,0)),d.duration=a?this.toSeconds(a):void 0);let p=this.context.transport.schedule(g=>{this._start(g,r,a)},u);this._scheduled.push(p),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>u&&this._syncedStart(this.now(),this.context.transport.seconds)}else yh(this.context),this._start(u,r,a);else ce(mr(u,this._state.get(u).time),"Start time must be strictly greater than previous start time"),this._state.cancel(u),this._state.setStateAtTime("started",u),this.log("restart",u),this.restart(u,r,a);return this}stop(e){let r=pn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),this._state.getValueAtTime(r)==="started"||we(this._state.getNextState("started",r))){if(this.log("stop",r),this._synced){let a=this.context.transport.schedule(this._stop.bind(this),r);this._scheduled.push(a)}else this._stop(r);this._state.cancel(r),this._state.setStateAtTime("stopped",r)}return this}restart(e,r,a){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,r,a)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,r)=>{if(mr(r,0)){let a=this._state.get(r);if(a&&a.state==="started"&&a.time!==r){let u=r-this.toSeconds(a.time),d;a.duration&&(d=this.toSeconds(a.duration)-u),this._start(e,this.toSeconds(a.offset)+u,d)}}},this._syncedStop=e=>{let r=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(r)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ie,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class qs extends Dr{constructor(){super(S(qs.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;let e=S(qs.getDefaults(),arguments,["url","onload"]);ln(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new fe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Le(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Dr.getDefaults(),{url:new Le,loop:!1,loopEnd:0,loopStart:0,onload:Ie,onerror:Ie,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,r,a,u=1){ce(this.buffer.loaded,"buffer is either not set or not loaded");let d=this.toSeconds(e);this._startGain(d,u),r=this.loop?qn(r,this.loopStart):qn(r,0);let p=Math.max(this.toSeconds(r),0);if(this.loop){let g=this.toSeconds(this.loopEnd)||this.buffer.duration,v=this.toSeconds(this.loopStart),y=g-v;Dh(p,g)&&(p=(p-v)%y+v),rs(p,this.buffer.duration)&&(p=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,yc(p,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(d,p)),we(a)){let g=this.toSeconds(a);g=Math.max(g,0),this.stop(d+g)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class $s extends _t{constructor(){super(S($s.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;let e=S($s.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(_t.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(ce(e in Ym,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){let r=this.now();this._stop(r),this._start(r)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){let r=Ym[this._type];this._source=new qs({url:r,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(r.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}let Er=220500,Us={brown:null,pink:null,white:null},Ym={get brown(){if(!Us.brown){let l=[];for(let e=0;e<2;e++){let r=new Float32Array(Er);l[e]=r;let a=0;for(let u=0;u<Er;u++){let d=2*Math.random()-1;r[u]=(a+.02*d)/1.02,a=r[u],r[u]*=3.5}}Us.brown=new Le().fromArray(l)}return Us.brown},get pink(){if(!Us.pink){let l=[];for(let e=0;e<2;e++){let r=new Float32Array(Er),a,u,d,p,g,v,y;l[e]=r,a=u=d=p=g=v=y=0;for(let w=0;w<Er;w++){let b=2*Math.random()-1;a=.99886*a+.0555179*b,u=.99332*u+.0750759*b,d=.969*d+.153852*b,p=.8665*p+.3104856*b,g=.55*g+.5329522*b,v=-.7616*v-.016898*b,r[w]=a+u+d+p+g+v+y+.5362*b,r[w]*=.11,y=.115926*b}}Us.pink=new Le().fromArray(l)}return Us.pink},get white(){if(!Us.white){let l=[];for(let e=0;e<2;e++){let r=new Float32Array(Er);l[e]=r;for(let a=0;a<Er;a++)r[a]=2*Math.random()-1}Us.white=new Le().fromArray(l)}return Us.white}};class Sr extends H{constructor(){super(S(Sr.getDefaults(),arguments,["volume"])),this.name="UserMedia";let e=S(Sr.getDefaults(),arguments,["volume"]);this._volume=this.output=new ws({context:this.context,volume:e.volume}),this.volume=this._volume.volume,ue(this,"volume"),this.mute=e.mute}static getDefaults(){return Object.assign(H.getDefaults(),{mute:!1,volume:0})}open(e){return nt(this,void 0,void 0,function*(){ce(Sr.supported,"UserMedia is not supported"),this.state==="started"&&this.close();let r=yield Sr.enumerateDevices();Cn(e)?this._device=r[e]:(this._device=r.find(d=>d.label===e||d.deviceId===e),!this._device&&r.length>0&&(this._device=r[0]),ce(we(this._device),`No matching device ${e}`));let a={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(a.audio.deviceId=this._device.deviceId);let u=yield navigator.mediaDevices.getUserMedia(a);if(!this._stream){this._stream=u;let d=this.context.createMediaStreamSource(u);ln(d,this.output),this._mediaStream=d}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(e=>{e.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return nt(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(e=>e.kind==="audioinput")})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){return this._device?this._device.deviceId:void 0}get groupId(){return this._device?this._device.groupId:void 0}get label(){return this._device?this._device.label:void 0}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return we(navigator.mediaDevices)&&we(navigator.mediaDevices.getUserMedia)}}function Ri(l,e){return nt(this,void 0,void 0,function*(){let r=e/l.context.sampleRate,a=new yr(1,r,l.context.sampleRate);return new l.constructor(Object.assign(l.get(),{frequency:2/r,detune:0,context:a})).toDestination().start(0),(yield a.render()).getChannelData(0)})}class Tr extends Dr{constructor(){super(S(Tr.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];let e=S(Tr.getDefaults(),arguments,["frequency","type"]);ln(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new fe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new fe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),ue(this,["frequency","detune"])}static getDefaults(){return Object.assign(Dr.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){let r=this.toSeconds(e);return this.log("start",r),this._startGain(r),this._oscillator.start(r),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}let tn=(()=>{class l extends _t{constructor(){super(S(l.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;let r=S(l.getDefaults(),arguments,["frequency","type"]);this.frequency=new le({context:this.context,units:"frequency",value:r.frequency}),ue(this,"frequency"),this.detune=new le({context:this.context,units:"cents",value:r.detune}),ue(this,"detune"),this._partials=r.partials,this._partialCount=r.partialCount,this._type=r.type,r.partialCount&&r.type!=="custom"&&(this._type=this.baseType+r.partialCount.toString()),this.phase=r.phase}static getDefaults(){return Object.assign(_t.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(r){let a=this.toSeconds(r),u=new Tr({context:this.context,onended:()=>this.onstop(this)});this._oscillator=u,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(a)}_stop(r){let a=this.toSeconds(r);this._oscillator&&this._oscillator.stop(a)}_restart(r){let a=this.toSeconds(r);return this.log("restart",a),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(a),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return l._periodicWaveCache.find(r=>{return r.phase===this._phase&&(a=r.partials,u=this._partials,a.length===u.length&&a.every((d,p)=>u[p]===d));var a,u});{let r=l._periodicWaveCache.find(a=>a.type===this._type&&a.phase===this._phase);return this._partialCount=r?r.partialCount:this._partialCount,r}}get type(){return this._type}set type(r){this._type=r;let a=["sine","square","sawtooth","triangle"].indexOf(r)!==-1;if(this._phase===0&&a)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=r);else{let u=this._getCachedPeriodicWave();if(we(u)){let{partials:d,wave:p}=u;this._wave=p,this._partials=d,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{let[d,p]=this._getRealImaginary(r,this._phase),g=this.context.createPeriodicWave(d,p);this._wave=g,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),l._periodicWaveCache.push({imag:p,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:d,type:this._type,wave:this._wave}),l._periodicWaveCache.length>100&&l._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(r){this.partialCount&&this._type!=="custom"&&r!=="custom"?this.type=r+this.partialCount:this.type=r}get partialCount(){return this._partialCount}set partialCount(r){Gt(r,0);let a=this._type,u=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(u&&(a=u[1]),this._type!=="custom")this.type=r===0?a:a+r.toString();else{let d=new Float32Array(r);this._partials.forEach((p,g)=>d[g]=p),this._partials=Array.from(d),this.type=this._type}}_getRealImaginary(r,a){let u=2048,d=new Float32Array(u),p=new Float32Array(u),g=1;if(r==="custom"){if(g=this._partials.length+1,this._partialCount=this._partials.length,u=g,this._partials.length===0)return[d,p]}else{let v=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(r);v?(g=parseInt(v[2],10)+1,this._partialCount=parseInt(v[2],10),r=v[1],g=Math.max(g,2),u=g):this._partialCount=0,this._partials=[]}for(let v=1;v<u;++v){let y=2/(v*Math.PI),w;switch(r){case"sine":w=v<=g?1:0,this._partials[v-1]=w;break;case"square":w=1&v?2*y:0,this._partials[v-1]=w;break;case"sawtooth":w=y*(1&v?1:-1),this._partials[v-1]=w;break;case"triangle":w=1&v?y*y*2*(v-1>>1&1?-1:1):0,this._partials[v-1]=w;break;case"custom":w=this._partials[v-1];break;default:throw new TypeError("Oscillator: invalid type: "+r)}w!==0?(d[v]=-w*Math.sin(a*v),p[v]=w*Math.cos(a*v)):(d[v]=0,p[v]=0)}return[d,p]}_inverseFFT(r,a,u){let d=0,p=r.length;for(let g=0;g<p;g++)d+=r[g]*Math.cos(g*u)+a[g]*Math.sin(g*u);return d}getInitialValue(){let[r,a]=this._getRealImaginary(this._type,0),u=0,d=2*Math.PI;for(let p=0;p<32;p++)u=Math.max(this._inverseFFT(r,a,p/32*d),u);return Ai(-this._inverseFFT(r,a,this._phase)/u,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(r){this._partials=r,this._partialCount=this._partials.length,r.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(r){this._phase=r*Math.PI/180,this.type=this._type}asArray(r=1024){return nt(this,void 0,void 0,function*(){return Ri(this,r)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}return l._periodicWaveCache=[],l})();class Ic extends In{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new $n({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ut extends le{constructor(){super(Object.assign(S(ut.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;let e=S(ut.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new ae({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ir extends _t{constructor(){super(S(Ir.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Ic({context:this.context}),this._modulationNode=new ae({context:this.context});let e=S(Ir.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new tn({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new tn({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ut({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),ue(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(tn.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return nt(this,void 0,void 0,function*(){return Ri(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Ni extends _t{constructor(){super(S(Ni.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new ae({context:this.context,gain:0});let e=S(Ni.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new tn({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new le({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new tn({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ut({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new ut({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),ue(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(tn.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return nt(this,void 0,void 0,function*(){return Ri(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Fi extends _t{constructor(){super(S(Fi.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new ae({context:this.context,gain:0}),this._thresh=new $n({context:this.context,mapping:r=>r<=0?-1:1});let e=S(Fi.getDefaults(),arguments,["frequency","width"]);this.width=new le({context:this.context,units:"audioRange",value:e.width}),this._triangle=new tn({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),ue(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(_t.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return nt(this,void 0,void 0,function*(){return Ri(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Mr extends _t{constructor(){super(S(Mr.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];let e=S(Mr.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new le({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,ue(this,["frequency","detune"])}static getDefaults(){return Object.assign(tn.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(r=>r.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(r=>r.stop(e))}_restart(e){this._forEach(r=>r.restart(e))}_forEach(e){for(let r=0;r<this._oscillators.length;r++)e(this._oscillators[r],r)}get type(){return this._type}set type(e){this._type=e,this._forEach(r=>r.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){let r=-e/2,a=e/(this._oscillators.length-1);this._forEach((u,d)=>u.detune.value=r+a*d)}}get count(){return this._oscillators.length}set count(e){if(Gt(e,1),this._oscillators.length!==e){this._forEach(r=>r.dispose()),this._oscillators=[];for(let r=0;r<e;r++){let a=new tn({context:this.context,volume:-6-1.1*e,type:this._type,phase:this._phase+r/e*360,partialCount:this._partialCount,onstop:r===0?()=>this.onstop(this):Ie});this.type==="custom"&&(a.partials=this._partials),this.frequency.connect(a.frequency),this.detune.connect(a.detune),a.detune.overridden=!1,a.connect(this.output),this._oscillators[r]=a}this.spread=this._spread,this.state==="started"&&this._forEach(r=>r.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((r,a)=>r.phase=this._phase+a/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(r=>r.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(r=>r.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(r=>r.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return nt(this,void 0,void 0,function*(){return Ri(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Ar extends _t{constructor(){super(S(Ar.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ut({context:this.context,value:2});let e=S(Ar.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Fi({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new tn({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),ue(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(_t.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return nt(this,void 0,void 0,function*(){return Ri(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}let Xm={am:Ir,fat:Mr,fm:Ni,oscillator:tn,pulse:Fi,pwm:Ar};class bs extends _t{constructor(){super(S(bs.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";let e=S(bs.getDefaults(),arguments,["frequency","type"]);this.frequency=new le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new le({context:this.context,units:"cents",value:e.detune}),ue(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(tn.getDefaults(),Ni.getDefaults(),Ir.getDefaults(),Mr.getDefaults(),Fi.getDefaults(),Ar.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(r=>this._sourceType===r)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;let r=Xm[e],a=this.now();if(this._oscillator){let u=this._oscillator;u.stop(a),this.context.setTimeout(()=>u.dispose(),this.blockTime)}this._oscillator=new r({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(a)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let r="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(r=this._oscillator.type),e==="fm"?this.type="fm"+r:e==="am"?this.type="am"+r:e==="fat"?this.type="fat"+r:e==="oscillator"?this.type=r:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,r){return e instanceof Xm[r]}get baseType(){return this._oscillator.baseType}set baseType(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||e==="pulse"||e==="pwm"||(this._oscillator.baseType=e)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(e){this._getOscType(this._oscillator,"fat")&&Cn(e)&&(this._oscillator.count=e)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(e){this._getOscType(this._oscillator,"fat")&&Cn(e)&&(this._oscillator.spread=e)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&ss(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(e=1024){return nt(this,void 0,void 0,function*(){return Ri(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Pi extends le{constructor(){super(Object.assign(S(Pi.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new ae({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Tn(this._constantSource,this._sum)}static getDefaults(){return Object.assign(le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Ds extends In{constructor(){super(Object.assign(S(Ds.getDefaults(),arguments,["min","max"]))),this.name="Scale";let e=S(Ds.getDefaults(),arguments,["min","max"]);this._mult=this.input=new ut({context:this.context,value:e.max-e.min}),this._add=this.output=new Pi({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(In.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Mc extends In{constructor(){super(Object.assign(S(Mc.getDefaults(),arguments))),this.name="Zero",this._gain=new ae({context:this.context}),this.output=this._gain,this.input=void 0,ln(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),Sh(this.context.getConstant(0),this._gain),this}}class nn extends H{constructor(){super(S(nn.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=fe.prototype._fromType,this._toType=fe.prototype._toType,this._is=fe.prototype._is,this._clampValue=fe.prototype._clampValue;let e=S(nn.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new tn(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new ae({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new le({context:this.context,units:"audioRange",value:0}),this._zeros=new Mc({context:this.context}),this._a2g=new Ic({context:this.context}),this._scaler=this.output=new Ds({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),ue(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(tn.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){let r=this.min,a=this.max;this._units=e,this.min=r,this.max=a}get state(){return this._oscillator.state}connect(e,r,a){return(e instanceof fe||e instanceof le)&&(this.convert=e.convert,this.units=e.units),Xo(this,e,r,a),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function Km(l,e=1/0){let r=new WeakMap;return function(a,u){Reflect.defineProperty(a,u,{configurable:!0,enumerable:!0,get:function(){return r.get(this)},set:function(d){Gt(d,l,e),r.set(this,d)}})}}function Hs(l,e=1/0){let r=new WeakMap;return function(a,u){Reflect.defineProperty(a,u,{configurable:!0,enumerable:!0,get:function(){return r.get(this)},set:function(d){Gt(this.toSeconds(d),l,e),r.set(this,d)}})}}class Li extends _t{constructor(){super(S(Li.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;let e=S(Li.getDefaults(),arguments,["url","onload"]);this._buffer=new Le({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(_t.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ie,onerror:Ie,playbackRate:1,reverse:!1})}load(e){return nt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Ie){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size!==0||this._synced||this._state.getValueAtTime(this.now())!=="started"||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,r,a){return super.start(e,r,a),this}_start(e,r,a){r=this._loop?qn(r,this._loopStart):qn(r,0);let u=this.toSeconds(r),d=a;a=qn(a,Math.max(this._buffer.duration-u,0));let p=this.toSeconds(a);p/=this._playbackRate,e=this.toSeconds(e);let g=new qs({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(e+p),this._state.setStateAtTime("stopped",e+p,{implicitEnd:!0})),this._activeSources.add(g),this._loop&&pn(d)?g.start(e,u):g.start(e,u,p-this.toSeconds(this.fadeOut))}_stop(e){let r=this.toSeconds(e);this._activeSources.forEach(a=>a.stop(r))}restart(e,r,a){return super.restart(e,r,a),this}_restart(e,r,a){var u;(u=[...this._activeSources].pop())===null||u===void 0||u.stop(e),this._start(e,r,a)}seek(e,r){let a=this.toSeconds(r);if(this._state.getValueAtTime(a)==="started"){let u=this.toSeconds(e);this._stop(a),this._start(a,u)}return this}setLoopPoints(e,r){return this.loopStart=e,this.loopEnd=r,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Gt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(r=>{r.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Gt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(r=>{r.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(r=>{r.loop=e}),e)){let r=this._state.getNextState("stopped",this.now());r&&this._state.cancel(r.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;let r=this.now(),a=this._state.getNextState("stopped",r);a&&a.implicitEnd&&(this._state.cancel(a.time),this._activeSources.forEach(u=>u.cancelStop())),this._activeSources.forEach(u=>{u.playbackRate.setValueAtTime(e,r)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}is([Hs(0)],Li.prototype,"fadeIn",void 0),is([Hs(0)],Li.prototype,"fadeOut",void 0);class Ac extends H{constructor(){super(S(Ac.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;let e=S(Ac.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new ws({context:this.context,volume:e.volume}),this.volume=this._volume.volume,ue(this,"volume"),this._buffers=new xr({urls:e.urls,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.mute=e.mute,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(_t.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:Ie,onerror:Ie,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._players.forEach(r=>{r.fadeIn=e})}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._players.forEach(r=>{r.fadeOut=e})}get state(){return Array.from(this._players).some(([e,r])=>r.state==="started")?"started":"stopped"}has(e){return this._buffers.has(e)}player(e){if(ce(this.has(e),`No Player with the name ${e} exists on this object`),!this._players.has(e)){let r=new Li({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(e)}).connect(this.output);this._players.set(e,r)}return this._players.get(e)}get loaded(){return this._buffers.loaded}add(e,r,a){return ce(!this._buffers.has(e),"A buffer with that name already exists on this object"),this._buffers.add(e,r,a),this}stopAll(e){return this._players.forEach(r=>r.stop(e)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(e=>e.dispose()),this._buffers.dispose(),this}}class Oc extends _t{constructor(){super(S(Oc.getDefaults(),arguments,["url","onload"])),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[];let e=S(Oc.getDefaults(),arguments,["url","onload"]);this.buffer=new Le({onload:e.onload,onerror:e.onerror,reverse:e.reverse,url:e.url}),this._clock=new Oi({context:this.context,callback:this._tick.bind(this),frequency:1/e.grainSize}),this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(_t.getDefaults(),{onload:Ie,onerror:Ie,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(e,r,a){r=qn(r,0),r=this.toSeconds(r),e=this.toSeconds(e);let u=1/this._clock.frequency.getValueAtTime(e);this._clock.start(e,r/u),a&&this.stop(e+this.toSeconds(a))}restart(e,r,a){return super.restart(e,r,a),this}_restart(e,r,a){this._stop(e),this._start(e,r,a)}_stop(e){this._clock.stop(e)}_onstop(e){this._activeSources.forEach(r=>{r.fadeOut=0,r.stop(e)}),this.onstop(this)}_tick(e){let r=this._clock.getTicksAtTime(e),a=r*this._grainSize;if(this.log("offset",a),!this.loop&&a>this.buffer.duration)return void this.stop(e);let u=a<this._overlap?0:this._overlap,d=new qs({context:this.context,url:this.buffer,fadeIn:u,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:wr(this.detune/100)}).connect(this.output);d.start(e,this._grainSize*r),d.stop(e+this._grainSize/this.playbackRate),this._activeSources.push(d),d.onended=()=>{let p=this._activeSources.indexOf(d);p!==-1&&this._activeSources.splice(p,1)}}get playbackRate(){return this._playbackRate}set playbackRate(e){Gt(e,.001),this._playbackRate=e,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(e){this.buffer.loaded&&Gt(this.toSeconds(e),0,this.buffer.duration),this._loopStart=this.toSeconds(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this.buffer.loaded&&Gt(this.toSeconds(e),0,this.buffer.duration),this._loopEnd=this.toSeconds(e)}get reverse(){return this.buffer.reverse}set reverse(e){this.buffer.reverse=e}get grainSize(){return this._grainSize}set grainSize(e){this._grainSize=this.toSeconds(e),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(e){let r=this.toSeconds(e);Gt(r,0),this._overlap=r}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(e=>e.dispose()),this}}class Jm extends In{constructor(){super(...arguments),this.name="Abs",this._abs=new $n({context:this.context,mapping:e=>Math.abs(e)<.001?0:Math.abs(e)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class eg extends In{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new $n({context:this.context,mapping:e=>2*Math.abs(e)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ih extends In{constructor(){super(...arguments),this.name="Negate",this._multiply=new ut({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class Vi extends le{constructor(){super(Object.assign(S(Vi.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Subtract",this._sum=new ae({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new Ih({context:this.context}),this.subtrahend=this._param,Tn(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class kc extends In{constructor(){super(Object.assign(S(kc.getDefaults(),arguments))),this.name="GreaterThanZero",this._thresh=this.output=new $n({context:this.context,length:127,mapping:e=>e<=0?0:1}),this._scale=this.input=new ut({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class Jo extends le{constructor(){super(Object.assign(S(Jo.getDefaults(),arguments,["value"]))),this.name="GreaterThan",this.override=!1;let e=S(Jo.getDefaults(),arguments,["value"]);this._subtract=this.input=new Vi({context:this.context,value:e.value}),this._gtz=this.output=new kc({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,ue(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class ea extends Ds{constructor(){super(Object.assign(S(ea.getDefaults(),arguments,["min","max","exponent"]))),this.name="ScaleExp";let e=S(ea.getDefaults(),arguments,["min","max","exponent"]);this.input=this._exp=new ki({context:this.context,value:e.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(Ds.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(e){this._exp.value=e}dispose(){return super.dispose(),this._exp.dispose(),this}}class dD extends le{constructor(){super(S(le.getDefaults(),arguments,["value","units"])),this.name="SyncedSignal",this.override=!1;let e=S(le.getDefaults(),arguments,["value","units"]);this._lastVal=e.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new Yo({context:this.context,offset:e.value,units:e.units}).start(0),this.setValueAtTime(e.value,0)}_onTick(e){let r=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==r&&(this._lastVal=r,this._constantSource.offset.setValueAtTime(r,e))}_anchorValue(e){let r=super.getValueAtTime(this.context.transport.seconds);this._lastVal=r,this._constantSource.offset.cancelAndHoldAtTime(e),this._constantSource.offset.setValueAtTime(r,e)}getValueAtTime(e){let r=new Et(this.context,e).toSeconds();return super.getValueAtTime(r)}setValueAtTime(e,r){let a=new Et(this.context,r).toSeconds();return super.setValueAtTime(e,a),this}linearRampToValueAtTime(e,r){let a=new Et(this.context,r).toSeconds();return super.linearRampToValueAtTime(e,a),this}exponentialRampToValueAtTime(e,r){let a=new Et(this.context,r).toSeconds();return super.exponentialRampToValueAtTime(e,a),this}setTargetAtTime(e,r,a){let u=new Et(this.context,r).toSeconds();return super.setTargetAtTime(e,u,a),this}cancelScheduledValues(e){let r=new Et(this.context,e).toSeconds();return super.cancelScheduledValues(r),this}setValueCurveAtTime(e,r,a,u){let d=new Et(this.context,r).toSeconds();return a=this.toSeconds(a),super.setValueCurveAtTime(e,d,a,u),this}cancelAndHoldAtTime(e){let r=new Et(this.context,e).toSeconds();return super.cancelAndHoldAtTime(r),this}setRampPoint(e){let r=new Et(this.context,e).toSeconds();return super.setRampPoint(r),this}exponentialRampTo(e,r,a){let u=new Et(this.context,a).toSeconds();return super.exponentialRampTo(e,r,u),this}linearRampTo(e,r,a){let u=new Et(this.context,a).toSeconds();return super.linearRampTo(e,r,u),this}targetRampTo(e,r,a){let u=new Et(this.context,a).toSeconds();return super.targetRampTo(e,r,u),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class Bt extends H{constructor(){super(S(Bt.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new le({context:this.context,value:0}),this.output=this._sig,this.input=void 0;let e=S(Bt.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(H.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,r){if(ss(e))return e;{let a;for(a in Rc)if(Rc[a][r]===e)return a;return e}}_setCurve(e,r,a){if(ss(a)&&Reflect.has(Rc,a)){let u=Rc[a];js(u)?e!=="_decayCurve"&&(this[e]=u[r]):this[e]=u}else{if(!Wt(a)||e==="_decayCurve")throw new Error("Envelope: invalid curve: "+a);this[e]=a}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,r=1){this.log("triggerAttack",e,r),e=this.toSeconds(e);let a=this.toSeconds(this.attack),u=this.toSeconds(this.decay),d=this.getValueAtTime(e);if(d>0&&(a=(1-d)/(1/a)),a<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(r,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(r,a,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(r,a,e);else{this._sig.cancelAndHoldAtTime(e);let p=this._attackCurve;for(let g=1;g<p.length;g++)if(p[g-1]<=d&&d<=p[g]){p=this._attackCurve.slice(g),p[0]=d;break}this._sig.setValueCurveAtTime(p,e,a,r)}if(u&&this.sustain<1){let p=r*this.sustain,g=e+a;this.log("decay",g),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(p,u+g):this._sig.exponentialApproachValueAtTime(p,g,u)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);let r=this.getValueAtTime(e);if(r>0){let a=this.toSeconds(this.release);a<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,a,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,a,e):(ce(Wt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,a,r))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,r,a=1){return r=this.toSeconds(r),this.triggerAttack(r,a),this.triggerRelease(r+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,r=0,a=0){return Xo(this,e,r,a),this}asArray(e=1024){return nt(this,void 0,void 0,function*(){let r=e/this.context.sampleRate,a=new yr(1,r,this.context.sampleRate),u=this.toSeconds(this.attack)+this.toSeconds(this.decay),d=u+this.toSeconds(this.release),p=.1*d,g=d+p,v=new this.constructor(Object.assign(this.get(),{attack:r*this.toSeconds(this.attack)/g,decay:r*this.toSeconds(this.decay)/g,release:r*this.toSeconds(this.release)/g,context:a}));return v._sig.toDestination(),v.triggerAttackRelease(r*(u+p)/g,0),(yield a.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}is([Hs(0)],Bt.prototype,"attack",void 0),is([Hs(0)],Bt.prototype,"decay",void 0),is([Km(0,1)],Bt.prototype,"sustain",void 0),is([Hs(0)],Bt.prototype,"release",void 0);let Rc=(()=>{let e,r,a=[];for(e=0;e<128;e++)a[e]=Math.sin(e/127*(Math.PI/2));let u=[];for(e=0;e<127;e++){r=e/127;let w=Math.sin(r*(2*Math.PI)*6.4-Math.PI/2)+1;u[e]=w/10+.83*r}u[127]=1;let d=[];for(e=0;e<128;e++)d[e]=Math.ceil(e/127*5)/5;let p=[];for(e=0;e<128;e++)r=e/127,p[e]=.5*(1-Math.cos(Math.PI*r));let g=[];for(e=0;e<128;e++){r=e/127;let w=4*Math.pow(r,3)+.2,b=Math.cos(w*Math.PI*2*r);g[e]=Math.abs(b*(1-r))}function v(w){let b=new Array(w.length);for(let C=0;C<w.length;C++)b[C]=1-w[C];return b}return{bounce:{In:v(g),Out:g},cosine:{In:a,Out:(y=a,y.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:u,Out:v(u)},sine:{In:p,Out:v(p)},step:{In:d,Out:v(d)}};var y})();class Mn extends H{constructor(){super(S(Mn.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=r=>this._original_triggerRelease(r);let e=S(Mn.getDefaults(),arguments);this._volume=this.output=new ws({context:this.context,volume:e.volume}),this.volume=this._volume.volume,ue(this,"volume")}static getDefaults(){return Object.assign(H.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,r){let a=this["_original_"+e]=this[e];this[e]=(...u)=>{let d=u[r],p=this.context.transport.schedule(g=>{u[r]=g,a.apply(this,u)},d);this._scheduledEvents.push(p)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,r,a,u){let d=this.toSeconds(a),p=this.toSeconds(r);return this.triggerAttack(e,d,u),this.triggerRelease(d+p),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class qt extends Mn{constructor(){super(S(qt.getDefaults(),arguments));let e=S(qt.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Mn.getDefaults(),{detune:0,onsilence:Ie,portamento:0})}triggerAttack(e,r,a=1){this.log("triggerAttack",e,r,a);let u=this.toSeconds(r);return this._triggerEnvelopeAttack(u,a),this.setNote(e,u),this}triggerRelease(e){this.log("triggerRelease",e);let r=this.toSeconds(e);return this._triggerEnvelopeRelease(r),this}setNote(e,r){let a=this.toSeconds(r),u=e instanceof un?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(a)>.05){let d=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(u,d,a)}else this.frequency.setValueAtTime(u,a);return this}}is([Hs(0)],qt.prototype,"portamento",void 0);class Or extends Bt{constructor(){super(S(Or.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ae({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class zs extends qt{constructor(){super(S(zs.getDefaults(),arguments)),this.name="Synth";let e=S(zs.getDefaults(),arguments);this.oscillator=new bs(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Or(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),ue(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(qt.getDefaults(),{envelope:Object.assign(Zt(Bt.getDefaults(),Object.keys(H.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Zt(bs.getDefaults(),[...Object.keys(_t.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,r){if(this.envelope.triggerAttack(e,r),this.oscillator.start(e),this.envelope.sustain===0){let a=this.toSeconds(this.envelope.attack),u=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+a+u)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class kr extends qt{constructor(){super(S(kr.getDefaults(),arguments)),this.name="ModulationSynth";let e=S(kr.getDefaults(),arguments);this._carrier=new zs({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new zs({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new le({context:this.context,units:"frequency"}),this.detune=new le({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new ut({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new ae({context:this.context,gain:0}),ue(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(qt.getDefaults(),{harmonicity:3,oscillator:Object.assign(Zt(bs.getDefaults(),[...Object.keys(_t.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(Zt(Bt.getDefaults(),Object.keys(H.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(Zt(bs.getDefaults(),[...Object.keys(_t.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(Zt(Bt.getDefaults(),Object.keys(H.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,r){this._carrier._triggerEnvelopeAttack(e,r),this._modulator._triggerEnvelopeAttack(e,r)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class Mh extends kr{constructor(){super(S(Mh.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new Ic({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class Rr extends H{constructor(){super(S(Rr.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";let e=S(Rr.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new fe({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new fe({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new fe({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new fe({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(H.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){ce(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){let r=new Float32Array(e);for(let p=0;p<e;p++){let g=19980*Math.pow(p/e,2)+20;r[p]=g}let a=new Float32Array(e),u=new Float32Array(e),d=this.context.createBiquadFilter();return d.type=this.type,d.Q.value=this.Q.value,d.frequency.value=this.frequency.value,d.gain.value=this.gain.value,d.getFrequencyResponse(r,a,u),a}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class gn extends H{constructor(){super(S(gn.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new ae({context:this.context}),this.output=new ae({context:this.context}),this._filters=[];let e=S(gn.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new le({context:this.context,units:"positive",value:e.Q}),this.frequency=new le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new le({context:this.context,units:"cents",value:e.detune}),this.gain=new le({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,ue(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(H.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){ce(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(r=>r.type=e)}get rolloff(){return this._rolloff}set rolloff(e){let r=Cn(e)?e:parseInt(e,10),a=[-12,-24,-48,-96],u=a.indexOf(r);ce(u!==-1,`rolloff can only be ${a.join(", ")}`),u+=1,this._rolloff=r,this.input.disconnect(),this._filters.forEach(d=>d.disconnect()),this._filters=new Array(u);for(let d=0;d<u;d++){let p=new Rr({context:this.context});p.type=this._type,this.frequency.connect(p.frequency),this.detune.connect(p.detune),this.Q.connect(p.Q),this.gain.connect(p.gain),this._filters[d]=p}this._internalChannels=this._filters,Tn(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){let r=new Rr({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),a=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{r.getFrequencyResponse(e).forEach((u,d)=>a[d]*=u)}),r.dispose(),a}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),Go(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Nr extends Bt{constructor(){super(S(Nr.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";let e=S(Nr.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new ki({context:this.context,value:e.exponent}),this._scale=this.output=new Ds({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Bt.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){let r=this.toFrequency(e);Gt(r,0),this._baseFrequency=r,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class ui extends qt{constructor(){super(S(ui.getDefaults(),arguments)),this.name="MonoSynth";let e=S(ui.getDefaults(),arguments);this.oscillator=new bs(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new gn(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new Nr(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new Or(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),ue(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(qt.getDefaults(),{envelope:Object.assign(Zt(Bt.getDefaults(),Object.keys(H.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(Zt(gn.getDefaults(),Object.keys(H.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(Zt(Nr.getDefaults(),Object.keys(H.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(Zt(bs.getDefaults(),Object.keys(_t.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,r=1){if(this.envelope.triggerAttack(e,r),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){let a=this.toSeconds(this.envelope.attack),u=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+a+u)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Nc extends qt{constructor(){super(S(Nc.getDefaults(),arguments)),this.name="DuoSynth";let e=S(Nc.getDefaults(),arguments);this.voice0=new ui(Object.assign(e.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new ui(Object.assign(e.voice1,{context:this.context})),this.harmonicity=new ut({context:this.context,units:"positive",value:e.harmonicity}),this._vibrato=new nn({frequency:e.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new ae({context:this.context,units:"normalRange",gain:e.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new le({context:this.context,units:"frequency",value:440}),this.detune=new le({context:this.context,units:"cents",value:e.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),ue(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(e){return e=this.toSeconds(e),this.voice0.envelope.getValueAtTime(e)+this.voice1.envelope.getValueAtTime(e)}static getDefaults(){return Bn(qt.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:Bn(Zt(ui.getDefaults(),Object.keys(qt.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:Bn(Zt(ui.getDefaults(),Object.keys(qt.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(e,r){this.voice0._triggerEnvelopeAttack(e,r),this.voice1._triggerEnvelopeAttack(e,r)}_triggerEnvelopeRelease(e){return this.voice0._triggerEnvelopeRelease(e),this.voice1._triggerEnvelopeRelease(e),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class Fc extends kr{constructor(){super(S(Fc.getDefaults(),arguments)),this.name="FMSynth";let e=S(Fc.getDefaults(),arguments);this.modulationIndex=new ut({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(kr.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}let tg=[1,1.483,1.932,2.546,2.63,3.897];class Pc extends qt{constructor(){super(S(Pc.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];let e=S(Pc.getDefaults(),arguments);this.detune=new le({context:this.context,units:"cents",value:e.detune}),this.frequency=new le({context:this.context,units:"frequency"}),this._amplitude=new ae({context:this.context,gain:0}).connect(this.output),this._highpass=new gn({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let r=0;r<tg.length;r++){let a=new Ni({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:r===0?()=>this.onsilence(this):Ie,type:"square"});a.connect(this._highpass),this._oscillators[r]=a;let u=new ut({context:this.context,value:tg[r]});this._freqMultipliers[r]=u,this.frequency.chain(u,a.frequency),this.detune.connect(a.detune)}this._filterFreqScaler=new Ds({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new Bt({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return Bn(qt.getDefaults(),{envelope:Object.assign(Zt(Bt.getDefaults(),Object.keys(H.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e,r=1){return this.envelope.triggerAttack(e,r),this._oscillators.forEach(a=>a.start(e)),this.envelope.sustain===0&&this._oscillators.forEach(a=>{a.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(r=>r.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(r=>r.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(r=>r.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class Fr extends zs{constructor(){super(S(Fr.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;let e=S(Fr.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,ue(this,["oscillator","envelope"])}static getDefaults(){return Bn(qt.getDefaults(),zs.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,r){let a=this.toSeconds(r),u=this.toFrequency(e instanceof un?e.toFrequency():e),d=u*this.octaves;return this.oscillator.frequency.setValueAtTime(d,a),this.oscillator.frequency.exponentialRampToValueAtTime(u,a+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}is([Km(0)],Fr.prototype,"octaves",void 0),is([Hs(0)],Fr.prototype,"pitchDecay",void 0);class Lc extends Mn{constructor(){super(S(Lc.getDefaults(),arguments)),this.name="NoiseSynth";let e=S(Lc.getDefaults(),arguments);this.noise=new $s(Object.assign({context:this.context},e.noise)),this.envelope=new Or(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Mn.getDefaults(),{envelope:Object.assign(Zt(Bt.getDefaults(),Object.keys(H.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(Zt($s.getDefaults(),Object.keys(_t.getDefaults())),{type:"white"})})}triggerAttack(e,r=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,r),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,r,a=1){return r=this.toSeconds(r),e=this.toSeconds(e),this.triggerAttack(r,a),this.triggerRelease(r+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}let Ah=new Set;function Oh(l){Ah.add(l)}function ng(l,e){let r=`registerProcessor("${l}", ${e})`;Ah.add(r)}class kh extends H{constructor(e){super(e),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=Ie;let r=URL.createObjectURL(new Blob([Array.from(Ah).join(`
`)],{type:"text/javascript"})),a=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(r).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(a,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}Oh(`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`),Oh(`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`),Oh(`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`);let sg="feedback-comb-filter";ng(sg,`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`);class Pr extends kh{constructor(){super(S(Pr.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";let e=S(Pr.getDefaults(),arguments,["delayTime","resonance"]);this.input=new ae({context:this.context}),this.output=new ae({context:this.context}),this.delayTime=new fe({context:this.context,value:e.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new fe({context:this.context,value:e.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),ue(this,["resonance","delayTime"])}_audioWorkletName(){return sg}static getDefaults(){return Object.assign(H.getDefaults(),{delayTime:.1,resonance:.5})}onReady(e){Tn(this.input,e,this.output);let r=e.parameters.get("delayTime");this.delayTime.setParam(r);let a=e.parameters.get("feedback");this.resonance.setParam(a)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class Lr extends H{constructor(){super(S(Lr.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";let e=S(Lr.getDefaults(),arguments,["frequency","type"]);this._frequency=e.frequency,this._type=e.type,this.input=new ae({context:this.context}),this.output=new ae({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(H.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){let e=this._filter,r=this.toFrequency(this._frequency),a=1/(2*Math.PI*r);if(this._type==="lowpass"){let u=1/(a*this.context.sampleRate),d=u-1;this._filter=this.context.createIIRFilter([u,0],[1,d])}else{let u=1/(a*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,u])}this.input.chain(this._filter,this.output),e&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(e),e.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(e){this._frequency=e,this._createFilter()}get type(){return this._type}set type(e){this._type=e,this._createFilter()}getFrequencyResponse(e=128){let r=new Float32Array(e);for(let d=0;d<e;d++){let p=19980*Math.pow(d/e,2)+20;r[d]=p}let a=new Float32Array(e),u=new Float32Array(e);return this._filter.getFrequencyResponse(r,a,u),a}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class Vr extends H{constructor(){super(S(Vr.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";let e=S(Vr.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new Pr({context:this.context,delayTime:e.delayTime,resonance:e.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new Lr({context:this.context,frequency:e.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(H.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(e){this._lowpass.frequency=e}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class Vc extends Mn{constructor(){super(S(Vc.getDefaults(),arguments)),this.name="PluckSynth";let e=S(Vc.getDefaults(),arguments);this._noise=new $s({context:this.context,type:"pink"}),this.attackNoise=e.attackNoise,this._lfcf=new Vr({context:this.context,dampening:e.dampening,resonance:e.resonance}),this.resonance=e.resonance,this.release=e.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return Bn(Mn.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(e){this._lfcf.dampening=e}triggerAttack(e,r){let a=this.toFrequency(e);r=this.toSeconds(r);let u=1/a;return this._lfcf.delayTime.setValueAtTime(u,r),this._noise.start(r),this._noise.stop(r+u*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(r),this._lfcf.resonance.setValueAtTime(this.resonance,r),this}triggerRelease(e){return this._lfcf.resonance.linearRampTo(0,this.release,e),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class jc extends Mn{constructor(){super(S(jc.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=u=>this.releaseAll(u);let e=S(jc.getDefaults(),arguments,["voice","options"]);ce(!Cn(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");let r=e.voice.getDefaults();this.options=Object.assign(r,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();let a=this._voices.indexOf(this._dummyVoice);this._voices.splice(a,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Mn.getDefaults(),{maxPolyphony:32,options:{},voice:zs})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);let r=this._activeVoices.findIndex(a=>a.voice===e);this._activeVoices.splice(r,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){let e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return ce(e instanceof qt,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}fr("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){let e=this._availableVoices.shift(),r=this._voices.indexOf(e);this._voices.splice(r,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,r,a){e.forEach(u=>{let d=new Cr(this.context,u).toMidi(),p=this._getNextAvailableVoice();p&&(p.triggerAttack(u,r,a),this._activeVoices.push({midi:d,voice:p,released:!1}),this.log("triggerAttack",u,r))})}_triggerRelease(e,r){e.forEach(a=>{let u=new Cr(this.context,a).toMidi(),d=this._activeVoices.find(({midi:p,released:g})=>p===u&&!g);d&&(d.voice.triggerRelease(r),d.released=!0,this.log("triggerRelease",a,r))})}_scheduleEvent(e,r,a,u){ce(!this.disposed,"Synth was already disposed"),a<=this.now()?e==="attack"?this._triggerAttack(r,a,u):this._triggerRelease(r,a):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,r,a,u)},a-this.now())}triggerAttack(e,r,a){Array.isArray(e)||(e=[e]);let u=this.toSeconds(r);return this._scheduleEvent("attack",e,u,a),this}triggerRelease(e,r){Array.isArray(e)||(e=[e]);let a=this.toSeconds(r);return this._scheduleEvent("release",e,a),this}triggerAttackRelease(e,r,a,u){let d=this.toSeconds(a);if(this.triggerAttack(e,d,u),Wt(r)){ce(Wt(e),"If the duration is an array, the notes must also be an array");for(let p=0;p<e.length;p++){let g=r[Math.min(p,r.length-1)],v=this.toSeconds(g);ce(v>0,"The duration must be greater than 0"),this.triggerRelease(e[p],d+v)}}else{let p=this.toSeconds(r);ce(p>0,"The duration must be greater than 0"),this.triggerRelease(e,d+p)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){let r=Zt(e,["onsilence","context"]);return this.options=Bn(this.options,r),this._voices.forEach(a=>a.set(r)),this._dummyVoice.set(r),this}get(){return this._dummyVoice.get()}releaseAll(e){let r=this.toSeconds(e);return this._activeVoices.forEach(({voice:a})=>{a.triggerRelease(r)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class jr extends Mn{constructor(){super(S(jr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;let e=S(jr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),r={};Object.keys(e.urls).forEach(a=>{let u=parseInt(a,10);if(ce(Wo(a)||Cn(u)&&isFinite(u),`url key is neither a note or midi pitch: ${a}`),Wo(a)){let d=new un(this.context,a).toMidi();r[d]=e.urls[a]}else Cn(u)&&isFinite(u)&&(r[u]=e.urls[u])}),this._buffers=new xr({urls:r,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Mn.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ie,onerror:Ie,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,r,a=1){return this.log("triggerAttack",e,r,a),Array.isArray(e)||(e=[e]),e.forEach(u=>{let d=Zm(new un(this.context,u).toFrequency()),p=Math.round(d),g=d-p,v=this._findClosest(p),y=p-v,w=this._buffers.get(y),b=wr(v+g),C=new qs({url:w,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:b}).connect(this.output);C.start(r,0,w.duration/b,a),Wt(this._activeSources.get(p))||this._activeSources.set(p,[]),this._activeSources.get(p).push(C),C.onended=()=>{if(this._activeSources&&this._activeSources.has(p)){let D=this._activeSources.get(p),T=D.indexOf(C);T!==-1&&D.splice(T,1)}}}),this}triggerRelease(e,r){return this.log("triggerRelease",e,r),Array.isArray(e)||(e=[e]),e.forEach(a=>{let u=new un(this.context,a).toMidi();if(this._activeSources.has(u)&&this._activeSources.get(u).length){let d=this._activeSources.get(u);r=this.toSeconds(r),d.forEach(p=>{p.stop(r)}),this._activeSources.set(u,[])}}),this}releaseAll(e){let r=this.toSeconds(e);return this._activeSources.forEach(a=>{for(;a.length;)a.shift().stop(r)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,r,a,u=1){let d=this.toSeconds(a);return this.triggerAttack(e,d,u),Wt(r)?(ce(Wt(e),"notes must be an array when duration is array"),e.forEach((p,g)=>{let v=r[Math.min(g,r.length-1)];this.triggerRelease(p,d+this.toSeconds(v))})):this.triggerRelease(e,d+this.toSeconds(r)),this}add(e,r,a){if(ce(Wo(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Wo(e)){let u=new un(this.context,e).toMidi();this._buffers.add(u,r,a)}else this._buffers.add(e,r,a);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(r=>r.dispose())}),this._activeSources.clear(),this}}is([Hs(0)],jr.prototype,"attack",void 0),is([Hs(0)],jr.prototype,"release",void 0);class os extends jt{constructor(){super(S(os.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new br("stopped"),this._startOffset=0;let e=S(os.getDefaults(),arguments,["callback","value"]);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(jt.getDefaults(),{callback:Ie,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,r=>{let a;if(r.state==="started"){r.id!==-1&&this.context.transport.clear(r.id);let u=r.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||Cn(this._loop)&&this._loop>1){a=1/0,Cn(this._loop)&&(a=this._loop*this._getLoopDuration());let d=this._state.getAfter(u);d!==null&&(a=Math.min(a,d.time-u)),a!==1/0&&(a=new dt(this.context,a));let p=new dt(this.context,this._getLoopDuration());r.id=this.context.transport.scheduleRepeat(this._tick.bind(this),p,new dt(this.context,u),a)}else r.id=this.context.transport.schedule(this._tick.bind(this),new dt(this.context,u))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){let r=this.toTicks(e);return this._state.getValueAtTime(r)==="stopped"&&(this._state.add({id:-1,state:"started",time:r}),this._rescheduleEvents(r)),this}stop(e){this.cancel(e);let r=this.toTicks(e);if(this._state.getValueAtTime(r)==="started"){this._state.setStateAtTime("stopped",r,{id:-1});let a=this._state.getBefore(r),u=r;a!==null&&(u=a.time),this._rescheduleEvents(u)}return this}cancel(e){e=qn(e,-1/0);let r=this.toTicks(e);return this._state.forEachFrom(r,a=>{this.context.transport.clear(a.id)}),this._state.cancel(r),this}_tick(e){let r=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(r)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let a=.02;vh(this.humanize)||(a=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*a}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new dt(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new dt(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){let e=this.context.transport.ticks,r=this._state.get(e);if(r!==null&&r.state==="started"){let a=this._getLoopDuration();return(e-r.time)%a/a}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Br extends jt{constructor(){super(S(Br.getDefaults(),arguments,["callback","interval"])),this.name="Loop";let e=S(Br.getDefaults(),arguments,["callback","interval"]);this._event=new os({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability,humanize:e.humanize}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(jt.getDefaults(),{interval:"4n",callback:Ie,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(e){this._event.loop=e===1/0||e}dispose(){return super.dispose(),this._event.dispose(),this}}class qr extends os{constructor(){super(S(qr.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new br("stopped"),this._events=new Set;let e=S(qr.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,e.events.forEach(r=>{Wt(r)?this.add(r[0],r[1]):this.add(r)})}static getDefaults(){return Object.assign(os.getDefaults(),{events:[]})}start(e,r){let a=this.toTicks(e);if(this._state.getValueAtTime(a)!=="started"){r=qn(r,this._loop?this._loopStart:0),r=this._loop?qn(r,this._loopStart):qn(r,0);let u=this.toTicks(r);this._state.add({id:-1,offset:u,state:"started",time:a}),this._forEach(d=>{this._startNote(d,a,u)})}return this}_startNote(e,r,a){r-=a,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<a&&(r+=this._getLoopDuration()),e.start(new dt(this.context,r))):e.startOffset<this._loopStart&&e.startOffset>=a&&(e.loop=!1,e.start(new dt(this.context,r))):e.startOffset>=a&&e.start(new dt(this.context,r))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(r=>{r.startOffset+=this._startOffset})}stop(e){let r=this.toTicks(e);return this._state.cancel(r),this._state.setStateAtTime("stopped",r),this._forEach(a=>{a.stop(e)}),this}at(e,r){let a=new Et(this.context,e).toTicks(),u=new dt(this.context,1).toSeconds(),d=this._events.values(),p=d.next();for(;!p.done;){let g=p.value;if(Math.abs(a-g.startOffset)<u)return we(r)&&(g.value=r),g;p=d.next()}return we(r)?(this.add(e,r),this.at(e)):null}add(e,r){e instanceof Object&&Reflect.has(e,"time")&&(e=(r=e).time);let a=this.toTicks(e),u;return r instanceof os?(u=r,u.callback=this._tick.bind(this)):u=new os({callback:this._tick.bind(this),context:this.context,value:r}),u.startOffset=a,u.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(u),this._restartEvent(u),this}_restartEvent(e){this._state.forEach(r=>{r.state==="started"?this._startNote(e,r.time,r.offset):e.stop(new dt(this.context,r.time))})}remove(e,r){return js(e)&&e.hasOwnProperty("time")&&(e=(r=e).time),e=this.toTicks(e),this._events.forEach(a=>{a.startOffset===e&&(pn(r)||we(r)&&a.value===r)&&(this._events.delete(a),a.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(r=>r.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(r=>{r instanceof qr?r._forEach(e):e(r)}),this}_setAll(e,r){this._forEach(a=>{a[e]=r})}_tick(e,r){this.mute||this.callback(e,r)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):e.state==="stopped"&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(r=>{r.loopStart=this.loopStart,r.loopEnd=this.loopEnd,r.loop=e,this._testLoopBoundries(r)})}get loopEnd(){return new dt(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(r=>{r.loopEnd=e,this._testLoopBoundries(r)})}get loopStart(){return new dt(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(r=>{r.loopStart=this.loopStart,this._testLoopBoundries(r)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*fD(l){let e=0;for(;e<l;)e=Ai(e,0,l-1),yield e,e++}function*pD(l){let e=l-1;for(;e>=0;)e=Ai(e,0,l-1),yield e,e--}function*ta(l,e){for(;;)yield*as(e(l))}function*ig(l,e){let r=e?0:l-1;for(;;)r=Ai(r,0,l-1),yield r,e?(r++,r>=l-1&&(e=!1)):(r--,r<=0&&(e=!0))}function*mD(l){let e=0,r=0;for(;e<l;)e=Ai(e,0,l-1),yield e,r++,e+=r%2?2:-1}function*gD(l){let e=l-1,r=0;for(;e>=0;)e=Ai(e,0,l-1),yield e,r++,e+=r%2?-2:1}function*vD(l){let e=[];for(let r=0;r<l;r++)e.push(r);for(;e.length>0;)yield Ai(e.splice(Math.floor(e.length*Math.random()),1)[0],0,l-1)}function*rg(l,e="up",r=0){switch(ce(l>=1,"The number of values must be at least one"),e){case"up":yield*as(ta(l,fD));case"down":yield*as(ta(l,pD));case"upDown":yield*as(ig(l,!0));case"downUp":yield*as(ig(l,!1));case"alternateUp":yield*as(ta(l,mD));case"alternateDown":yield*as(ta(l,gD));case"random":yield*as(function*(a){for(;;)yield Math.floor(Math.random()*a)}(l));case"randomOnce":yield*as(ta(l,vD));case"randomWalk":yield*as(function*(a){let u=Math.floor(Math.random()*a);for(;;)u===0?u++:u===a-1||Math.random()<.5?u--:u++,yield u}(l))}}class Bc extends Br{constructor(){super(S(Bc.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";let e=S(Bc.getDefaults(),arguments,["callback","values","pattern"]);this.callback=e.callback,this._values=e.values,this._pattern=rg(e.values.length,e.pattern),this._type=e.pattern}static getDefaults(){return Object.assign(Br.getDefaults(),{pattern:"up",values:[],callback:Ie})}_tick(e){let r=this._pattern.next();this._index=r.value,this._value=this._values[r.value],this.callback(e,this._value)}get values(){return this._values}set values(e){this._values=e,this.pattern=this._type}get value(){return this._value}get index(){return this._index}get pattern(){return this._type}set pattern(e){this._type=e,this._pattern=rg(this._values.length,this._type)}}class qc extends os{constructor(){super(S(qc.getDefaults(),arguments,["callback","events","subdivision"])),this.name="Sequence",this._part=new qr({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];let e=S(qc.getDefaults(),arguments,["callback","events","subdivision"]);this._subdivision=this.toTicks(e.subdivision),this.events=e.events,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.playbackRate=e.playbackRate,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate}static getDefaults(){return Object.assign(Zt(os.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(e,r){r===null||this.mute||this.callback(e,r)}get events(){return this._events}set events(e){this.clear(),this._eventsArray=e,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(e,r){return this._part.start(e,r&&this._indexTime(r)),this}stop(e){return this._part.stop(e),this}get subdivision(){return new dt(this.context,this._subdivision).toSeconds()}_createSequence(e){return new Proxy(e,{get:(r,a)=>r[a],set:(r,a,u)=>(ss(a)&&isFinite(parseInt(a,10))&&Wt(u)?r[a]=this._createSequence(u):r[a]=u,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(e,r,a){e.forEach((u,d)=>{let p=d*r+a;if(Wt(u))this._rescheduleSequence(u,r/u.length,p);else{let g=new dt(this.context,p,"i").toSeconds();this._part.add(g,u)}})}_indexTime(e){return new dt(this.context,e*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(e){this._part.loop=e}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this._part.loopStart=this._indexTime(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this._part.loopEnd=e===0?this._indexTime(this._eventsArray.length):this._indexTime(e)}get startOffset(){return this._part.startOffset}set startOffset(e){this._part.startOffset=e}get playbackRate(){return this._part.playbackRate}set playbackRate(e){this._part.playbackRate=e}get probability(){return this._part.probability}set probability(e){this._part.probability=e}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(e){this._part.humanize=e}get length(){return this._part.length}}class ji extends H{constructor(){super(Object.assign(S(ji.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new eg({context:this.context}),this.a=new ae({context:this.context,gain:0}),this.b=new ae({context:this.context,gain:0}),this.output=new ae({context:this.context}),this._internalChannels=[this.a,this.b];let e=S(ji.getDefaults(),arguments,["fade"]);this.fade=new le({context:this.context,units:"normalRange",value:e.fade}),ue(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",ln(this._split,this.a.gain,0),ln(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(H.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class kt extends H{constructor(e){super(e),this.name="Effect",this._dryWet=new ji({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new ae({context:this.context}),this.effectReturn=new ae({context:this.context}),this.input=new ae({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],ue(this,"wet")}static getDefaults(){return Object.assign(H.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class $c extends kt{constructor(e){super(e),this.name="LFOEffect",this._lfo=new nn({context:this.context,frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=e.type,ue(this,["frequency","depth"])}static getDefaults(){return Object.assign(kt.getDefaults(),{frequency:1,type:"sine",depth:1})}start(e){return this._lfo.start(e),this}stop(e){return this._lfo.stop(e),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Uc extends $c{constructor(){super(S(Uc.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";let e=S(Uc.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new gn(Object.assign(e.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency}static getDefaults(){return Object.assign($c.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(e){this._lfo.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._lfo.max=this._lfo.min*Math.pow(2,e)}dispose(){return super.dispose(),this.filter.dispose(),this}}class $r extends H{constructor(){super(Object.assign(S($r.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;let e=S($r.getDefaults(),arguments,["pan"]);this.pan=new fe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",ue(this,"pan")}static getDefaults(){return Object.assign(H.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class Hc extends $c{constructor(){super(S(Hc.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";let e=S(Hc.getDefaults(),arguments,["frequency"]);this._panner=new $r({context:this.context,channelCount:e.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign($c.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class Ur extends H{constructor(){super(S(Ur.getDefaults(),arguments,["smoothing"])),this.name="Follower";let e=S(Ur.getDefaults(),arguments,["smoothing"]);this._abs=this.input=new Jm({context:this.context}),this._lowpass=this.output=new Lr({context:this.context,frequency:1/this.toSeconds(e.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=e.smoothing}static getDefaults(){return Object.assign(H.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(e){this._smoothing=e,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class zc extends kt{constructor(){super(S(zc.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"])),this.name="AutoWah";let e=S(zc.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);this._follower=new Ur({context:this.context,smoothing:e.follower}),this._sweepRange=new ea({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this._inputBoost=new ae({context:this.context}),this._bandpass=new gn({context:this.context,rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new gn({context:this.context,type:"peaking"}),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,ue(this,["gain","Q"])}static getDefaults(){return Object.assign(kt.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(e){this._follower.smoothing=e}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._setSweepRange()}get sensitivity(){return Qo(1/this._inputBoost.gain.value)}set sensitivity(e){this._inputBoost.gain.value=1/_r(e)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}let og="bit-crusher";ng(og,`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`);class Wc extends kt{constructor(){super(S(Wc.getDefaults(),arguments,["bits"])),this.name="BitCrusher";let e=S(Wc.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new Gc({context:this.context,bits:e.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(kt.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class Gc extends kh{constructor(){super(S(Gc.getDefaults(),arguments)),this.name="BitCrusherWorklet";let e=S(Gc.getDefaults(),arguments);this.input=new ae({context:this.context}),this.output=new ae({context:this.context}),this.bits=new fe({context:this.context,value:e.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(kh.getDefaults(),{bits:12})}_audioWorkletName(){return og}onReady(e){Tn(this.input,e,this.output);let r=e.parameters.get("bits");this.bits.setParam(r)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class Zc extends kt{constructor(){super(S(Zc.getDefaults(),arguments,["order"])),this.name="Chebyshev";let e=S(Zc.getDefaults(),arguments,["order"]);this._shaper=new $n({context:this.context,length:4096}),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample}static getDefaults(){return Object.assign(kt.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(e,r,a){return a.has(r)||(r===0?a.set(r,0):r===1?a.set(r,e):a.set(r,2*e*this._getCoefficient(e,r-1,a)-this._getCoefficient(e,r-2,a))),a.get(r)}get order(){return this._order}set order(e){ce(Number.isInteger(e),"'order' must be an integer"),this._order=e,this._shaper.setMap(r=>this._getCoefficient(r,e,new Map))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class li extends H{constructor(){super(S(li.getDefaults(),arguments,["channels"])),this.name="Split";let e=S(li.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(H.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Ws extends H{constructor(){super(S(Ws.getDefaults(),arguments,["channels"])),this.name="Merge";let e=S(Ws.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(H.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class xs extends H{constructor(e){super(e),this.name="StereoEffect",this.input=new ae({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new ji({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new li({context:this.context,channels:2}),this._merge=new Ws({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),ue(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),Tn(...e),ln(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),Tn(...e),ln(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(H.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Rh extends xs{constructor(e){super(e),this.feedback=new le({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new ae({context:this.context}),this._feedbackR=new ae({context:this.context}),this._feedbackSplit=new li({context:this.context,channels:2}),this._feedbackMerge=new Ws({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),ue(this,["feedback"])}static getDefaults(){return Object.assign(xs.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Qc extends Rh{constructor(){super(S(Qc.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";let e=S(Qc.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new nn({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new nn({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new mn({context:this.context}),this._delayNodeR=new mn({context:this.context}),this.frequency=this._lfoL.frequency,ue(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(Rh.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;let r=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-r,0),this._lfoL.max=this._delayTime+r,this._lfoR.min=Math.max(this._delayTime-r,0),this._lfoR.max=this._delayTime+r}get delayTime(){return 1e3*this._delayTime}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Yc extends kt{constructor(){super(S(Yc.getDefaults(),arguments,["distortion"])),this.name="Distortion";let e=S(Yc.getDefaults(),arguments,["distortion"]);this._shaper=new $n({context:this.context,length:4096}),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample}static getDefaults(){return Object.assign(kt.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(e){this._distortion=e;let r=100*e,a=Math.PI/180;this._shaper.setMap(u=>Math.abs(u)<.001?0:(3+r)*u*20*a/(Math.PI+r*Math.abs(u)))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Xc extends kt{constructor(e){super(e),this.name="FeedbackEffect",this._feedbackGain=new ae({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,ue(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(kt.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Kc extends Xc{constructor(){super(S(Kc.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";let e=S(Kc.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new mn({context:this.context,delayTime:e.delayTime,maxDelay:e.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),ue(this,"delayTime")}static getDefaults(){return Object.assign(Xc.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class yD extends H{constructor(e){super(e),this.name="PhaseShiftAllpass",this.input=new ae({context:this.context}),this.output=new ae({context:this.context}),this.offset90=new ae({context:this.context}),this._bank0=this._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),this._bank1=this._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),Tn(this.input,...this._bank0,this._oneSampleDelay,this.output),Tn(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(e){return e.map(r=>{let a=[[r*r,0,-1],[1,0,-r*r]];return this.context.createIIRFilter(a[0],a[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(e=>e.disconnect()),this._bank1.forEach(e=>e.disconnect()),this._oneSampleDelay.disconnect(),this}}class Jc extends kt{constructor(){super(S(Jc.getDefaults(),arguments,["frequency"])),this.name="FrequencyShifter";let e=S(Jc.getDefaults(),arguments,["frequency"]);this.frequency=new le({context:this.context,units:"frequency",value:e.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new Tr({context:this.context,type:"sine"}),this._cosine=new tn({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new ut({context:this.context}),this._cosineMultiply=new ut({context:this.context}),this._negate=new Ih({context:this.context}),this._add=new Pi({context:this.context}),this._phaseShifter=new yD({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);let r=this.immediate();this._sine.start(r),this._cosine.start(r)}static getDefaults(){return Object.assign(kt.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}let ag=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],cg=[225,556,441,341];class eu extends xs{constructor(){super(S(eu.getDefaults(),arguments,["roomSize","dampening"])),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];let e=S(eu.getDefaults(),arguments,["roomSize","dampening"]);this.roomSize=new le({context:this.context,value:e.roomSize,units:"normalRange"}),this._allpassFiltersL=cg.map(r=>{let a=this.context.createBiquadFilter();return a.type="allpass",a.frequency.value=r,a}),this._allpassFiltersR=cg.map(r=>{let a=this.context.createBiquadFilter();return a.type="allpass",a.frequency.value=r,a}),this._combFilters=ag.map((r,a)=>{let u=new Vr({context:this.context,dampening:e.dampening,delayTime:r});return a<ag.length/2?this.connectEffectLeft(u,...this._allpassFiltersL):this.connectEffectRight(u,...this._allpassFiltersR),this.roomSize.connect(u.resonance),u}),ue(this,["roomSize"])}static getDefaults(){return Object.assign(xs.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(e){this._combFilters.forEach(r=>r.dampening=e)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(e=>e.disconnect()),this._allpassFiltersR.forEach(e=>e.disconnect()),this._combFilters.forEach(e=>e.dispose()),this.roomSize.dispose(),this}}let ug=[.06748,.06404,.08212,.09004],_D=[.773,.802,.753,.733],wD=[347,113,37];class tu extends xs{constructor(){super(S(tu.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];let e=S(tu.getDefaults(),arguments,["roomSize"]);this.roomSize=new le({context:this.context,value:e.roomSize,units:"normalRange"}),this._scaleRoomSize=new Ds({context:this.context,min:-.733,max:.197}),this._allpassFilters=wD.map(r=>{let a=this.context.createBiquadFilter();return a.type="allpass",a.frequency.value=r,a}),this._feedbackCombFilters=ug.map((r,a)=>{let u=new Pr({context:this.context,delayTime:r});return this._scaleRoomSize.connect(u.resonance),u.resonance.value=_D[a],a<ug.length/2?this.connectEffectLeft(...this._allpassFilters,u):this.connectEffectRight(...this._allpassFilters,u),u}),this.roomSize.connect(this._scaleRoomSize),ue(this,["roomSize"])}static getDefaults(){return Object.assign(xs.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(e=>e.disconnect()),this._feedbackCombFilters.forEach(e=>e.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class lg extends Rh{constructor(e){super(e),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),ue(this,["feedback"])}}class nu extends lg{constructor(){super(S(nu.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";let e=S(nu.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new mn({context:this.context,maxDelay:e.maxDelay}),this._rightDelay=new mn({context:this.context,maxDelay:e.maxDelay}),this._rightPreDelay=new mn({context:this.context,maxDelay:e.maxDelay}),this.delayTime=new le({context:this.context,units:"time",value:e.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),ue(this,["delayTime"])}static getDefaults(){return Object.assign(lg.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class su extends Xc{constructor(){super(S(su.getDefaults(),arguments,["pitch"])),this.name="PitchShift";let e=S(su.getDefaults(),arguments,["pitch"]);this._frequency=new le({context:this.context}),this._delayA=new mn({maxDelay:1,context:this.context}),this._lfoA=new nn({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new mn({maxDelay:1,context:this.context}),this._lfoB=new nn({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new ji({context:this.context}),this._crossFadeLFO=new nn({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new mn({delayTime:e.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,ue(this,"delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);let r=this.now();this._lfoA.start(r),this._lfoB.start(r),this._crossFadeLFO.start(r),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(Xc.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(e){this._pitch=e;let r=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,r=wr(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,r=wr(e)-1),this._frequency.value=r*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(e){this._windowSize=this.toSeconds(e),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class iu extends xs{constructor(){super(S(iu.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";let e=S(iu.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new nn({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new nn({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this.Q=new le({context:this.context,value:e.Q,units:"positive"}),this._filtersL=this._makeFilters(e.stages,this._lfoL),this._filtersR=this._makeFilters(e.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),ue(this,["frequency","Q"])}static getDefaults(){return Object.assign(xs.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(e,r){let a=[];for(let u=0;u<e;u++){let d=this.context.createBiquadFilter();d.type="allpass",this.Q.connect(d.Q),r.connect(d.frequency),a.push(d)}return a}get octaves(){return this._octaves}set octaves(e){this._octaves=e;let r=this._baseFrequency*Math.pow(2,e);this._lfoL.max=r,this._lfoR.max=r}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(e=>e.disconnect()),this._filtersR.forEach(e=>e.disconnect()),this.frequency.dispose(),this}}class ru extends kt{constructor(){super(S(ru.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();let e=S(ru.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(kt.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){Gt(e=this.toSeconds(e),.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){Gt(e=this.toSeconds(e),0),this._preDelay=e,this.generate()}generate(){return nt(this,void 0,void 0,function*(){let e=this.ready,r=new yr(2,this._decay+this._preDelay,this.context.sampleRate),a=new $s({context:r}),u=new $s({context:r}),d=new Ws({context:r});a.connect(d,0,0),u.connect(d,0,1);let p=new ae({context:r}).toDestination();d.connect(p),a.start(0),u.start(0),p.gain.setValueAtTime(0,0),p.gain.setValueAtTime(1,this._preDelay),p.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);let g=r.render();return this.ready=g.then(Ie),yield e,this._convolver.buffer=(yield g).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class na extends H{constructor(){super(S(na.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new li({channels:2,context:this.context}),this._midAdd=new Pi({context:this.context}),this.mid=new ut({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new Vi({context:this.context}),this.side=new ut({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class sa extends H{constructor(){super(S(sa.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new ae({context:this.context}),this.side=new ae({context:this.context}),this._left=new Pi({context:this.context}),this._leftMult=new ut({context:this.context,value:Math.SQRT1_2}),this._right=new Vi({context:this.context}),this._rightMult=new ut({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new Ws({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class hg extends kt{constructor(e){super(e),this.name="MidSideEffect",this._midSideMerge=new sa({context:this.context}),this._midSideSplit=new na({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...e){this._midSend.chain(...e,this._midReturn)}connectEffectSide(...e){this._sideSend.chain(...e,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class ou extends hg{constructor(){super(S(ou.getDefaults(),arguments,["width"])),this.name="StereoWidener";let e=S(ou.getDefaults(),arguments,["width"]);this.width=new le({context:this.context,value:e.width,units:"normalRange"}),ue(this,["width"]),this._twoTimesWidthMid=new ut({context:this.context,value:2}),this._twoTimesWidthSide=new ut({context:this.context,value:2}),this._midMult=new ut({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new Vi({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),ln(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new ut({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(hg.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class au extends xs{constructor(){super(S(au.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";let e=S(au.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new nn({context:this.context,type:e.type,min:1,max:0}),this._lfoR=new nn({context:this.context,type:e.type,min:1,max:0}),this._amplitudeL=new ae({context:this.context}),this._amplitudeR=new ae({context:this.context}),this.frequency=new le({context:this.context,value:e.frequency,units:"frequency"}),this.depth=new le({context:this.context,value:e.depth,units:"normalRange"}),ue(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=e.spread}static getDefaults(){return Object.assign(xs.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class cu extends kt{constructor(){super(S(cu.getDefaults(),arguments,["frequency","depth"])),this.name="Vibrato";let e=S(cu.getDefaults(),arguments,["frequency","depth"]);this._delayNode=new mn({context:this.context,delayTime:0,maxDelay:e.maxDelay}),this._lfo=new nn({context:this.context,type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,ue(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(kt.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Hr extends H{constructor(){super(S(Hr.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];let e=S(Hr.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new ae({context:this.context}),this._split=new li({context:this.context,channels:e.channels}),this.input.connect(this._split),Gt(e.channels,1);for(let r=0;r<e.channels;r++)this._analysers[r]=this.context.createAnalyser(),this._split.connect(this._analysers[r],r,0);this.size=e.size,this.type=e.type,this.smoothing=e.smoothing}static getDefaults(){return Object.assign(H.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((e,r)=>{let a=this._buffers[r];this._type==="fft"?e.getFloatFrequencyData(a):this._type==="waveform"&&e.getFloatTimeDomainData(a)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(e){this._analysers.forEach((r,a)=>{r.fftSize=2*e,this._buffers[a]=new Float32Array(e)})}get channels(){return this._analysers.length}get type(){return this._type}set type(e){ce(e==="waveform"||e==="fft",`Analyser: invalid type: ${e}`),this._type=e}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(e){this._analysers.forEach(r=>r.smoothingTimeConstant=e)}dispose(){return super.dispose(),this._analysers.forEach(e=>e.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class hi extends H{constructor(){super(S(hi.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Hr({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class uu extends hi{constructor(){super(S(uu.getDefaults(),arguments,["smoothing"])),this.name="Meter";let e=S(uu.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new Hr({context:this.context,size:256,type:"waveform",channels:e.channelCount}),this.smoothing=e.smoothing,this.normalRange=e.normalRange,this._rms=new Array(e.channelCount),this._rms.fill(0)}static getDefaults(){return Object.assign(hi.getDefaults(),{smoothing:.8,normalRange:!1,channelCount:1})}getLevel(){return fr("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){let e=this._analyser.getValue(),r=(this.channels===1?[e]:e).map((a,u)=>{let d=a.reduce((g,v)=>g+v*v,0),p=Math.sqrt(d/a.length);return this._rms[u]=Math.max(p,this._rms[u]*this.smoothing),this.normalRange?this._rms[u]:Qo(this._rms[u])});return this.channels===1?r[0]:r}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class lu extends hi{constructor(){super(S(lu.getDefaults(),arguments,["size"])),this.name="FFT";let e=S(lu.getDefaults(),arguments,["size"]);this.normalRange=e.normalRange,this._analyser.type="fft",this.size=e.size}static getDefaults(){return Object.assign(H.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(e=>this.normalRange?_r(e):e)}get size(){return this._analyser.size}set size(e){this._analyser.size=e}get smoothing(){return this._analyser.smoothing}set smoothing(e){this._analyser.smoothing=e}getFrequencyOfIndex(e){return ce(0<=e&&e<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),e*this.context.sampleRate/(2*this.size)}}class Nh extends hi{constructor(){super(S(Nh.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class hu extends hi{constructor(){super(S(hu.getDefaults(),arguments,["size"])),this.name="Waveform";let e=S(hu.getDefaults(),arguments,["size"]);this._analyser.type="waveform",this.size=e.size}static getDefaults(){return Object.assign(hi.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(e){this._analyser.size=e}}class wt extends H{constructor(){super(S(wt.getDefaults(),arguments,["solo"])),this.name="Solo";let e=S(wt.getDefaults(),arguments,["solo"]);this.input=this.output=new ae({context:this.context}),wt._allSolos.has(this.context)||wt._allSolos.set(this.context,new Set),wt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(H.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),wt._allSolos.get(this.context).forEach(r=>r._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){wt._soloed.has(this.context)||wt._soloed.set(this.context,new Set),wt._soloed.get(this.context).add(this)}_removeSolo(){wt._soloed.has(this.context)&&wt._soloed.get(this.context).delete(this)}_isSoloed(){return wt._soloed.has(this.context)&&wt._soloed.get(this.context).has(this)}_noSolos(){return!wt._soloed.has(this.context)||wt._soloed.has(this.context)&&wt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),wt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}wt._allSolos=new Map,wt._soloed=new Map;class ia extends H{constructor(){super(S(ia.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";let e=S(ia.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new $r({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new ws({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,ue(this,["pan","volume"])}static getDefaults(){return Object.assign(H.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class di extends H{constructor(){super(S(di.getDefaults(),arguments,["volume","pan"])),this.name="Channel";let e=S(di.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new wt({solo:e.solo,context:this.context}),this._panVol=this.output=new ia({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),ue(this,["pan","volume"])}static getDefaults(){return Object.assign(H.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return di.buses.has(e)||di.buses.set(e,new ae({context:this.context})),di.buses.get(e)}send(e,r=0){let a=this._getBus(e),u=new ae({context:this.context,units:"decibels",gain:r});return this.connect(u),u.connect(a),u}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}di.buses=new Map;class Fh extends H{constructor(){super(S(Fh.getDefaults(),arguments)),this.name="Mono",this.input=new ae({context:this.context}),this._merge=this.output=new Ws({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class zr extends H{constructor(){super(S(zr.getDefaults(),arguments,["lowFrequency","highFrequency"])),this.name="MultibandSplit",this.input=new ae({context:this.context}),this.output=void 0,this.low=new gn({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new gn({context:this.context,frequency:0,type:"highpass"}),this.mid=new gn({context:this.context,frequency:0,type:"lowpass"}),this.high=new gn({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high];let e=S(zr.getDefaults(),arguments,["lowFrequency","highFrequency"]);this.lowFrequency=new le({context:this.context,units:"frequency",value:e.lowFrequency}),this.highFrequency=new le({context:this.context,units:"frequency",value:e.highFrequency}),this.Q=new le({context:this.context,units:"positive",value:e.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),ue(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(H.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),Go(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class bD extends H{constructor(){super(...arguments),this.name="Listener",this.positionX=new fe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new fe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new fe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new fe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new fe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new fe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new fe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new fe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new fe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(H.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}_c(l=>{l.listener=new bD({context:l})}),wc(l=>{l.listener.dispose()});class du extends H{constructor(){super(S(du.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";let e=S(du.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=e.panningModel,this.maxDistance=e.maxDistance,this.distanceModel=e.distanceModel,this.coneOuterGain=e.coneOuterGain,this.coneOuterAngle=e.coneOuterAngle,this.coneInnerAngle=e.coneInnerAngle,this.refDistance=e.refDistance,this.rolloffFactor=e.rolloffFactor,this.positionX=new fe({context:this.context,param:this._panner.positionX,value:e.positionX}),this.positionY=new fe({context:this.context,param:this._panner.positionY,value:e.positionY}),this.positionZ=new fe({context:this.context,param:this._panner.positionZ,value:e.positionZ}),this.orientationX=new fe({context:this.context,param:this._panner.orientationX,value:e.orientationX}),this.orientationY=new fe({context:this.context,param:this._panner.orientationY,value:e.orientationY}),this.orientationZ=new fe({context:this.context,param:this._panner.orientationZ,value:e.orientationZ})}static getDefaults(){return Object.assign(H.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(e,r,a){return this.positionX.value=e,this.positionY.value=r,this.positionZ.value=a,this}setOrientation(e,r,a){return this.orientationX.value=e,this.orientationY.value=r,this.orientationZ.value=a,this}get panningModel(){return this._panner.panningModel}set panningModel(e){this._panner.panningModel=e}get refDistance(){return this._panner.refDistance}set refDistance(e){this._panner.refDistance=e}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(e){this._panner.rolloffFactor=e}get distanceModel(){return this._panner.distanceModel}set distanceModel(e){this._panner.distanceModel=e}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(e){this._panner.coneInnerAngle=e}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(e){this._panner.coneOuterAngle=e}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(e){this._panner.coneOuterGain=e}get maxDistance(){return this._panner.maxDistance}set maxDistance(e){this._panner.maxDistance=e}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class ra extends H{constructor(){super(S(ra.getDefaults(),arguments)),this.name="Recorder";let e=S(ra.getDefaults(),arguments);this.input=new ae({context:this.context}),ce(ra.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:e.mimeType})}static getDefaults(){return H.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return Bs!==null&&Reflect.has(Bs,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return nt(this,void 0,void 0,function*(){ce(this.state!=="started","Recorder is already started");let e=new Promise(r=>{let a=()=>{this._recorder.removeEventListener("start",a,!1),r()};this._recorder.addEventListener("start",a,!1)});return this._recorder.start(),yield e})}stop(){return nt(this,void 0,void 0,function*(){ce(this.state!=="stopped","Recorder is not started");let e=new Promise(r=>{let a=u=>{this._recorder.removeEventListener("dataavailable",a,!1),r(u.data)};this._recorder.addEventListener("dataavailable",a,!1)});return this._recorder.stop(),yield e})}pause(){return ce(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class Cs extends H{constructor(){super(S(Cs.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;let e=S(Cs.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new fe({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:e.threshold}),this.attack=new fe({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:e.attack}),this.release=new fe({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:e.release}),this.knee=new fe({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:e.knee}),this.ratio=new fe({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:e.ratio}),ue(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(H.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class fu extends H{constructor(){super(Object.assign(S(fu.getDefaults(),arguments,["threshold","smoothing"]))),this.name="Gate";let e=S(fu.getDefaults(),arguments,["threshold","smoothing"]);this._follower=new Ur({context:this.context,smoothing:e.smoothing}),this._gt=new Jo({context:this.context,value:_r(e.threshold)}),this.input=new ae({context:this.context}),this._gate=this.output=new ae({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(H.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return Qo(this._gt.value)}set threshold(e){this._gt.value=_r(e)}get smoothing(){return this._follower.smoothing}set smoothing(e){this._follower.smoothing=e}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class pu extends H{constructor(){super(Object.assign(S(pu.getDefaults(),arguments,["threshold"]))),this.name="Limiter";let e=S(pu.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new Cs({context:this.context,ratio:20,attack:.003,release:.01,threshold:e.threshold}),this.threshold=this._compressor.threshold,ue(this,"threshold")}static getDefaults(){return Object.assign(H.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class mu extends H{constructor(){super(Object.assign(S(mu.getDefaults(),arguments))),this.name="MidSideCompressor";let e=S(mu.getDefaults(),arguments);this._midSideSplit=this.input=new na({context:this.context}),this._midSideMerge=this.output=new sa({context:this.context}),this.mid=new Cs(Object.assign(e.mid,{context:this.context})),this.side=new Cs(Object.assign(e.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),ue(this,["mid","side"])}static getDefaults(){return Object.assign(H.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class gu extends H{constructor(){super(Object.assign(S(gu.getDefaults(),arguments))),this.name="MultibandCompressor";let e=S(gu.getDefaults(),arguments);this._splitter=this.input=new zr({context:this.context,lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new ae({context:this.context}),this.low=new Cs(Object.assign(e.low,{context:this.context})),this.mid=new Cs(Object.assign(e.mid,{context:this.context})),this.high=new Cs(Object.assign(e.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),ue(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(H.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class vu extends H{constructor(){super(S(vu.getDefaults(),arguments,["low","mid","high"])),this.name="EQ3",this.output=new ae({context:this.context}),this._internalChannels=[];let e=S(vu.getDefaults(),arguments,["low","mid","high"]);this.input=this._multibandSplit=new zr({context:this.context,highFrequency:e.highFrequency,lowFrequency:e.lowFrequency}),this._lowGain=new ae({context:this.context,gain:e.low,units:"decibels"}),this._midGain=new ae({context:this.context,gain:e.mid,units:"decibels"}),this._highGain=new ae({context:this.context,gain:e.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),ue(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(H.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),Go(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class yu extends H{constructor(){super(S(yu.getDefaults(),arguments,["url","onload"])),this.name="Convolver",this._convolver=this.context.createConvolver();let e=S(yu.getDefaults(),arguments,["url","onload"]);this._buffer=new Le(e.url,r=>{this.buffer=r,e.onload()}),this.input=new ae({context:this.context}),this.output=new ae({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=e.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(H.getDefaults(),{normalize:!0,onload:Ie})}load(e){return nt(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(e)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(e){e&&this._buffer.set(e),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));let r=this._buffer.get();this._convolver.buffer=r||null}get normalize(){return this._convolver.normalize}set normalize(e){this._convolver.normalize=e}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function DD(){return ct().now()}function xD(){return ct().immediate()}let CD=ct().transport;function ED(){return ct().transport}let SD=ct().destination,TD=ct().destination;function ID(){return ct().destination}let MD=ct().listener;function AD(){return ct().listener}let OD=ct().draw;function kD(){return ct().draw}let RD=ct();function ND(){return Le.loaded()}let FD=Le,PD=xr,LD=qs})(),s})());var Q0=(()=>{let n=class n{constructor(){this.effects=[new(void 0),new(void 0),new(void 0),new(void 0)],this.findEffectByName("Chorus").start(),this.disableAllEffects()}disableAllEffects(){for(let s of this.effects)s.set({wet:0})}findEffectByName(s){return this.effects.find(o=>o.name===s)}setEffectParam(s,o,c){this.findEffectByName(s)?.set({[o]:c})}getEffectParamValue(s,o){return this.findEffectByName(s)?.[o]}toggleEffect(s,o){let c=this.findEffectByName(s);c&&(c.wet.value=o?1:0)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var Lo=(()=>{let n=class n{constructor(){this.synth=new(void 0)(void 0),this.effectSvc=te(Q0),this.effects=this.effectSvc.effects,this.initEnvelopeValues(),this.synth.chain(...this.effects,(void 0)())}holdNote(s){this.synth.triggerAttack(s)}releaseNote(s){this.synth.triggerRelease(s)}toggleEffect(s,o){this.effectSvc.toggleEffect(s,o)}setEffectParam(s,o,c){this.effectSvc.setEffectParam(s,o,c)}getEffectParamValue(s,o){return this.effectSvc.getEffectParamValue(s,o)}changeWaveShape(s){this.synth.set({oscillator:{type:s}})}setEnvelopeParam(s,o){this.synth.set({envelope:{[s]:o}})}getEnvelopeValue(){return this.synth.get().envelope}initEnvelopeValues(){this.synth.set({envelope:{attack:.1,decay:.1,sustain:.1,release:.1}})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function dA(t,n){if(t&1){let i=Qn();X(0,"button",7),Ae("mousedown",function(){let o=ze(i).$implicit,c=ms();return We(c.holdNote(o))})("mouseup",function(){let o=ze(i).$implicit,c=ms();return We(c.releaseNote(o))})("mouseleave",function(){let o=ze(i).$implicit,c=ms();return We(c.releaseNote(o))}),Se(1),ne()}if(t&2){let i=n.$implicit,s=ms();Ge("ngClass",s.isKeyActive(i)?"bg-red-400":"bg-slate-200"),xe(),Yn(i)}}var Y0=(()=>{let n=class n{constructor(){this.synthSvc=te(Lo),this.octave=1,this.octave$=new Nt(1),this.holdNoteEmitter=new Tt,this.releaseNoteEmitter=new Tt,this.keys=[],this.keysPressed=[],this.notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this.notesPressed=[],this.keysMapped={a:"C",w:"C#",s:"D",e:"D#",d:"E",f:"F",t:"F#",g:"G",y:"G#",h:"A",u:"A#",j:"B",k:"C"},this.noteDown=!1,this.delayOn=!1}ngOnInit(){this.createKeys(),this.octave$.subscribe(s=>{this.octave=s,this.refreshKeys()})}keyDownEvent(s){let o=this.octave;s.key==="k"&&(o=this.octave+1);let c=this.keysMapped[s.key]+o;this.keysPressed.includes(c)||(this.keysPressed.push(c),this.keysMapped.hasOwnProperty(s.key)&&this.holdNote(c))}keyUpEvent(s){let o=this.octave;s.key==="k"&&(o=this.octave+1);let c=this.keysMapped[s.key]+o;this.keysPressed=this.keysPressed.filter(h=>h!==c),this.releaseNote(this.keysMapped[s.key]+o)}isKeyActive(s){return this.keysPressed.includes(s)}holdNote(s){this.holdNoteEmitter.emit(s)}releaseNote(s){this.releaseNoteEmitter.emit(s)}changeOctave(s){this.octave$.next(s)}createKey(s){return s+this.octave}createKeys(){for(let s of this.notes)this.keys.push(this.createKey(s))}refreshKeys(){this.keys=[],this.createKeys()}ngOnDestroy(){this.octave$.unsubscribe()}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=Mt({type:n,selectors:[["keyboard"]],hostBindings:function(o,c){o&1&&Ae("keydown",function(f){return c.keyDownEvent(f)},!1,Ff)("keyup",function(f){return c.keyUpEvent(f)},!1,Ff)},outputs:{holdNoteEmitter:"holdNoteEmitter",releaseNoteEmitter:"releaseNoteEmitter"},standalone:!0,features:[At],decls:9,vars:1,consts:[["octaveIput",""],[1,"bg-neutral-700","p-2","flex","flex-col","justify-center"],[1,"flex","justify-center","range-input","mb-2"],["for","octaveIput",1,"text-white","text-xl","mr-2"],["value","1","type","range","step","1","min","1","max","6",3,"input"],[1,"flex","justify-center"],[1,"p-2","w-10","h-40","m-1","rounded-lg","key-pressed",3,"ngClass"],[1,"p-2","w-10","h-40","m-1","rounded-lg","key-pressed",3,"mousedown","mouseup","mouseleave","ngClass"]],template:function(o,c){if(o&1){let h=Qn();X(0,"div",1)(1,"div",2)(2,"label",3),Se(3),ne(),X(4,"input",4,0),Ae("input",function(){ze(h);let m=Pt(5);return We(c.changeOctave(+m.value))}),ne()(),X(6,"div",5),Ns(7,dA,2,2,"button",6,Rs),ne()()}o&2&&(xe(3),nr("octave: ",c.octave,""),xe(4),Fs(c.keys))},dependencies:[To],styles:[".key-pressed[_ngcontent-%COMP%]{transition:background-color .3s ease}"]});let t=n;return t})();var fA=["*"],X0=(()=>{let n=class n{constructor(){this.toggle=new Tt,this.active=!1}effectToggle(){console.log("toggled",this.effectType),this.active=!this.active;let s={effectType:this.effectType,active:this.active};this.toggle.emit(s)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=Mt({type:n,selectors:[["effect-box"]],inputs:{effectType:"effectType",colorClass:"colorClass",inputConfig:"inputConfig"},outputs:{toggle:"toggle"},standalone:!0,features:[At],ngContentSelectors:fA,decls:7,vars:4,consts:[[1,"p-2","mr-2","h-full","rounded-lg","shadow-2xl","border-emboss","noise-bg",3,"ngClass"],[1,"flex","justify-between","mb-2"],["title","click to toggle effect",1,"p-2","rounded-lg","font-bold","text-gray-500",3,"click","ngClass"],[1,"w-2","h-2","rounded-full",3,"ngClass"],[1,"p-2","flex","flex-col","rounded-lg","shadow-xl","border-groove","label-white"]],template:function(o,c){o&1&&(Ol(),X(0,"div",0)(1,"div",1)(2,"button",2),Ae("click",function(){return c.effectToggle()}),Se(3),ne(),Js(4,"div",3),ne(),X(5,"div",4),kl(6),ne()()),o&2&&(Ge("ngClass",c.colorClass?c.colorClass:"bg-neutral-400"),xe(2),Ge("ngClass",c.active?"bg-neutral-300 button-active":"bg-neutral-200 button-inactive"),xe(),Yn(c.effectType),xe(),Ge("ngClass",c.active?"neon-red":"bg-neutral-200"))},dependencies:[To],styles:[".neon-red[_ngcontent-%COMP%]{background:#ff9292;box-shadow:0 0 20px 15px red}.button-active[_ngcontent-%COMP%]{box-shadow:inset 2px 2px 2px 2px #0000004d}.button-inactive[_ngcontent-%COMP%]{box-shadow:2px 2px 2px 2px #0000004d}"]});let t=n;return t})();var K0=(()=>{let n=class n{constructor(){this.envelopeInputChange=new Tt}onEnvelopeInput(s,o){this.envelopeInputChange.emit({param:s,value:o})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=Mt({type:n,selectors:[["envelope"]],inputs:{initEnvelopeValues:"initEnvelopeValues"},outputs:{envelopeInputChange:"envelopeInputChange"},standalone:!0,features:[At],decls:20,vars:4,consts:[["envelopeAttackInput",""],["envelopeDecayInput",""],["envelopeReleaseInput",""],["envelopeSustainInput",""],[1,"bg-neutral-400","rounded-xl","p-2","border-emboss","noise-bg"],[1,"text-white","text-center"],[1,"border-groove","rounded-xl","flex","flex-col","p-2","shadow-2xl","label-white"],["for","envelopeAttackInput"],["type","range","name","envelopeAttackInput","min","0","max","2","step","0.1",3,"input","value"],["for","envelopeDecayInput"],["type","range","name","envelopeDecayInput","min","0","max","2","step","0.1",3,"input","value"],["for","envelopeReleaseInput"],["type","range","name","envelopeReleaseInput","min","0.1","max","5","step","0.1",3,"input","value"],["for","envelopeSustainInput"],["type","range","name","envelopeSustainInput","min","0.1","max","1","step","0.1",3,"input","value"]],template:function(o,c){if(o&1){let h=Qn();X(0,"div",4)(1,"p",5),Se(2,"Envelope"),ne(),X(3,"div",6)(4,"label",7),Se(5,"Attack"),ne(),X(6,"input",8,0),Ae("input",function(){ze(h);let m=Pt(7);return We(c.onEnvelopeInput("attack",+m.value))}),ne(),X(8,"label",9),Se(9,"Decay"),ne(),X(10,"input",10,1),Ae("input",function(){ze(h);let m=Pt(11);return We(c.onEnvelopeInput("decay",+m.value))}),ne(),X(12,"label",11),Se(13,"Release"),ne(),X(14,"input",12,2),Ae("input",function(){ze(h);let m=Pt(15);return We(c.onEnvelopeInput("release",+m.value))}),ne(),X(16,"label",13),Se(17,"Sustain"),ne(),X(18,"input",14,3),Ae("input",function(){ze(h);let m=Pt(19);return We(c.onEnvelopeInput("sustain",+m.value))}),ne()()()}o&2&&(xe(6),Ge("value",c.initEnvelopeValues.attack),xe(4),Ge("value",c.initEnvelopeValues.decay),xe(4),Ge("value",c.initEnvelopeValues.release),xe(4),Ge("value",c.initEnvelopeValues.sustain))},encapsulation:2});let t=n;return t})();function pA(t,n){if(t&1){let i=Qn();X(0,"div",13)(1,"input",29),Ae("change",function(){let o=ze(i).$implicit,c=ms();return We(c.changeWaveShape(o))}),ne(),X(2,"label",30),Se(3),ne()()}if(t&2){let i=n.$implicit,s=n.$index,o=n.$count;xe(),Ge("checked",s===o-1)("id",i),xe(),Ge("for",i),xe(),Yn(i)}}var J0=(()=>{let n=class n{constructor(){this.synthSvc=te(Lo),this.waveshapes=["sine","sawtooth","square","triangle"]}toggleEffect(s){let o=s.effectType;this.synthSvc.toggleEffect(o,s.active)}onEffectInput(s,o,c){this.synthSvc.setEffectParam(s,o,c)}onEnvelopeInput(s){this.synthSvc.setEnvelopeParam(s.param,s.value)}changeWaveShape(s){this.synthSvc.changeWaveShape(s)}getEffectParamValue(s,o){return this.synthSvc.getEffectParamValue(s,o)}getEnvelopeValues(){let s=this.synthSvc.getEnvelopeValue();return{attack:s.attack,decay:s.decay,release:s.release,sustain:s.sustain}}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=Mt({type:n,selectors:[["fx-board"]],standalone:!0,features:[At],decls:39,vars:12,consts:[["distortionInput",""],["delayTimeInput",""],["delayFeedbackInput",""],["reverbTimeInput",""],["chorusFreqInput",""],["chorusDelayTimeInput",""],["chorusDepthInput",""],[1,"p-4","bg-neutral-700"],[1,"text-white","text-center","text-2xl","mb-2"],[1,"flex","justify-center","range-input"],[1,"bg-neutral-400","rounded-xl","mr-2","border-emboss","noise-bg"],[1,"text-white","text-center","p-2"],[1,"flex","flex-col","p-2","label-white","border-groove","rounded-xl","m-2"],[2,"display","flex","align-items","center"],[1,"mr-2",3,"envelopeInputChange","initEnvelopeValues"],[3,"toggle","effectType"],["type","range","min","0","max","5","step","0.1",3,"input","value"],[1,"range-input",3,"toggle","effectType"],["for","delayTime"],["type","range","name","delayTime","min","0","max","1","step","0.1",3,"input","value"],["for","delayFeedback"],["type","range","name","delayFeedback","min","0","max","1","step","0.1",3,"input","value"],["type","range","min","0.1","max","10","step","0.1",3,"input","value"],["for","chorusFrequency"],["type","range","name","chorusFrequency","min","0","max","10","step","1",3,"input","value"],["for","chorusDelayTime"],["type","range","name","chorusDelayTime","min","0","max","10","step","1",3,"input","value"],["for","chorusDepth"],["type","range","name","chorusDepth","min","0","max","1","step","0.1",3,"input","value"],["type","radio","name","waveshape",1,"mr-2","waveform-radio",3,"change","checked","id"],[1,"cursor-pointer",3,"for"]],template:function(o,c){if(o&1){let h=Qn();X(0,"div",7)(1,"p",8),Se(2,"Effects"),ne(),X(3,"div",9)(4,"div",10)(5,"p",11),Se(6,"waveshape"),ne(),X(7,"div",12),Ns(8,pA,4,4,"div",13,Rs),ne()(),X(10,"envelope",14),Ae("envelopeInputChange",function(m){return ze(h),We(c.onEnvelopeInput(m))}),ne(),X(11,"effect-box",15),Ae("toggle",function(m){return ze(h),We(c.toggleEffect(m))}),X(12,"input",16,0),Ae("input",function(){ze(h);let m=Pt(13);return We(c.onEffectInput("Distortion","distortion",m.value))}),ne()(),X(14,"effect-box",17),Ae("toggle",function(m){return ze(h),We(c.toggleEffect(m))}),X(15,"label",18),Se(16,"Delay time"),ne(),X(17,"input",19,1),Ae("input",function(){ze(h);let m=Pt(18);return We(c.onEffectInput("FeedbackDelay","delayTime",m.value))}),ne(),X(19,"label",20),Se(20,"Feedback"),ne(),X(21,"input",21,2),Ae("input",function(){ze(h);let m=Pt(22);return We(c.onEffectInput("FeedbackDelay","feedback",m.value))}),ne()(),X(23,"effect-box",15),Ae("toggle",function(m){return ze(h),We(c.toggleEffect(m))}),X(24,"input",22,3),Ae("input",function(){ze(h);let m=Pt(25);return We(c.onEffectInput("Reverb","decay",m.value))}),ne()(),X(26,"effect-box",15),Ae("toggle",function(m){return ze(h),We(c.toggleEffect(m))}),X(27,"label",23),Se(28,"Frequency"),ne(),X(29,"input",24,4),Ae("input",function(){ze(h);let m=Pt(30);return We(c.onEffectInput("Chorus","frequency",m.value))}),ne(),X(31,"label",25),Se(32,"Delay time"),ne(),X(33,"input",26,5),Ae("input",function(){ze(h);let m=Pt(34);return We(c.onEffectInput("Chorus","delayTime",m.value))}),ne(),X(35,"label",27),Se(36,"Depth"),ne(),X(37,"input",28,6),Ae("input",function(){ze(h);let m=Pt(38);return We(c.onEffectInput("Chorus","depth",m.value))}),ne()()()()}o&2&&(xe(8),Fs(c.waveshapes),xe(2),Ge("initEnvelopeValues",c.getEnvelopeValues()),xe(),Ge("effectType","Distortion"),xe(),Ge("value",c.getEffectParamValue("Distortion","distortion")),xe(2),Ge("effectType","FeedbackDelay"),xe(3),Ge("value",c.getEffectParamValue("FeedbackDelay","delayTime")),xe(4),Ge("value",c.getEffectParamValue("FeedbackDelay","feedback")),xe(2),Ge("effectType","Reverb"),xe(),Ge("value",c.getEffectParamValue("Reverb","decay")),xe(2),Ge("effectType","Chorus"),xe(3),Ge("value",c.getEffectParamValue("Chorus","frequency")),xe(4),Ge("value",c.getEffectParamValue("Chorus","delayTime")),xe(4),Ge("value",c.getEffectParamValue("Chorus","depth")))},dependencies:[X0,K0],styles:['[_nghost-%COMP%]  .border-emboss{border-top:4px solid #bbb;border-left:4px solid #888;border-right:4px solid #555;border-bottom:4px solid #555}[_nghost-%COMP%]  .border-groove{border-width:3px;border-style:groove;border-color:#ccc}[_nghost-%COMP%]  .label-white label{color:#fff;font-weight:700;margin-bottom:4px;margin-top:4px;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]  .noise-bg{background-image:url("./media/noise-AWH3E4L6.svg")}[_nghost-%COMP%]  .waveform-radio{appearance:none;border-width:3px;border-style:groove;border-color:#ccc;width:20px;height:20px;transition:background-color .3s ease;display:inline-block;cursor:pointer}[_nghost-%COMP%]  .waveform-radio:checked{background:red}']});let t=n;return t})();var ew=(()=>{let n=class n{constructor(){this.synthSvc=te(Lo)}onHoldNote(s){this.synthSvc.holdNote(s)}onReleaseNote(s){this.synthSvc.releaseNote(s)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=Mt({type:n,selectors:[["synth-view"]],standalone:!0,features:[At],decls:5,vars:0,consts:[[1,"text-white","text-center","text-2xl","p-2"],[3,"holdNoteEmitter","releaseNoteEmitter"]],template:function(o,c){o&1&&(X(0,"h1",0),Se(1,"-SOUNDLAB SYNTHESIZER V1-"),ne(),X(2,"div"),Js(3,"fx-board"),ne(),X(4,"keyboard",1),Ae("holdNoteEmitter",function(f){return c.onHoldNote(f)})("releaseNoteEmitter",function(f){return c.onReleaseNote(f)}),ne())},dependencies:[Y0,J0],encapsulation:2});let t=n;return t})();var Qp=class{constructor(n){this.id=n,this.isActive=!1}},tw=(()=>{let n=class n{constructor(){this.transport=(void 0)(),this.numberOfBeats=16,this.currentBeat=0,this.isPlaying=!1,this.instrumentButtons=[],this.synths=[new(void 0)({oscillator:{type:"square"}}),new(void 0),new(void 0)({oscillator:{type:"sawtooth"}}),new(void 0)],this.gain=new(void 0)(.5),this.synths.forEach(s=>s.connect(this.gain)),this.gain.toDestination(),this.initButtons(),this.setBpm(120),this.transport.scheduleRepeat(s=>{this.repeat(s)},"8n")}start(){this.transport.start()}stop(){this.transport.stop()}setBpm(s){this.transport.set({bpm:s})}get bpm(){return this.transport.bpm.value}toggleActiveBeat(s){s.isActive=!s.isActive}initButtons(){this.synths.forEach(()=>{let s=[];for(let o=0;o<this.numberOfBeats;o++)s.push(new Qp(o));this.instrumentButtons.push(s)})}sequencerToggle(){this.isPlaying=!this.isPlaying,this.isPlaying?this.start():this.stop()}repeat(s){this.instrumentButtons.forEach((o,c)=>{let h=this.synths[c];o[this.currentBeat].isActive&&h.triggerAttackRelease("D4","8n",s)}),this.currentBeat=(this.currentBeat+1)%this.numberOfBeats}changeGain(s){this.gain.gain.value=s}clearAll(){this.instrumentButtons.forEach(s=>{s.forEach(o=>o.isActive=!1)})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ve({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function mA(t,n){if(t&1){let i=Qn();X(0,"div",12)(1,"span",16),Se(2,"Are you sure?"),ne(),X(3,"button",10),Ae("click",function(){ze(i);let o=ms();return We(o.closeClearAllPrompt())}),Se(4,"No"),ne(),X(5,"button",10),Ae("click",function(){ze(i);let o=ms();return We(o.clearAll())}),Se(6,"Yes"),ne()()}}function gA(t,n){if(t&1&&(X(0,"span",15),Se(1),ne()),t&2){let i=n.$implicit;xe(),Yn(i.name)}}function vA(t,n){if(t&1){let i=Qn();X(0,"button",18),Ae("click",function(){let o=ze(i).$implicit,c=ms(2);return We(c.toggleActiveBeat(o))}),Se(1),ne()}if(t&2){let i=n.$implicit;Ge("ngClass",i.isActive?"bg-green-500":"bg-neutral-200"),xe(),nr(" ",i.id," ")}}function yA(t,n){if(t&1&&(X(0,"div",13),Ns(1,vA,2,2,"button",17,Rs),ne()),t&2){let i=n.$implicit;xe(),Fs(i)}}var nw=(()=>{let n=class n{constructor(){this.sequencerSvc=te(tw),this.instruments=this.sequencerSvc.synths,this.instrumentButtons=this.sequencerSvc.instrumentButtons,this.clearAllPromptOpen=!1}sequencerToggle(){this.sequencerSvc.sequencerToggle()}toggleActiveBeat(s){this.sequencerSvc.toggleActiveBeat(s)}get isPlaying(){return this.sequencerSvc.isPlaying}setBpm(s){this.sequencerSvc.setBpm(s)}get bpm(){return this.sequencerSvc.bpm}changeGain(s){this.sequencerSvc.changeGain(s)}clearAll(){this.sequencerSvc.clearAll(),this.closeClearAllPrompt()}openClearAllPrompt(){this.clearAllPromptOpen=!0}closeClearAllPrompt(){this.clearAllPromptOpen=!1}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=Mt({type:n,selectors:[["sequencer"]],standalone:!0,features:[At],decls:28,vars:4,consts:[["gainInput",""],["tempoInput",""],[1,"text-2xl","text-white","text-center"],[1,"flex","flex-col","justify-center"],[1,"p-4","range-input"],["type","range","min","0","max","1","step","0.1",3,"input"],["for","gainInput",1,"text-white"],["type","range","min","60","max","240","step","1",3,"input","value"],["for","tempoInput",1,"text-white"],[1,"flex","m-2"],[1,"bg-neutral-200","p-2","m-2","rounded-lg",3,"click"],[1,"flex"],[1,"bg-neutral-400","rounded-lg","pr-2","pl-2"],[1,"flex","justify-center"],[1,"flex","flex-col"],[1,"p-1","m-1","h-10","rounded-lg","bg-neutral-200","block","text-center"],[1,"text-white"],[1,"p-1","m-1","w-10","h-10","rounded-lg","text-center",3,"ngClass"],[1,"p-1","m-1","w-10","h-10","rounded-lg","text-center",3,"click","ngClass"]],template:function(o,c){if(o&1){let h=Qn();X(0,"h1",2),Se(1,"Soundlab Sequencer"),ne(),X(2,"div",3)(3,"div",4)(4,"div")(5,"input",5,0),Ae("input",function(){ze(h);let m=Pt(6);return We(c.changeGain(+m.value))}),ne(),X(7,"label",6),Se(8,"Volume"),ne()(),X(9,"div")(10,"input",7,1),Ae("input",function(){ze(h);let m=Pt(11);return We(c.setBpm(+m.value))}),ne(),X(12,"label",8),Se(13),ne()(),X(14,"div",9)(15,"button",10),Ae("click",function(){return ze(h),We(c.sequencerToggle())}),Se(16),ne(),X(17,"div",11)(18,"button",10),Ae("click",function(){return ze(h),We(c.openClearAllPrompt())}),Se(19,"Clear All"),ne(),Sa(20,mA,7,0,"div",12),ne()()(),X(21,"div",13)(22,"div",14),Ns(23,gA,2,1,"span",15,Rs),ne(),X(25,"div"),Ns(26,yA,3,0,"div",13,Rs),ne()()()}if(o&2){let h=Pt(11);xe(10),Ge("value",c.bpm),xe(3),nr("",h.value," bpm"),xe(3),Yn(c.isPlaying?"Stop":"Start"),xe(4),N_(20,c.clearAllPromptOpen?20:-1),xe(3),Fs(c.instruments),xe(3),Fs(c.instrumentButtons)}},dependencies:[To],encapsulation:2});let t=n;return t})();var sw=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=Mt({type:n,selectors:[["homepage"]],standalone:!0,features:[At],decls:5,vars:0,consts:[[1,"p-2"],[1,"text-2xl","text-white"],[1,"text-white"]],template:function(o,c){o&1&&(X(0,"div",0)(1,"h1",1),Se(2,"Welcome to Soundlab"),ne(),X(3,"p",2),Se(4,"Tone.js / Angular project"),ne()())},encapsulation:2});let t=n;return t})();var iw=[{path:"synth",component:ew},{path:"sequencer",component:nw},{path:"",component:sw}];var rw={providers:[W0(iw)]};var _A=["*"];function wA(t,n){if(t&1&&(X(0,"button",1),Se(1),ne()),t&2){let i=n.$implicit;Ge("routerLink",i.url)("routerLinkActive","bg-neutral-500"),xe(),Yn(i.title)}}var ow=(()=>{let n=class n{constructor(){this.links=[{title:"Synthesizer",url:"synth"},{title:"Sequencer",url:"sequencer"}]}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=Mt({type:n,selectors:[["navbar"]],standalone:!0,features:[At],ngContentSelectors:_A,decls:4,vars:0,consts:[[1,"flex","bg-neutral-400"],[1,"p-2","mr-2","text-white",3,"routerLink","routerLinkActive"]],template:function(o,c){o&1&&(Ol(),X(0,"div",0),kl(1),Ns(2,wA,2,3,"button",1,Rs),ne()),o&2&&(xe(2),Fs(c.links))},dependencies:[Fo,z0],encapsulation:2});let t=n;return t})();var aw=(()=>{let n=class n{constructor(){this.title="soundlab"}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=Mt({type:n,selectors:[["app-root"]],standalone:!0,features:[At],decls:7,vars:0,consts:[[1,"flex","flex-col","justify-center","mr-2","p-2"],["routerLink","/",1,"text-3xl","font-bold","text-white"],["href","https://github.com/mkcodelab",1,"text-white"]],template:function(o,c){o&1&&(X(0,"navbar")(1,"div",0)(2,"a",1),Se(3," Soundlab "),ne(),X(4,"a",2),Se(5,"By MKCodeLab \xA92024"),ne()()(),Js(6,"router-outlet"))},dependencies:[$p,Fo,ow]});let t=n;return t})();l0(aw,rw).catch(t=>console.error(t));
