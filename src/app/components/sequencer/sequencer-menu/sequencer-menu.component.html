<div class="flex m-2">

    <button class="bg-neutral-200 p-2 m-2 rounded-lg"
            (click)="sequencerToggle()">{{isPlaying ? '&#9208;' : '&#9654;'}}</button>

    <div class="flex">
        <button class="bg-neutral-200 p-2 m-2 rounded-lg"
                (click)="openClearAllPrompt()">Clear All</button>

        @if(clearAllPromptOpen) {
        <div class="bg-neutral-400 rounded-lg pr-2 pl-2">
            <span class="text-white">Are you sure?</span>
            <button class="bg-neutral-200 p-2 m-2 rounded-lg"
                    (click)="closeClearAllPrompt()">No</button>
            <button class="bg-neutral-200 p-2 m-2 rounded-lg"
                    (click)="clearAll()">Yes</button>
        </div>

        }
    </div>

    <button class="bg-neutral-200 p-2 m-2 rounded-lg"
            (click)="openSavePatternPrompt()">Save</button>

    @if(savePatternPromptOpen) {
    <div class="bg-neutral-400 rounded-lg pr-2 pl-2">
        <input type="text"
               placeholder="pattern name"
               #patternName>
        <button class="bg-neutral-200 p-2 m-2 rounded-lg"
                (click)="savePattern(patternName.value)">save</button>
        <button class="bg-neutral-200 p-2 m-2 rounded-lg"
                (click)="closeSavePatternPrompt()">cancel</button>
    </div>
    }

    <button class="bg-neutral-200 p-2 m-2 rounded-lg"
            (click)="openModal(loadPatternPrompt, {title: 'Load Pattern'})">Load</button>
    <button class="bg-neutral-200 p-2 m-2 rounded-lg"
            (click)="openModal(randomizePatternPrompt, {title: 'Randomize Pattern'})">Randomize</button>
</div>



<ng-template #loadPatternPrompt>
    <div class="flex flex-wrap">

        @for(pattern of getPatterns(); track pattern) {
        <button class="bg-neutral-200 hover:bg-green-500 p-2 rounded-lg m-1"
                (click)="selectPattern(pattern)">{{pattern.name}}</button>
        }
    </div>
</ng-template>

<ng-template #randomizePatternPrompt>
    <!-- todo: -->
    <!-- add select root note -->
    <!-- add select scale mode -->
    <div class="flex flex-col justify-between rand-pattern-prompt h-full">
        <div>

            <select class="p-2 m-2"
                    name="scaleSelect"
                    (click)="scaleSelectError = false"
                    [ngClass]="{'select-error' : scaleSelectError}"
                    #scaleSelect
                    (change)="selectScale(scaleSelect.value)">
                <option value="">Select Scale</option>
                @for(scale of scales; track scale){
                <option [value]="scale.name">{{scale.name}}</option>
                }
            </select>
            @if(scaleSelectError) {
            <p class="text-red-500 font-bold">Please select scale</p>
            }
        </div>

        <div class="flex justify-center">

            <button class="bg-neutral-200 p-2 m-2 rounded-lg hover:bg-green-500"
                    (click)="onRandomizeClick(scaleSelect.value)">Randomize</button>
        </div>

    </div>
</ng-template>
